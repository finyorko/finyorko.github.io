<!DOCTYPE html>












  


<html class="theme-next gemini use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">


















  
  
  <link rel="stylesheet" href="/lib/fancybox/source/jquery.fancybox.css">







<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/css/main.css?v=7.1.2">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.1.2">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.1.2">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.1.2">


  <link rel="mask-icon" href="/images/logo.svg?v=7.1.2" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '7.1.2',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: true,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  






  <script>
  (function(i,s,o,g,r,a,m){i["DaoVoiceObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;a.charset="utf-8";m.parentNode.insertBefore(a,m)})(window,document,"script",('https:' == document.location.protocol ? 'https:' : 'http:') + "//widget.daovoice.io/widget/0f81ff2f.js","daovoice")
  daovoice('init', {
      app_id: "ba38a684"
    });
  daovoice('update');
  </script>



  <meta name="description" content="小白学习Linux">
<meta name="keywords" content="-Linux">
<meta property="og:type" content="article">
<meta property="og:title" content="learnlinux">
<meta property="og:url" content="https://finyorko.top/learnlinux.html">
<meta property="og:site_name" content="finyorko&#39;s Blog">
<meta property="og:description" content="小白学习Linux">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https://pic2.superbed.cn/item/5dea16c2f1f6f81c5003cfa2.png">
<meta property="og:image" content="https://pic.superbed.cn/item/5deb9969f1f6f81c504b865e.png">
<meta property="og:image" content="https://pic.superbed.cn/item/5decb2c0f1f6f81c507c7b22.png">
<meta property="og:image" content="https://pic2.superbed.cn/item/5decb3e7f1f6f81c507cbd5e.png">
<meta property="og:image" content="https://pic2.superbed.cn/item/5decb3d5f1f6f81c507cbac8.png">
<meta property="og:updated_time" content="2019-12-10T09:48:39.883Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="learnlinux">
<meta name="twitter:description" content="小白学习Linux">
<meta name="twitter:image" content="https://pic2.superbed.cn/item/5dea16c2f1f6f81c5003cfa2.png">





  
  
  <link rel="canonical" href="https://finyorko.top/learnlinux">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>learnlinux | finyorko's Blog</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>
    <!--Github-start-->
    <!--多余了,next的主题配置文件里有github_banner
    <a href="https://github.com/finyorko" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
    -->
    <!--GitHub-end-->
    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">finyorko's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
    
      
    

    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>关于</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>

  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>搜索</a>
        </li>
      
    </ul>
  

  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



  

<!-- 天气 -->
<!--
<script type="text/javascript">
WIDGET = {FID: 'lXulKZ174m'}
</script>
<script type="text/javascript" src="https://apip.weatherdt.com/float/static/js/r.js?v=1111"></script>
-->
</div>
    </header>

    
  
  

  

  <a href="https://github.com/finyorko" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewbox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg></a>



    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://finyorko.top/learnlinux.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="冯宇康">
      <meta itemprop="description" content="起步晚，抓紧学，加油干！">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="finyorko's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">learnlinux

              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-12-10 17:39:31 / 修改时间：17:48:39" itemprop="dateCreated datePublished" datetime="2019-12-10T17:39:31+08:00">2019-12-10</time>
            

            
              

              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">-Linux</span></a></span>

                
                
              
            </span>
          

          
            
            
              
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
            
                <span class="post-meta-item-text">评论数：</span>
                <a href="/learnlinux.html#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/learnlinux.html" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          
            <span class="post-meta-divider">|</span>
            <span class="post-meta-item-icon">
            <i class="fa fa-eye"></i>
             阅读次数： 
            <span class="busuanzi-value" id="busuanzi_value_page_pv"></span>
            </span>
          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">72k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">4:01</span>
              
            </div>
          

          
            <div class="post-description">小白学习Linux</div>
          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <!--小白学习Linux的第一天。-->

<h2 id="linux注意事项"><a href="#linux注意事项" class="headerlink" title="linux注意事项"></a>linux注意事项</h2><ol>
<li><p>严格区分大小写（命令、文件名等）</p>
</li>
<li><p>Linux中所有内容以文件形式保存，包括硬件</p>
<ul>
<li>硬件文件是/dev/sd[a-p]</li>
<li>光盘文件是/dev/sr0等</li>
</ul>
</li>
<li><p>Linux不靠扩展名区分文件类型（靠的是文件权限）</p>
<ul>
<li>压缩包：”*.gz“、”*.bz2“、”*.tar.bz2“等</li>
<li>二进制包：”rpm“等</li>
<li>网页文件：”*.html“</li>
<li>脚本文件：”*.sh”</li>
<li>配置文件：“*.conf”</li>
</ul>
<p>但是这些扩展名是给管理员看的，其实并不需要。主要是便于识别，非必须。</p>
</li>
<li><p>Linux所有的存储设备都必须挂载，只有用户才能使用，包括硬盘、U盘和光盘</p>
</li>
<li><p>Windows下的程序不能直接在Linux中安装和运行</p>
</li>
<li><p>服务器注意事项：</p>
<ul>
<li><p>远程服务器不允许关机，只能重启</p>
</li>
<li><p>重启时应该关闭服务</p>
</li>
<li><p>不要在服务器访问高峰运行高负载命令</p>
</li>
<li><p>远程配置防火墙不要把自己踢出服务器</p>
</li>
<li><p>制定合理的密码规范并定期更新</p>
</li>
<li><p>合理分配权限</p>
</li>
<li><p>定期备份重要数据和日志</p>
</li>
</ul>
</li>
</ol>
<h2 id="Linux各个目录的作用"><a href="#Linux各个目录的作用" class="headerlink" title="Linux各个目录的作用"></a>Linux各个目录的作用</h2><ul>
<li>/bin/ 　存放系统命令的目录，普通用户和超级用户都可以执行. 不过放在/bin下的命令在单用户模式下也可以执行 。 </li>
<li>/sbin/　保存和系统环境设置相关的命令，只有超级用户可以使用这些命令进行系统环境设置，但是有些命令可以允许普通用户查看。</li>
<li>/usr/bin/　存放系统命令的目录，普通用户和超级用户都可以执行。这些命令和系统无关，在单用户模式下不能执行。</li>
<li>/usr/sbin/　存放根文件系统不必要的系统管理命令，例如多数服务程序。只有超级用户可以使用。</li>
<li>/boot/　系统启动目录，保存系统启动相关文件。如内核文件和启动引导程序。</li>
<li>/dev/　 设备文件保存位置。</li>
<li>/etc/　配置文件保存位置。系统内所有采用默认安装(rpm安装)的服务的配置文件全部都保存在这个目录当中。如用户的账号和密码，服务的启动脚本。常用服务的配置文件等。</li>
<li>/home/　普通用户的家目录。建立每个用户时，每个用户要有一个默认的登录位置，这个位置就是这个用户的家目录。所有普通用户的家目录就是在/home下建立一个和用户名相同的目录。如user1的家目录就是/home/user1</li>
<li>/lib/ 　 系统调用的函数库保存位置</li>
<li>/lost+found/　当系统意外崩溃或意外关机，而产生一些文件碎片放在这里。当系统启动的过程中fsck工具会检查这里，并修复已损坏的文件系统。这个目录只在每个分区中出现，例如/lost+found 就是根分区的备份恢复录，/boot/lost+found 就是/boot分区的备份恢复目录。</li>
<li>/media/ 　挂载目录，系统建议是用来挂载媒体设备的，例如软盘和光盘。</li>
<li>/mnt/ 　　挂载目录，早期linux中只有这一个挂载目录，并没有细分，现在这个目录系统建议挂载额外设备，例如U盘，移动硬盘和其他操作系统的分区</li>
<li>/misc/ 　挂载目录， 系统建议用来挂载NFS服务的共享目录。</li>
<li>/opt/ 　第三方安装的软件保存位置。 这个目录就是放置和安装其他软件的位置。现在行业习惯是安装在在usr/local/目录中。</li>
<li>/proc/ 　虚拟文件系统，该目录中的数据并不保存到硬盘当中，而是保存到内存当中。 主要保存系统的内核，进程。外部设备状态和网络状态灯。如/proc/cpuinfo 是保存cpu信息的，/proc/devices是保存设备驱动的列表的，/proc/filesystems是保存文件系统列表的， /proc/net是保存网络协议信息的。注意不要往里面写东西。</li>
<li>/sys/　虚拟文件系统，和/proc目录相似，都是保存在内存当中的，主要是保存于内核相关信息的。</li>
<li>/root/ 　超级用户的家目录，普通用户家目录在”/home”下，超级用户家目录直接在 “/”下。</li>
<li>/srv/ 　服务数据目录.一些系统服务启动之后，可以在这个目录中保存所需要的数据。</li>
<li>/tmp/　临时目录，系统存在临时文件的目录. 该目录下所有用户都可以访问和写入，建议此目录中不能存放重要数据，最好每次开机都可以把该目录清空</li>
<li>/usr/ 　系统软件资源目录，”unix softwre resource”的缩写，存在系统软件资源的目录。系统中安装的软件大多数保存在这里。</li>
<li>/var/ 　动态数据保存位置，主要保存缓存，日志已经软件运行所产生的文件。</li>
</ul>
<h2 id="Linux常用命令"><a href="#Linux常用命令" class="headerlink" title="Linux常用命令"></a>Linux常用命令</h2><h3 id="文件处理命令"><a href="#文件处理命令" class="headerlink" title="文件处理命令"></a>文件处理命令</h3><h4 id="命令格式与目录处理命令ls"><a href="#命令格式与目录处理命令ls" class="headerlink" title="命令格式与目录处理命令ls"></a>命令格式与目录处理命令ls</h4><ul>
<li><p>命令格式：命令 [-选项] [参数]<br>例 : ls -la /etc</p>
</li>
<li><p>说明:   </p>
<ol>
<li>个别命令使用不遵循此格式</li>
<li>当有多个选项时,可以写在一起</li>
<li>简化选项与完整选项<br>-a 等于 –all</li>
</ol>
</li>
<li><p>目录处理命令</p>
<p>命令名称: ls</p>
<p>命令英文原意: list</p>
<p>命令所在路径: /bin/ls</p>
<p>执行权限: 所有用户</p>
<p>功能描述: 显示目录文件</p>
<p>语法:  ls 选项[-ald] [文件或目录]</p>
<pre><code>-a 显示所有文件,包括隐藏文件
-l 详细信息显示
-d 查看目录属性</code></pre></li>
<li><p>-rw-r–r–</p>
<p>- 文件类型(- 文件 d 目录 l 软链接文件)<br>rw- r– r–<br>u    g   o<br>u所有者   g所属组   o其他人<br>r读 w写 x执行</p>
</li>
</ul>
<h4 id="目录处理命令"><a href="#目录处理命令" class="headerlink" title="目录处理命令"></a>目录处理命令</h4><h5 id="mkdir"><a href="#mkdir" class="headerlink" title="mkdir"></a>mkdir</h5><ul>
<li>命令名称:mkdir</li>
<li>命令英文原意:make directories</li>
<li>命令所在路径:/bin/mkdir</li>
<li>执行权限:所有用户</li>
<li>语法:mkdir -p [目录名]</li>
<li>功能描述:创建新目录</li>
<li>-p 递归创建</li>
<li>范例: $ mkdir -p /tmp/Japan/boduo<br>$ mkdir /tmp/Japan/longze /tmp/Japan/cangjing</li>
</ul>
<h5 id="cd"><a href="#cd" class="headerlink" title="cd"></a>cd</h5><ul>
<li><p>命令名称:cd</p>
</li>
<li><p>命令英文原意:change directory</p>
</li>
<li><p>命令所在路径:shell内置命令</p>
</li>
<li><p>执行权限:所有用户</p>
</li>
<li><p>语法:cd [目录]</p>
</li>
<li><p>功能描述:切换目录</p>
</li>
<li><p>范例:   $ cd  /tmp/Japan/boduo 切换到指定目录</p>
<p>​            $cd ..        回到上一级目录</p>
<p>​            $cd ../..     回到上上一次所在目录</p>
<p>​            $cd -         返回上两级目录            </p>
</li>
</ul>
<h5 id="pwd"><a href="#pwd" class="headerlink" title="pwd"></a>pwd</h5><ul>
<li>命令名称:pwd</li>
<li>命令英文原意:print working directory</li>
<li>命令所在路径:/bin/pwd</li>
<li>执行权限:所有用户</li>
<li>语法:pwd</li>
<li>功能描述:显示当前目录</li>
<li>范例:  $ pwd  显示当前目录</li>
</ul>
<h5 id="rmdir"><a href="#rmdir" class="headerlink" title="rmdir"></a>rmdir</h5><ul>
<li>命令名称:rmdir</li>
<li>命令英文原意:remove empty directories</li>
<li>命令所在路径:/bin/rmdir</li>
<li>执行权限:所有用户</li>
<li>语法:rmdir [目录名]</li>
<li>功能描述: 删除空目录</li>
<li>范例: $ rmdir /tmp/linux/test</li>
</ul>
<h5 id="cp"><a href="#cp" class="headerlink" title="cp"></a>cp</h5><ul>
<li><p>命令名称: cp</p>
</li>
<li><p>命令英文原意: copy</p>
</li>
<li><p>命令所在路径: /bin/cp</p>
</li>
<li><p>执行权限: 所有用户</p>
</li>
<li><p>语法: cp  -rp [原文件或目录] [目标目录]</p>
<p>​                -r 递归复制目录及内部的所有内容</p>
<p>​                -p 保留文件属性</p>
<p>​                -f 强制</p>
<p>​                -i 目标文件以存在，则在覆盖前询问是否覆盖 </p>
<p>​                -u 若源文件比目标文件新，则覆盖，否则跳过</p>
</li>
<li><p>功能描述:复制文件或目录</p>
</li>
</ul>
<h5 id="mv"><a href="#mv" class="headerlink" title="mv"></a>mv</h5><ul>
<li>命令名称:mv</li>
<li>命令英文原意:move</li>
<li>命令所在路径:/bin/mv</li>
<li>执行权限:所有用户</li>
<li>语法:mv [原文件或目录] [目标目录]</li>
<li>功能描述:剪切文件、改名</li>
</ul>
<h5 id="rm"><a href="#rm" class="headerlink" title="rm"></a>rm</h5><ul>
<li>命令名称:rm</li>
<li>命令英文原意:remove</li>
<li>命令所在路径:/bin/rm</li>
<li>执行权限:所有用户</li>
<li>语法:  rm -rf [文件或目录]</li>
</ul>
<p>​                        -r 删除目录</p>
<p>​                        -f 强制执行</p>
<ul>
<li>功能描述:删除文件</li>
</ul>
<h4 id="文件处理命令-1"><a href="#文件处理命令-1" class="headerlink" title="文件处理命令"></a>文件处理命令</h4><h5 id="touch"><a href="#touch" class="headerlink" title="touch"></a>touch</h5><ul>
<li><p>创建空文件</p>
</li>
<li><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">touch file_name</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h5 id="cat"><a href="#cat" class="headerlink" title="cat"></a>cat</h5><ul>
<li><p>语法: cat [文件名]</p>
</li>
<li><p>功能描述: 显示文件内容</p>
<p>​                 -n 显示行号  </p>
</li>
</ul>
<h5 id="tac"><a href="#tac" class="headerlink" title="tac"></a>tac</h5><ul>
<li>语法:tac [文件名]</li>
<li>功能描述:显示文件内容(反向列示)</li>
</ul>
<h5 id="more"><a href="#more" class="headerlink" title="more"></a>more</h5><ul>
<li>语法:more [文件名]</li>
</ul>
<p>​         (空格) 或f   翻页<br>​         (Enter)       换行<br>​         q或Q          退出</p>
<ul>
<li>功能描述:分页显示文件内容</li>
</ul>
<h5 id="less"><a href="#less" class="headerlink" title="less"></a>less</h5><ul>
<li><p>语法:less [文件名]</p>
</li>
<li><p>功能描述:分页显示文件内容(可向上翻页)</p>
</li>
</ul>
<h5 id="head"><a href="#head" class="headerlink" title="head"></a>head</h5><ul>
<li>语法:head [文件名]</li>
<li>功能描述:显示文件前面几行<pre><code>-n 指定行数</code></pre></li>
</ul>
<h5 id="tail"><a href="#tail" class="headerlink" title="tail"></a>tail</h5><ul>
<li><p>语法:tail [文件名]</p>
</li>
<li><p>功能描述:显示文件后面几行</p>
<pre><code>-n 指定行数
-f 动态显示文件末尾内容</code></pre></li>
<li><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tail -n 100 /etc/cron  <span class="comment">#显示最后100行数据</span></span><br><span class="line">tail -n -100 /etc/cron <span class="comment">#除了前99行不显示外，显示第100行到末尾行</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h4 id="链接命令"><a href="#链接命令" class="headerlink" title="链接命令"></a>链接命令</h4><h5 id="ln"><a href="#ln" class="headerlink" title="ln"></a>ln</h5><ul>
<li>语法:ln -s [原文件] [目标文件]<pre><code>-s 创建软链接</code></pre></li>
<li>功能描述:生成链接文件</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ ln -s /etc/issue /tmp/issue.soft</span><br><span class="line">  创建文件/etc/issue的软链接/tmp/issue.soft</span><br><span class="line">$ ln /etc/issue /tmp/issue.hard</span><br><span class="line">  创建文件/etc/issue的硬链接/tmp/issue.hard</span><br></pre></td></tr></table></figure>

<ul>
<li>软链接特征:类似Windows快捷方式<br>1、lrwxrwxrwx l 软链接<pre><code>软链接文件权限都为rwxrwxrwx</code></pre>2、文件大小-只是符号链接<br>3、/tmp/issue.soft -&gt; /etc/issue<pre><code>箭头指向原文件</code></pre></li>
<li>硬链接特征:<br>1、拷贝cp -p + 同步更新<pre><code>echo &quot;this is a test&quot; &gt;&gt; /etc/motd</code></pre>2、可通过i节点识别<br>3、不能跨分区<br>4、不能针对目录使用</li>
</ul>
<h3 id="权限管理命令"><a href="#权限管理命令" class="headerlink" title="权限管理命令"></a>权限管理命令</h3><h4 id="chmod"><a href="#chmod" class="headerlink" title="chmod"></a>chmod</h4><ul>
<li><p>语法:chmod [{ugoa}{+-=}{rwx}] [文件或目录]</p>
<pre><code>[mode=421 ] [文件或目录]
-R 递归修改</code></pre></li>
<li><ul>
<li>u 表示该文件的拥有者，g 表示与该文件的拥有者属于同一个群体(group)者，o 表示其他以外的人，a 表示这三者皆是。</li>
<li>表示增加权限、- 表示取消权限、= 表示唯一设定权限。</li>
<li>r 表示可读取，w 表示可写入，x 表示可执行，X 表示只有当该文件是个子目录或者该文件已经被设定过为可执行。</li>
</ul>
</li>
<li><p>功能描述:改变文件或目录权限</p>
</li>
<li><p>将目前目录下的所有文件与子目录皆设为任何人可读取 :</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod -R a+r *</span><br></pre></td></tr></table></figure>
</li>
<li><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod pqn file</span><br></pre></td></tr></table></figure>

<p>其中p,q,n各为一个数字，分别表示User、Group、及Other的权限。</p>
<p>r=4，w=2，x=1</p>
<ul>
<li>若要rwx属性则4+2+1=7；</li>
<li>若要rw-属性则4+2=6；</li>
<li>若要r-x属性则4+1=5。</li>
</ul>
</li>
<li><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod a=rwx file</span><br></pre></td></tr></table></figure>

<p>和</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod 777 file</span><br></pre></td></tr></table></figure>

<p>效果相同</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod ug=rwx,o=x file</span><br></pre></td></tr></table></figure>

<p>和</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod 771 file</span><br></pre></td></tr></table></figure>

<p>效果相同</p>
</li>
</ul>
<h4 id="其他权限管理命令"><a href="#其他权限管理命令" class="headerlink" title="其他权限管理命令"></a>其他权限管理命令</h4><h5 id="chown"><a href="#chown" class="headerlink" title="chown"></a>chown</h5><ul>
<li><p>语法:chown [用户] [文件或目录]</p>
</li>
<li><p>功能描述:改变文件或目录的所有者</p>
</li>
<li><p>范例:$ chown usr_1 file_1</p>
<p>改变文件file_1的所有者为usr_1</p>
</li>
</ul>
<h5 id="chgrp"><a href="#chgrp" class="headerlink" title="chgrp"></a>chgrp</h5><ul>
<li>语法:chgrp [用户组] [文件或目录]</li>
<li>功能描述:改变文件或目录的所属组</li>
<li>范例:$ chgrp lampbrother file_1<pre><code>改变文件file_1的所属组为lampbrother</code></pre></li>
</ul>
<h5 id="umask"><a href="#umask" class="headerlink" title="umask"></a>umask</h5><ul>
<li><p>语法:umask [-S]</p>
<p>​         -S 以rwx形式显示新建文件缺省权限</p>
</li>
<li><p>功能描述:显示、设置文件的缺省权限</p>
</li>
<li><p>范例: $ umask -S</p>
</li>
</ul>
<h3 id="文件搜索命令"><a href="#文件搜索命令" class="headerlink" title="文件搜索命令"></a>文件搜索命令</h3><p>find</p>
<ul>
<li><p>功能描述:文件搜索</p>
</li>
<li><p>语法:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ find  path  -option  【 -<span class="built_in">print</span> 】  【 -<span class="built_in">exec</span>  -ok  |xargs  |grep  】 【  <span class="built_in">command</span>  &#123;&#125; \;  】</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>path</strong>：要查找的目录路径。 </p>
<ul>
<li>~ 表示$HOME目录</li>
<li>​    <strong>.</strong> 表示当前目录</li>
<li>​    / 表示根目录 </li>
</ul>
</li>
<li><p><strong>-exec</strong>　对搜索到的文件执行特定的操作，固定的格式为：<code>-exec &#39;commond&#39; {} \</code>;  <strong>注意：{} 表示查询的结果。</strong></p>
<p>举例1: 搜索 /etc 目录下的文件（非目录），文件以 conf 结尾，且大于 10k，然后将其删除。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /etc -type f -name &apos;*.conf&apos; -size +10k -exec rm -f &#123;&#125; \</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>ok</strong>：与exec作用相同，</p>
<pre><code>区别在于，在执行命令之前，都会给出提示，让用户确认是否执行 </code></pre></li>
<li><p><strong>|xargs</strong> 与exec作用相同 ，起承接作用</p>
<p>区别在于 <strong>|xargs</strong> 主要用于承接删除操作 ，而 <strong>-exec</strong> 都可用 如复制、移动、重命名等</p>
</li>
<li><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">-name  filename        #查找名为filename的文件</span><br><span class="line">-iname filename        #不区分大小写</span><br><span class="line">-user  user_1　        #查找文件所属用户为user_1的所有文件</span><br><span class="line">-group group_1         #查找文件所属组为group_1的所有文件</span><br><span class="line">-type　　根据类型查找：如下</span><br><span class="line">　　　　　　f　　文件　　　　　　　  find . -type f</span><br><span class="line">　　　　　　d　　目录　　　　　　　　find . -type d</span><br><span class="line">　　　　　　c　　字符设备文件　　　　find . -type c</span><br><span class="line">　　　　　　b　　块设备文件　　　　　find . -type b</span><br><span class="line">　　　　　　l　　链接文件　　　　　  find . -type l</span><br><span class="line">　　　　　　p　　管道文件　　　　　　find . -type p</span><br><span class="line">-size　   根据文件大小查询</span><br><span class="line">　　　　　　-n　　小于 大小为 n 的文件</span><br><span class="line">　　　　　　+n　　大于 大小为 n 的文件</span><br><span class="line">-mtime　　</span><br><span class="line">　　　　　　-n　　n 天以内修改的文件。</span><br><span class="line">　　　　　　+n　　n 天以外修改的文件。</span><br><span class="line">　　　　　　n　　 正好 n天 修改的文件</span><br><span class="line">-mmin　　</span><br><span class="line">　　　　　　-n　　n 分钟以内修改过的文件</span><br><span class="line"> 　　　　　 +n　　n 分钟之前修改过的文件</span><br><span class="line">-perm     #按执行权限来查找</span><br><span class="line">-mindepth n　　从第 n 级目录开始搜索</span><br><span class="line">-maxdepth n　　表示至多搜索到第 n-1 级子目录。</span><br><span class="line"></span><br><span class="line">#逻辑运算符　</span><br><span class="line">-a　　　　与  （默认情况查询条件之间都是 与 的关系）</span><br><span class="line">-o　　　　或</span><br><span class="line">-not | ！　 非</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h4 id="其他搜索命令"><a href="#其他搜索命令" class="headerlink" title="其他搜索命令"></a>其他搜索命令</h4><h5 id="locate"><a href="#locate" class="headerlink" title="locate"></a>locate</h5><ul>
<li>语法:locate 文件名</li>
<li>功能描述: 在文件资料库中查找文件</li>
</ul>
<h5 id="which"><a href="#which" class="headerlink" title="which"></a>which</h5><ul>
<li>语法:which 命令</li>
<li>功能描述:搜索命令所在目录及别名信息</li>
<li>范例: <code>$ which ls</code></li>
</ul>
<h5 id="whereis"><a href="#whereis" class="headerlink" title="whereis"></a>whereis</h5><ul>
<li>语法:whereis [命令名称]</li>
<li>功能描述:搜索命令所在目录及帮助文档路径</li>
<li>范例:$ whereis ls</li>
</ul>
<h5 id="grep"><a href="#grep" class="headerlink" title="grep"></a>grep</h5><ul>
<li><p>语法:grep -iv [指定字串] [文件]</p>
</li>
<li><p>功能描述:在文件中搜寻字串匹配的行并输出</p>
<p>​                -i 不区分大小写</p>
<p>​                -v 排除指定字串</p>
</li>
<li><p>范例:# grep mysql /root/install.log</p>
</li>
</ul>
<h3 id="帮助命令"><a href="#帮助命令" class="headerlink" title="帮助命令"></a>帮助命令</h3><h4 id="man"><a href="#man" class="headerlink" title="man"></a>man</h4><ul>
<li>语法:man [命令或配置文件]</li>
<li>功能描述:获得帮助信息</li>
<li>范例:  $ man ls   查看ls命令的帮助信息<pre><code>\$ man services    查看配置文件services的帮助信息</code></pre></li>
</ul>
<h4 id="help"><a href="#help" class="headerlink" title="help"></a>help</h4><ul>
<li>语法:help 命令</li>
<li>功能描述:获得Shell内置命令的帮助信息</li>
<li>范例: $ help umask  查看umask命令的帮助信息</li>
</ul>
<h3 id="用户管理命令"><a href="#用户管理命令" class="headerlink" title="用户管理命令"></a>用户管理命令</h3><h4 id="useradd"><a href="#useradd" class="headerlink" title="useradd"></a>useradd</h4><ul>
<li>执行权限:root</li>
<li>语法:useradd 用户名</li>
<li>功能描述:添加新用户</li>
<li>范例: $ useradd finyorko</li>
</ul>
<h4 id="passwd"><a href="#passwd" class="headerlink" title="passwd"></a>passwd</h4><ul>
<li>执行权限:所有用户</li>
<li>语法:passwd 用户名</li>
<li>功能描述:设置用户密码</li>
<li>范例: $ passwd finyorko</li>
</ul>
<h4 id="who"><a href="#who" class="headerlink" title="who"></a>who</h4><ul>
<li>执行权限:所有用户</li>
<li>语法:who</li>
<li>功能描述:查看登录用户信息</li>
<li>范例: $ who</li>
</ul>
<h4 id="w"><a href="#w" class="headerlink" title="w"></a>w</h4><ul>
<li>执行权限:所有用户</li>
<li>语法:w</li>
<li>功能描述:查看登录用户详细信息</li>
<li>范例: $ w</li>
</ul>
<h3 id="压缩解压命令"><a href="#压缩解压命令" class="headerlink" title="压缩解压命令"></a>压缩解压命令</h3><h4 id="gzip压缩"><a href="#gzip压缩" class="headerlink" title="gzip压缩"></a>gzip压缩</h4><ul>
<li>语法: gzip [文件]</li>
<li>功能描述: 压缩文件</li>
<li>压缩后文件格式:   .gz</li>
</ul>
<h4 id="gunzip解压"><a href="#gunzip解压" class="headerlink" title="gunzip解压"></a>gunzip解压</h4><ul>
<li>语法:gunzip [压缩文件]</li>
<li>功能描述:解压缩.gz的压缩文件</li>
<li>范例: $ gunzip boduo.gz</li>
</ul>
<h4 id="tar压缩"><a href="#tar压缩" class="headerlink" title="tar压缩"></a>tar压缩</h4><ul>
<li>语法:tar 选项[-zcf] [压缩后文件名] [目录]<pre><code>-c 打包
-v 显示详细信息
-f 指定文件名
-z 打包同时压缩  </code></pre></li>
<li>功能描述:打包目录</li>
<li>压缩后文件格式: .tar.gz</li>
<li>范例:  <code>$ tar -zcf Japan.tar.gz Japan</code>将目录Japan打包并压缩为Japan.tar.gz文件</li>
</ul>
<h4 id="tar解压"><a href="#tar解压" class="headerlink" title="tar解压"></a>tar解压</h4><ul>
<li><p>tar命令解压缩语法:<br>-x 解包<br>-v 显示详细信息<br>-f 指定解压文件<br>-z 解压缩<br>-C 指定需要解压到的目录</p>
</li>
<li><p>-r：向压缩归档文件末尾追加文件<br>-u：更新原压缩包中的文件</p>
</li>
<li><p>范例:$ tar -zxvf Japan.tar.gz</p>
</li>
</ul>
<h4 id="zip压缩"><a href="#zip压缩" class="headerlink" title="zip压缩"></a>zip压缩</h4><ul>
<li><p>语法:   zip 选项[-r] [压缩后文件名] [文件或目录]</p>
<pre><code>-r 压缩目录</code></pre></li>
<li><p>功能描述:压缩文件或目录</p>
</li>
<li><p>压缩后文件格式:.zip</p>
</li>
<li><p>范例:<br>$ zip buduo.zip boduo      压缩文件<br>​$ zip -r Japan.zip Japan      压缩目录</p>
</li>
</ul>
<h4 id="unzip解压"><a href="#unzip解压" class="headerlink" title="unzip解压"></a>unzip解压</h4><ul>
<li>语法:unzip [压缩文件]</li>
<li>功能描述:解压.zip的压缩文件</li>
<li>范例:$ unzip test.zip</li>
</ul>
<h4 id="bzip2压缩"><a href="#bzip2压缩" class="headerlink" title="bzip2压缩"></a>bzip2压缩</h4><ul>
<li>语法: bzip2 选项 [-k] [文件]<pre><code>-k 产生压缩文件后保留原文件</code></pre></li>
<li>功能描述:压缩文件</li>
<li>压缩后文件格式:   .bz2</li>
<li>范例:  $ bzip2 -k boduo<br>​           $ tar -cjf Japan.tar.bz2 Japan</li>
</ul>
<h4 id="bunzip解压"><a href="#bunzip解压" class="headerlink" title="bunzip解压"></a>bunzip解压</h4><ul>
<li>语法: bunzip2 选项 [-k] [压缩文件]<pre><code>-k 解压缩后保留原文件</code></pre></li>
<li>功能描述:解压缩</li>
<li>范例: $ bunzip2 -k boduo.bz2<pre><code>\$ tar -xjf Japan.tar.bz2</code></pre></li>
</ul>
<h3 id="网络命令"><a href="#网络命令" class="headerlink" title="网络命令"></a>网络命令</h3><h4 id="write"><a href="#write" class="headerlink" title="write"></a>write</h4><ul>
<li>语法:write &lt;用户名&gt;</li>
<li>功能描述:给用户发信息,以Ctrl+D保存结束</li>
<li>范例: # write finyorko</li>
</ul>
<h4 id="wall"><a href="#wall" class="headerlink" title="wall"></a>wall</h4><ul>
<li>命令英文原意:write all</li>
<li>执行权限:所有用户</li>
<li>语法:wall [message]</li>
<li>功能描述:发广播信息</li>
<li>范例: # wall Finyorko is a honest man!</li>
</ul>
<h4 id="ping"><a href="#ping" class="headerlink" title="ping"></a>ping</h4><ul>
<li>语法:ping 选项 IP地址<pre><code>-c 指定发送次数</code></pre></li>
<li>功能描述:测试网络连通性</li>
<li>范例: # ping 192.168.1.156</li>
</ul>
<h4 id="ifconfig"><a href="#ifconfig" class="headerlink" title="ifconfig"></a>ifconfig</h4><ul>
<li>命令英文原意:interface configure</li>
<li>执行权限:root</li>
<li>语法:ifconfig 网卡名称 IP地址</li>
<li>功能描述:查看和设置网卡信息</li>
<li>范例:  # ifconfig eth0 192.168.8.250</li>
</ul>
<h4 id="mail"><a href="#mail" class="headerlink" title="mail"></a>mail</h4><ul>
<li>语法:mail [用户名]</li>
<li>功能描述:查看发送电子邮件</li>
<li>范例:# mail root</li>
</ul>
<h4 id="last"><a href="#last" class="headerlink" title="last"></a>last</h4><ul>
<li>语法:last</li>
<li>功能描述:列出目前与过去登入系统的用户信息</li>
</ul>
<h4 id="lastlog"><a href="#lastlog" class="headerlink" title="lastlog"></a>lastlog</h4><ul>
<li>语法:lastlog</li>
<li>功能描述:检查某特定用户上次登录的时间</li>
<li>范例 :  $ lastlog<pre><code>\$ lastlog -u 502</code></pre></li>
</ul>
<h4 id="traceroute"><a href="#traceroute" class="headerlink" title="traceroute"></a>traceroute</h4><ul>
<li>语法:traceroute</li>
<li>功能描述:显示数据包到主机间的路径</li>
<li>范例:# traceroute <a href="http://www.lampbrother.net" target="_blank" rel="noopener">www.lampbrother.net</a></li>
</ul>
<h4 id="netstat"><a href="#netstat" class="headerlink" title="netstat"></a>netstat</h4><ul>
<li><p>语法:netstat [选项]</p>
</li>
<li><p>功能描述:显示网络相关信息</p>
</li>
<li><p>选项:<br>-t :   TCP协议<br>-u :  UDP协议<br>-l :   监听<br>-r :  路由<br>-n : 显示IP地址和端口号</p>
</li>
<li><p>范例:</p>
<p>#netstat -tlun  查看本机监听的端口</p>
<p>#netstat -an    查看本机所有的网络连接</p>
<p>#netstat -rn     查看本机路由表</p>
</li>
</ul>
<h4 id="setup"><a href="#setup" class="headerlink" title="setup"></a>setup</h4><ul>
<li>语法:setup</li>
<li>功能描述:配置网络</li>
<li>范例:# setup</li>
</ul>
<h4 id="mount"><a href="#mount" class="headerlink" title="mount"></a>mount</h4><ul>
<li><p>mount [-t 文件系统] 设备文件名 挂载点</p>
</li>
<li><p>范例:# mount -t  iso9660  /dev/sr0 /mnt/cdrom</p>
</li>
</ul>
<h3 id="关机重启命令"><a href="#关机重启命令" class="headerlink" title="关机重启命令"></a>关机重启命令</h3><h4 id="shutdown"><a href="#shutdown" class="headerlink" title="shutdown"></a>shutdown</h4><ul>
<li>shutdown [选项] 时间</li>
<li>选项:<br>-c: 取消前一个关机命令<br>-h: 关机<br>-r: 重启</li>
</ul>
<h4 id="其他关机命令"><a href="#其他关机命令" class="headerlink" title="其他关机命令"></a>其他关机命令</h4><p>halt</p>
<p>poweroff</p>
<p>init 0</p>
<h4 id="其他重启命令"><a href="#其他重启命令" class="headerlink" title="其他重启命令"></a>其他重启命令</h4><p>reboot</p>
<p>init 6</p>
<h4 id="系统运行级别"><a href="#系统运行级别" class="headerlink" title="系统运行级别"></a>系统运行级别</h4><ul>
<li><p>0     关机</p>
</li>
<li><p>1     单用户</p>
</li>
<li><p>2     不完全多用户,不含NFS服务</p>
</li>
<li><p>3     完全多用户</p>
</li>
<li><p>4     未分配</p>
</li>
<li><p>5     图形界面</p>
</li>
<li><p>6     重启</p>
</li>
<li><p>修改默认系统运行级别   #cat /etc/inittab</p>
</li>
<li><p>查询系统运行级别  #runlevel</p>
</li>
</ul>
<h4 id="退出登录命令"><a href="#退出登录命令" class="headerlink" title="退出登录命令"></a>退出登录命令</h4><p># logout</p>
<h2 id="文本编辑器Vim"><a href="#文本编辑器Vim" class="headerlink" title="文本编辑器Vim"></a>文本编辑器Vim</h2><h3 id="Vim常用操作"><a href="#Vim常用操作" class="headerlink" title="Vim常用操作"></a>Vim常用操作</h3><h4 id="插入命令"><a href="#插入命令" class="headerlink" title="插入命令"></a>插入命令</h4><table>
<thead>
<tr>
<th align="center">命令</th>
<th align="left">作用</th>
</tr>
</thead>
<tbody><tr>
<td align="center">a</td>
<td align="left">在光标所在字符后插入</td>
</tr>
<tr>
<td align="center">A</td>
<td align="left">在光标所在行尾插入</td>
</tr>
<tr>
<td align="center">i</td>
<td align="left">在光标所在字符前插入</td>
</tr>
<tr>
<td align="center">I</td>
<td align="left">在光标所在行行首插入</td>
</tr>
<tr>
<td align="center">o</td>
<td align="left">在光标下插入新行</td>
</tr>
<tr>
<td align="center">O</td>
<td align="left">在光标上插入新行</td>
</tr>
</tbody></table>
<h4 id="定位命令"><a href="#定位命令" class="headerlink" title="定位命令"></a>定位命令</h4><table>
<thead>
<tr>
<th align="center">命令</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><code>: set nu</code></td>
<td>设置行号</td>
</tr>
<tr>
<td align="center"><code>: set nonu</code></td>
<td>取消行号</td>
</tr>
<tr>
<td align="center"><code>gg</code></td>
<td>到第一行</td>
</tr>
<tr>
<td align="center"><code>G</code></td>
<td>到最后一行</td>
</tr>
<tr>
<td align="center"><code>nG</code></td>
<td>到第n行</td>
</tr>
<tr>
<td align="center"><code>n&lt;space&gt;</code></td>
<td>n表示数字, 按下数字而后按空格(不用同时, 先后顺序), 光标会右移n格.</td>
</tr>
<tr>
<td align="center"><code>n&lt;enter&gt;</code></td>
<td>n为数字, 输入数字再按回车, 光标向下移n行.</td>
</tr>
<tr>
<td align="center"><code>: n</code></td>
<td>到第n行</td>
</tr>
<tr>
<td align="center"><code>$</code></td>
<td>移至行尾</td>
</tr>
<tr>
<td align="center"><code>0</code></td>
<td>移至行首</td>
</tr>
<tr>
<td align="center"><code>Ctrl + f</code></td>
<td>屏幕向下翻动一页, 相当于<code>Page Down</code>按键</td>
</tr>
<tr>
<td align="center"><code>Ctrl + b</code></td>
<td>屏幕向上翻动一页, 相当于<code>Page Up</code>按键</td>
</tr>
</tbody></table>
<h4 id="删除复制和粘贴命令"><a href="#删除复制和粘贴命令" class="headerlink" title="删除复制和粘贴命令"></a>删除复制和粘贴命令</h4><table>
<thead>
<tr>
<th align="left">命令</th>
<th align="left">作用</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>x</code>/<code>X</code></td>
<td align="left">在当前刚标处进行删除操作. <code>x</code>为向后删除(删除光标所在字符), <code>X</code>为向前删除(删除光标所在前一个字符).</td>
</tr>
<tr>
<td align="left"><code>n</code> <code>x</code>/<code>X</code></td>
<td align="left"><code>n</code>为数字, 删除规则与上述一致, 不过删除数量为n</td>
</tr>
<tr>
<td align="left"><code>D</code></td>
<td align="left">删除光标所在处到行尾内容</td>
</tr>
<tr>
<td align="left"><code>:n1,n2d</code></td>
<td align="left">删除指定范围的行</td>
</tr>
<tr>
<td align="left"><code>dd</code></td>
<td align="left">删除/剪切光标所在整行.</td>
</tr>
<tr>
<td align="left"><code>ndd</code></td>
<td align="left">删除/剪切光标所在向下n行(包括光标所在行总共n行).</td>
</tr>
<tr>
<td align="left"><code>d1G</code></td>
<td align="left">删除光标所在到第一行所以数据.(包括光标行)</td>
</tr>
<tr>
<td align="left"><code>dG</code></td>
<td align="left">删除光标所在到最后一行所以数据.(包括光标行)</td>
</tr>
<tr>
<td align="left"><code>d$</code></td>
<td align="left">删除光标所在到该行最后一个字符(包括光标所在字符)</td>
</tr>
<tr>
<td align="left"><code>d0</code></td>
<td align="left">删除光标所在到该行第一个字符.(不包括光标所在)</td>
</tr>
<tr>
<td align="left"><code>yy</code></td>
<td align="left">复制光标所在行.</td>
</tr>
<tr>
<td align="left"><code>nyy</code></td>
<td align="left">复制光标所在向下n行. (包括该行)</td>
</tr>
<tr>
<td align="left"><code>y1G</code></td>
<td align="left">复制光标所在到第一行所以数据.(包括光标行)</td>
</tr>
<tr>
<td align="left"><code>yG</code></td>
<td align="left">复制光标所在到最后一行所以数据.(包括光标行)</td>
</tr>
<tr>
<td align="left"><code>y0</code></td>
<td align="left">复制光标所在到该行第一个字符.(不包括光标所在)</td>
</tr>
<tr>
<td align="left"><code>y$</code></td>
<td align="left">复制光标所在到该行最后一个字符(包括光标所在字符)</td>
</tr>
<tr>
<td align="left"><code>p</code>/<code>P</code></td>
<td align="left"><code>p</code>为将复制内容粘贴到光标所在的下一行. <code>P</code>为将复制内容粘贴到光标所在上一行.</td>
</tr>
<tr>
<td align="left"><code>J</code></td>
<td align="left">将光标所在行与下一行的数据结合成为一行.</td>
</tr>
<tr>
<td align="left"><code>u</code></td>
<td align="left">恢复前一个动作. 撤销.</td>
</tr>
<tr>
<td align="left"><code>Ctrl</code> + <code>r</code></td>
<td align="left">重复上一个动作.</td>
</tr>
<tr>
<td align="left"><code>.</code></td>
<td align="left">重复上一个动作.</td>
</tr>
<tr>
<td align="left"><code>:n1, n2 co n3</code></td>
<td align="left">将n1与n2行之间的内容复制到第n3行(之后).</td>
</tr>
<tr>
<td align="left"><code>:n1, n2 m n3</code></td>
<td align="left">将n1与n2行之间的内容剪切到第n3行(之后).</td>
</tr>
</tbody></table>
<h4 id="替换和取消命令"><a href="#替换和取消命令" class="headerlink" title="替换和取消命令"></a>替换和取消命令</h4><table>
<thead>
<tr>
<th align="center">命令</th>
<th align="left">作用</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><code>r</code></td>
<td align="left">取代光标所在处字符</td>
</tr>
<tr>
<td align="center"><code>R</code></td>
<td align="left">从光标所在处开始替换字符,按Esc结束</td>
</tr>
<tr>
<td align="center"><code>u</code></td>
<td align="left">取消上一步操作</td>
</tr>
</tbody></table>
<h4 id="搜索和搜索替换命令"><a href="#搜索和搜索替换命令" class="headerlink" title="搜索和搜索替换命令"></a>搜索和搜索替换命令</h4><table>
<thead>
<tr>
<th align="left">命令</th>
<th align="left">作用</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>/word</code></td>
<td align="left">从光标所在之下搜索word字符串<br>搜索时忽略大小写 :set ic</td>
</tr>
<tr>
<td align="left"><code>?word</code></td>
<td align="left">从光标所在之上搜索word字符串</td>
</tr>
<tr>
<td align="left"><code>n</code></td>
<td align="left">重复前一个搜索动作. 对于<code>/word</code>即为向下查找匹配. <code>?word</code>为向上查找匹配.</td>
</tr>
<tr>
<td align="left"><code>N</code></td>
<td align="left">与<code>n</code>相反</td>
</tr>
<tr>
<td align="left"><code>:n1, n2s/word1/word2/g</code></td>
<td align="left">在n1到n2之间查找word1, 并将其替换为word2.</td>
</tr>
<tr>
<td align="left"><code>:1,$s/word1/word2/g</code></td>
<td align="left">在全文查找word1替换成word2</td>
</tr>
<tr>
<td align="left"><code>:1,$s/word1/word2/gc</code></td>
<td align="left">在全文查找word1替换成word2并在替换前向用户确定.</td>
</tr>
<tr>
<td align="left"><code>:s/world1/word2</code></td>
<td align="left">将光标所在行的第一个word1替换成word2</td>
</tr>
<tr>
<td align="left"><code>:s/word1/word2/g</code></td>
<td align="left">将光标所在整行的word1换成word2</td>
</tr>
</tbody></table>
<p>搜索后找到的字符串会被高亮显示, 恢复的方式为<code>:noh</code>即可.</p>
<h4 id="保存和退出命令"><a href="#保存和退出命令" class="headerlink" title="保存和退出命令"></a>保存和退出命令</h4><table>
<thead>
<tr>
<th align="center">命令</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><code>:w</code></td>
<td>保存修改</td>
</tr>
<tr>
<td align="center"><code>:w!</code></td>
<td>强制保存(是否真正能够保存取决于用户权限)</td>
</tr>
<tr>
<td align="center"><code>:w new_filename</code></td>
<td>另存为指定文件</td>
</tr>
<tr>
<td align="center"><code>:n1, n2, w filename</code></td>
<td>将n1到n2之间内容另存为</td>
</tr>
<tr>
<td align="center"><code>:r filename</code></td>
<td>打开文档将打开的文档内容添加到当前光标所在行后.</td>
</tr>
<tr>
<td align="center"><code>:wq</code></td>
<td>保存修改并退出</td>
</tr>
<tr>
<td align="center"><code>ZZ</code></td>
<td>快捷键,保存修改并退出</td>
</tr>
<tr>
<td align="center"><code>:q</code></td>
<td>退出</td>
</tr>
<tr>
<td align="center"><code>:q!</code></td>
<td>不保存修改退出</td>
</tr>
<tr>
<td align="center"><code>:wq</code></td>
<td>保存并退出</td>
</tr>
<tr>
<td align="center"><code>:wq!</code></td>
<td>保存并退出(文件所有者及root可使用)</td>
</tr>
<tr>
<td align="center"><code>:set nu</code></td>
<td>设置显示行号</td>
</tr>
<tr>
<td align="center"><code>:set nonu</code></td>
<td>设置取消行号</td>
</tr>
</tbody></table>
<h3 id="vim暂存机制"><a href="#vim暂存机制" class="headerlink" title="vim暂存机制"></a>vim暂存机制</h3><p>很多编辑软件都有恢复功能 ，即当系统因为某些原因而导致编辑中的文件突然退出．可以通过暂存的文件进行恢复．vim当然也存在这样一个机制．当我们使用vim打开一个文件时，在文件所在目录会自动创建一个.filename.swap文件．对原文件的操作会被记录在其中．当突然退出时，.filename.swap文件会帮我们存储下对文件的修改．当我们再次打开是可以选择是否通过该文件恢复对原文件的修改．</p>
<p>注意：当vim默认设置文件中存在如下字段时就不会有暂存机制．</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set noswapfile</span><br></pre></td></tr></table></figure>

<p>配置文件一般在<code>~/.vimrc</code>．</p>
<p>暂存机制主要适用于两种情况．</p>
<ol>
<li>在编辑文件过程中vim意外终止(在打开文件时.filename.swap文件已经被自动创建, 当正常退出时会自动删除).</li>
<li>多人编辑同一个文件.(在你之前有人已经打开了该文件正在编辑.)</li>
</ol>
<p>当存在暂存文件已经存在而你右对原文件进行操作而异常退出时会生成第二个暂存文件, 以此类推.</p>
<p>当暂存文件存在时打开文件就会提示响应的操作,解释如下:</p>
<table>
<thead>
<tr>
<th align="left"><code>[O]pen Read-Only</code></th>
<th align="left">只读模式打开.</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>[E]dit anyway</code></td>
<td align="left">正常方式打开, 不载入暂存文件.</td>
</tr>
<tr>
<td align="left"><code>[R]ecover</code></td>
<td align="left">加载暂存文件. 不过不会自动删除, 完成后需要自己删除.</td>
</tr>
<tr>
<td align="left"><code>[Q]uit</code></td>
<td align="left">退出</td>
</tr>
<tr>
<td align="left"><code>[D]elete it</code></td>
<td align="left">不载入暂存文件直接将暂存文件删除</td>
</tr>
<tr>
<td align="left"><code>A(bout)</code></td>
<td align="left">类似与退出.</td>
</tr>
</tbody></table>
<p>在较新版本的vim中该功能似乎以及取消了(默认<code>set noswapfile</code>), 通过实验发现确实存在一些问题.所以尽量不要使用为好.</p>
<h3 id="vim高级操作"><a href="#vim高级操作" class="headerlink" title="vim高级操作"></a>vim高级操作</h3><h4 id="vim区块选择"><a href="#vim区块选择" class="headerlink" title="vim区块选择"></a>vim区块选择</h4><p>区块选择用来操作一个区域. 下面是区块选择键含义.</p>
<table>
<thead>
<tr>
<th align="left"><code>v</code></th>
<th align="left">进行区块选择, 按照进过字符选择. 即按<code>v</code>后,操作光标移动, 将会将移动范围内的内容反白标注选中.</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>V</code></td>
<td align="left">与上面一个类似, 不过是按照行来选取.</td>
</tr>
<tr>
<td align="left"><code>Ctrl</code>+<code>v</code></td>
<td align="left">区块选则, 按照长方形区域选取.即按下<code>Ctrl</code>+<code>v</code>的位置为一个顶点,操纵光标选择第二个顶点. 选择这两个顶点之间的区域. 需要注意的是, 如果复制矩形区域进行粘贴操纵, 赞帖也是按照矩形区域进行的.</td>
</tr>
<tr>
<td align="left"><code>y</code></td>
<td align="left">复制选中区域</td>
</tr>
<tr>
<td align="left"><code>d</code></td>
<td align="left">复制选中区域</td>
</tr>
</tbody></table>
<p>区块选则在实际编程操作中使用是否有用. 区块选择后也可以进入编辑模式进行编辑, 例如将多行代码注释掉(或相反操作)只需要将对于的区块选择, 按<code>I</code>进入插入模式, 添加注释, 按<code>Esc</code>退出即可. 过程中按下<code>Esc</code>会过一会儿才出现, 别着急(一般第一行直接出现).</p>
<h4 id="多档案编辑"><a href="#多档案编辑" class="headerlink" title="多档案编辑"></a>多档案编辑</h4><p>我们可以一次打开多个文件进行一起操作. 实现分别打开无法完成的操作,如将一个文件的一部分复制到另一个文件中. 打开多文件方式为vim后面接多个文件名.</p>
<p>例:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ vim file1 file2</span><br></pre></td></tr></table></figure>

<p>多文档编辑操作:</p>
<table>
<thead>
<tr>
<th align="left"><code>:n</code></th>
<th align="left">编辑下一个文件</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>:N</code></td>
<td align="left">编辑上一个文件</td>
</tr>
<tr>
<td align="left"><code>:files</code></td>
<td align="left">列出当前vim开启的所以文件.</td>
</tr>
</tbody></table>
<h4 id="多窗口编辑"><a href="#多窗口编辑" class="headerlink" title="多窗口编辑"></a>多窗口编辑</h4><p>上面的操作需要使用指令进行切换而且无法同时查看两个文件, 这对于编程时是十分不方便的, 要能够保存上面多文档的便捷和查看多文件的舒适多窗口才是王道.</p>
<p>多窗口操作:</p>
<table>
<thead>
<tr>
<th align="left"><code>:sp filename</code></th>
<th align="left">开启一个新的窗口, 如果参数filename则在新窗口打开对于文件,否则打开当前文件.</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>[Ctrl]</code>+<code>w</code>+<code>j</code>/下箭头</td>
<td align="left">按键操作是先<code>[Ctrl]</code>+<code>w</code>, 而后松开按第三个键. 切换到下一个窗口中.</td>
</tr>
<tr>
<td align="left"><code>[Ctrl]</code>+<code>w</code>+<code>k</code>/上箭头</td>
<td align="left">切换到上一个窗口中.</td>
</tr>
<tr>
<td align="left"><code>[Ctrl]</code>+<code>w</code>+<code>q</code></td>
<td align="left">退出当前窗口. 可以按照这个操作,也可以直接在当前窗口<code>:q</code></td>
</tr>
</tbody></table>
<h4 id="操作目录"><a href="#操作目录" class="headerlink" title="操作目录"></a>操作目录</h4><table>
<thead>
<tr>
<th align="left"><code>:Ex</code></th>
<th align="left">在当前窗口开启目录浏览器.</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>:Sex</code></td>
<td align="left">新打开一个窗口开启目录浏览器.</td>
</tr>
</tbody></table>
<h2 id="Linux软件安装"><a href="#Linux软件安装" class="headerlink" title="Linux软件安装"></a>Linux软件安装</h2><h3 id="编译安装方式"><a href="#编译安装方式" class="headerlink" title="编译安装方式"></a>编译安装方式</h3><p>(小贴士:使用编译安装前,需要先建立编译环境,使用以下命令建立基本的编译环境:<br>sudo apt-get install build-essential)<br>在 linux 的世界,有很多软件只提供了源代码给你,需要你自己进行编译安装,一般开源的软件都会使用 tar.gz 压缩档来进行发布,当然也有其他的形式。拿到源代码的压缩文档<br>把它解压到/tmp 目录下,进入/tmp/软件目录,然后执行以下三个命令:</p>
<p><strong>1）解压tar.gz包</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf nginx-1.8.1.tar.gz -C /home/Desktop  # 将软件包名.tar.gz解压到指定的目录下</span><br></pre></td></tr></table></figure>

<p><strong>2）进入解压后的文件目录下</strong></p>
<p>   <strong>执行“./configure”命令为编译做好准备；</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd nginx</span><br><span class="line">sudo ./configure --prefix=/opt/nginx  # 表示安装到/opt目录下</span><br></pre></td></tr></table></figure>

<p><strong>3）执行“make”命令进行软件编译；</strong></p>
<p><strong>4）执行“make install”完成安装；</strong></p>
<p><strong>5）执行“make clean”删除安装时产生的临时文件。</strong></p>
<p>在 ./configure 时可能会提示说有某某软件找不到,例如提示“ libgnome”这个开<br>发包找不到,那就把 libgnome 这个关键词 copy,然后打开新立得软件管理器,在里面<br>搜索 libgnome 这个关键词,就会找到 libgnome 相关的项目,把前面有个 ubuntu 符号的 libgnome 包(注意:同样需要安装 dev 包,但可以不装 doc 包)全部安装,通过这个方法把./configure 过程中缺失的开发包都全部装上就 OK 了,第一步能顺利通过,第二 ,三步基本问题不大。</p>
<p>源码包的卸载：不需要卸载命令,直接删除安装目录即可。不会遗留任何垃圾文件</p>
<p>以上就是一般初学 ubuntu 的朋友必须掌握的编译安装的基本方法!</p>
<h4 id="apt-get-安装方法"><a href="#apt-get-安装方法" class="headerlink" title="apt-get 安装方法"></a>apt-get 安装方法</h4><p>ubuntu 默认的软件管理系统是apt。apt有很多国内软件源，推荐使用淘宝。</p>
<p>apt-get 的基本软件安装命令是:</p>
<p><code>sudo apt-get install 软件名</code></p>
<h4 id="deb-包的安装方式"><a href="#deb-包的安装方式" class="headerlink" title="deb 包的安装方式"></a><strong>deb 包的安装方式</strong></h4><p>deb 是 debian 系 Linux 的包管理方式，ubuntu 是属于 debian 系的 Linux 发行版，所以默认支持这种软件安装方式。<br>当下载到一个 deb 格式的软件后,在终端输入这个命令就能安装：</p>
<p><code>sudo dpkg -i \**软件名\**.deb</code></p>
<h3 id="二进制编译或者脚本安装方式"><a href="#二进制编译或者脚本安装方式" class="headerlink" title="二进制编译或者脚本安装方式"></a>二进制编译或者脚本安装方式</h3><p>github上一般都会提供二进制源码或者脚本安装方式。<br>这类软件,你会在软件安装目录下发现类似后缀名的文件，如： .sh .py .run 等等,有的甚至连后缀名都没有,直接只有一个 INSTALL 文件。或者是一个其他什么的可执行文件。<br>对于这种软件,可尝试以下几种方式安装：</p>
<p><em>在软件目录下输入: ./软件名*</em> **
或者 : sh 软件名.sh<br>或者: python 软件名.py**</p>
<h3 id="rpm-包的安装方式"><a href="#rpm-包的安装方式" class="headerlink" title="rpm 包的安装方式"></a>rpm 包的安装方式</h3><p>rpm 包是 deb 包外最常见的一种包管理方式,但 ubuntu 同样可以使用 rpm 的软件资源,首先我们需要安装一个 rpm 转 deb 的软件<br><code>sudo apt-get install alien</code><br>然后就可以对 rpm 格式的软件转换成 deb 格式了:<br><code>alien -d *.rpm</code><br>然后就可以用 deb 的安装方式进行软件安装<br>也可以不需转换而直接对 rpm 包进行安装:<br>alien -i *.rpm<br>更多的 alien 使用方法可以用-h 参数查看相应说明文档</p>
<h2 id="用户和用户组管理"><a href="#用户和用户组管理" class="headerlink" title="用户和用户组管理"></a>用户和用户组管理</h2><blockquote>
<p>用户管理简介</p>
</blockquote>
<ul>
<li>越是对服务器安全性要求高的服务器,越需要建立合理的用户权限等级制度和<br>服务器操作规范。</li>
<li>在Linux中主要是通过用户配置文件来查看和修改用户信息</li>
</ul>
<h3 id="用户配置文件"><a href="#用户配置文件" class="headerlink" title="用户配置文件"></a>用户配置文件</h3><h4 id="用户信息文件-etc-passwd"><a href="#用户信息文件-etc-passwd" class="headerlink" title="用户信息文件/etc/passwd"></a>用户信息文件/etc/passwd</h4><ul>
<li>第1字段:用户名称</li>
<li>第2字段:密码标志</li>
<li>第3字段:UID(用户ID)<ul>
<li>0:                     超级用户</li>
<li>1-499:             系统用户(伪用户)</li>
<li>500-65535:    普通用户 </li>
</ul>
</li>
<li>第4字段:GID(用户初始组ID)</li>
<li>第5字段:用户说明</li>
<li>第6字段:家目录<ul>
<li>普通用户:/home/用户名/</li>
<li>超级用户:/root/</li>
</ul>
</li>
<li>第7字段:登录之后的Shell</li>
</ul>
<h5 id="初始组和附加组"><a href="#初始组和附加组" class="headerlink" title="初始组和附加组"></a>初始组和附加组</h5><ul>
<li>初始组:就是指用户一登录就立刻拥有这个用户组的相关权限,每个用户的初始组<br>只能有一个,一般就是和这个用户的用户名相同的组名作为这个用户的初始组。</li>
<li>附加组:指用户可以加入多个其他的用户组,并拥有这些组的权限,附加组可以有<br>多个。</li>
</ul>
<h5 id="Shell是什么"><a href="#Shell是什么" class="headerlink" title="Shell是什么"></a>Shell是什么</h5><ul>
<li>Shell就是Linux的命令解释器。</li>
<li>在/etc/passwd当中,除了标准Shell是/bin/bash之外,还可以写如/sbin/nologin,<br>/usr/bin/passwd等。</li>
</ul>
<h4 id="影子文件-etc-shadow"><a href="#影子文件-etc-shadow" class="headerlink" title="影子文件/etc/shadow"></a>影子文件/etc/shadow</h4><ul>
<li>第1字段:用户名</li>
<li>第2字段:加密密码<ul>
<li>加密算法升级为SHA512散列加密算法</li>
<li>如果密码位是“!!”或“*”代表没有密码,不能登<br>录</li>
</ul>
</li>
<li>第3字段:密码最后一次修改日期<br>使用1970年1月1日作为标准时间,每过一天时间戳加1</li>
<li>第4字段:两次密码的修改间隔时间(和第3字段相比)</li>
<li>第5字段:密码有效期(和第3字段相比)</li>
<li>第6字段:密码修改到期前的警告天数(和第5字段相比)</li>
<li>第7字段:密码过期后的宽限天数(和第5字段相比)<ul>
<li>0:代表密码过期后立即失效</li>
<li>-1:则代表密码永远不会失效。</li>
</ul>
</li>
<li>第8字段:账号失效时间<ul>
<li>要用时间戳表示</li>
</ul>
</li>
<li>第9字段:保留</li>
</ul>
<h5 id="时间戳换算"><a href="#时间戳换算" class="headerlink" title="时间戳换算"></a>时间戳换算</h5><ul>
<li>把时间戳换算为日期<br>date -d “1970-01-01 16066 days”</li>
<li>把日期换算为时间戳<br>echo $(($(date –date=”2014/01/06” +%s)/86400+1))</li>
</ul>
<h4 id="组信息文件-etc-group和组密码文件-etc-gshadow"><a href="#组信息文件-etc-group和组密码文件-etc-gshadow" class="headerlink" title="组信息文件/etc/group和组密码文件/etc/gshadow"></a>组信息文件/etc/group和组密码文件/etc/gshadow</h4><h4 id="组信息文件-etc-group"><a href="#组信息文件-etc-group" class="headerlink" title="组信息文件/etc/group"></a>组信息文件/etc/group</h4><ul>
<li>第一字段:组名</li>
<li>第二字段:组密码标志</li>
<li>第三字段:GID</li>
<li>第四字段:组中附加用户</li>
</ul>
<h5 id="组密码文件-etc-gshadow"><a href="#组密码文件-etc-gshadow" class="headerlink" title="组密码文件/etc/gshadow"></a>组密码文件/etc/gshadow</h5><ul>
<li>第一字段:组名</li>
<li>第二字段:组密码</li>
<li>第三字段:组管理员用户名</li>
<li>第四字段:组中附加用户</li>
</ul>
<h3 id="用户管理相关文件"><a href="#用户管理相关文件" class="headerlink" title="用户管理相关文件"></a>用户管理相关文件</h3><h4 id="用户的家目录"><a href="#用户的家目录" class="headerlink" title="用户的家目录"></a>用户的家目录</h4><ul>
<li>普通用户：/home/用户名/,所有者和所属组都是此用户,权限是700</li>
<li>超级用户:/root/,所有者和所属组都是root用户,权限是550</li>
</ul>
<h4 id="用户的邮箱"><a href="#用户的邮箱" class="headerlink" title="用户的邮箱"></a>用户的邮箱</h4><ul>
<li>/var/spool/mail/用户名/</li>
</ul>
<h4 id="用户模板目录"><a href="#用户模板目录" class="headerlink" title="用户模板目录"></a>用户模板目录</h4><ul>
<li>/etc/skel/</li>
</ul>
<h3 id="用户管理命令-1"><a href="#用户管理命令-1" class="headerlink" title="用户管理命令"></a>用户管理命令</h3><h4 id="用户添加命令useradd"><a href="#用户添加命令useradd" class="headerlink" title="用户添加命令useradd"></a>用户添加命令useradd</h4><h5 id="useradd命令格式"><a href="#useradd命令格式" class="headerlink" title="useradd命令格式"></a>useradd命令格式</h5><p>[root@localhost ~]#useradd [选项] 用户名<br>选项:<br>-u UID:           手工指定用户的UID号<br>-d 家目录:      手工指定用户的家目录<br>-c 用户说明:   手工指定用户的说明<br>-g 组名:           手工指定用户的初始组<br>-G 组名:          指定用户的附加组<br>-s shell:          手工指定用户的登录shell。默认是/bin/bash</p>
<h5 id="添加默认用户"><a href="#添加默认用户" class="headerlink" title="添加默认用户"></a>添加默认用户</h5><p>[root@localhost ~]# useradd lamp<br>[root@localhost ~]# grep “lamp” /etc/passwd<br>[root@localhost ~]# grep “lamp” /etc/shadow<br>[root@localhost ~]# grep “lamp” /etc/group<br>[root@localhost ~]# grep “lamp” /etc/gshadow<br>[root@localhost ~]# ll -d /home/lamp/<br>[root@localhost ~]# ll /var/spool/mail/lamp</p>
<h5 id="指定选项添加用户"><a href="#指定选项添加用户" class="headerlink" title="指定选项添加用户"></a>指定选项添加用户</h5><ul>
<li>groupadd lamp1</li>
<li>useradd -u 550 -g lamp1 -G root -d /home/lamp1 <br>-c “test user” -s /bin/bash lamp1</li>
</ul>
<h5 id="用户默认值文件"><a href="#用户默认值文件" class="headerlink" title="用户默认值文件"></a>用户默认值文件</h5><ul>
<li><p>/etc/default/useradd</p>
<ul>
<li>GROUP=100           #用户默认组</li>
<li>HOME=/home        #用户家目录</li>
<li>NACTIVE=-1             #密码过期宽限天数( 7 )</li>
<li>EXPIRE=                    #密码失效时间( 8 )</li>
<li>SHELL=/bin/bash    # 默认 shell</li>
<li>SKEL=/etc/skel         #模板目录</li>
<li>CREATE_MAIL_SPOOL=yes   #是否建立邮箱</li>
</ul>
</li>
<li><p>/etc/login.defs</p>
<ul>
<li>PASS_MAX_DAYS  99999     # 密码有效期( 5 )</li>
<li>PASS_MIN_DAYS  0               # 密码修改间隔( 4 )</li>
<li>PASS_MIN_LEN  5                # 密码最小 5 位( PAM )</li>
<li>PASS_WARN_AGE  7            # 密码到期警告( 6 )</li>
<li>UID_MIN    500                     # 最小和最大 UID 范围<br>GID_MAX   60000</li>
<li>ENCRYPT_METHOD  SHA512   #加密模式</li>
</ul>
</li>
</ul>
<h4 id="修改用户密码passwd"><a href="#修改用户密码passwd" class="headerlink" title="修改用户密码passwd"></a>修改用户密码passwd</h4><h5 id="passwd命令格式"><a href="#passwd命令格式" class="headerlink" title="passwd命令格式"></a>passwd命令格式</h5><p>[root@localhost ~]#passwd [选项] 用户名<br>选项:<br>-S           查询用户密码的密码状态。仅root用户可用。<br>-l            暂时锁定用户。仅root用户可用<br>-u           解锁用户。仅root用户可用<br>–stdin   可以通过管道符输出的数据作为用户的密码。</p>
<h5 id="查看密码状态"><a href="#查看密码状态" class="headerlink" title="查看密码状态"></a>查看密码状态</h5><p>[root@localhost ~]# passwd -S lamp<br>lamp PS 2013-01-06 0 99999 7 -1</p>
<p>#用户名 密码设定时间( 2013-01-06 ) 密码修改间隔时间( 0 )</p>
<p>#密码有效期( 99999 ) 警告时间( 7 ) 密码不失效( -1 )</p>
<h5 id="锁定用户和解锁用户"><a href="#锁定用户和解锁用户" class="headerlink" title="锁定用户和解锁用户"></a>锁定用户和解锁用户</h5><p>[root@localhost ~]# passwd -l lamp<br>[root@localhost ~]# passwd -u lamp</p>
<h5 id="使用字符串作为用户的密码"><a href="#使用字符串作为用户的密码" class="headerlink" title="使用字符串作为用户的密码"></a>使用字符串作为用户的密码</h5><p>[root@localhost ~]# echo “123” | passwd –stdin lamp</p>
<h4 id="修改用户信息usermod和修改用户密码状态chage"><a href="#修改用户信息usermod和修改用户密码状态chage" class="headerlink" title="修改用户信息usermod和修改用户密码状态chage"></a>修改用户信息usermod和修改用户密码状态chage</h4><h5 id="修改用户信息usermod"><a href="#修改用户信息usermod" class="headerlink" title="修改用户信息usermod"></a>修改用户信息usermod</h5><p>[root@localhost ~]#usermod [选项] 用户名<br>选项:<br>-u UID:              修改用户的UID号<br>-c 用户说明:      修改用户的说明信息<br>-G 组名:             修改用户的附加组<br>-L:                       临时锁定用户(Lock)<br>-U:                      解锁用户锁定(Unlock)</p>
<ul>
<li><p>[root@localhost ~]# usermod -c “test user” lamp<br>修改用户的说明</p>
</li>
<li><p>[root@localhost ~]# usermod -G root lamp<br>把 lamp 用户加入 root 组</p>
</li>
<li><p>[root@localhost ~]# usermod -L lamp<br>锁定用户</p>
</li>
<li><p>[root@localhost ~]# usermod -U lamp<br>解锁用户</p>
</li>
</ul>
<h5 id="修改用户密码状态chage"><a href="#修改用户密码状态chage" class="headerlink" title="修改用户密码状态chage"></a>修改用户密码状态chage</h5><p>[root@localhost ~]#chage [选项] 用户名<br>选项:<br>-l:                     列出用户的详细密码状态<br>-d 日期:           修改密码最后一次更改日期(shadow3字段)<br>-m 天数:          两次密码修改间隔(4字段)<br>-M 天数:          密码有效期(5字段)<br>-W 天数:          密码过期前警告天数(6字段)<br>-I 天数:            密码过后宽限天数(7字段)<br>-E 日期:           账号失效时间(8字段)</p>
<ul>
<li>[root@localhost ~]# chage -d 0 lamp</li>
</ul>
<p>#这个命令其实是把密码修改日期归 0 了( shadow 第 3 字段)</p>
<p>#这样用户一登陆就要修改密码</p>
<h4 id="删除用户userdel和用户切换命令su"><a href="#删除用户userdel和用户切换命令su" class="headerlink" title="删除用户userdel和用户切换命令su"></a>删除用户userdel和用户切换命令su</h4><h5 id="删除用户userdel"><a href="#删除用户userdel" class="headerlink" title="删除用户userdel"></a>删除用户userdel</h5><p>[root@localhost ~]# userdel [-r] 用户名<br>选项:<br>       -r      删除用户的同时删除用户家目录</p>
<h5 id="手工删除用户"><a href="#手工删除用户" class="headerlink" title="手工删除用户"></a>手工删除用户</h5><p>[root@localhost ~]# vi /etc/passwd<br>[root@localhost ~]# vi /etc/shadow<br>[root@localhost ~]# vi /etc/group<br>[root@localhost ~]# vi /etc/gshadow<br>[root@localhost ~]# rm -rf /var/spool/mail/lamp<br>[root@localhost ~]# rm -rf /home/lamp/</p>
<h5 id="查看用户ID"><a href="#查看用户ID" class="headerlink" title="查看用户ID"></a>查看用户ID</h5><p>[root@localhost ~]# id 用户名</p>
<h5 id="切换用户身份su"><a href="#切换用户身份su" class="headerlink" title="切换用户身份su"></a>切换用户身份su</h5><p>[root@localhost ~]# su [选项] 用户名<br>选项:</p>
<p>​      -:                 选项只使用“-”代表连带用户的环境 变量一起切换<br>​      -c 命令:      仅执行一次命令,而不切换用户身份</p>
<ul>
<li>[lamp@localhost ~]$ su – root<br>切换成 root</li>
</ul>
<ul>
<li>[lamp@localhost ~]$ su - root -c “useradd user3”<br>不切换成 root ,但是执行 useradd 命令添加 user1 用户</li>
</ul>
<h3 id="用户组管理命令"><a href="#用户组管理命令" class="headerlink" title="用户组管理命令"></a>用户组管理命令</h3><h4 id="groupmod"><a href="#groupmod" class="headerlink" title="groupmod"></a>groupmod</h4><p>用法：groupmod [选项] 组</p>
<p>选项:<br>  -g, –gid GID                 将组 ID 改为 GID<br>  -h, –help                    显示此帮助信息并推出<br>  -n, –new-name NEW_GROUP      改名为 NEW_GROUP<br>  -o, –non-unique              允许使用重复的 GID<br>  -p, –password PASSWORD    将密码更改为(加密过的) PASSWORD<br>  -R, –root CHROOT_DIR         chroot 到的目录</p>
<h4 id="删除用户组"><a href="#删除用户组" class="headerlink" title="删除用户组"></a>删除用户组</h4><p>groupdel [用户组名]</p>
<h4 id="gpasswd"><a href="#gpasswd" class="headerlink" title="gpasswd"></a>gpasswd</h4><p>用法：gpasswd [选项] 组</p>
<p>选项：<br>  -a, –add USER                向组 GROUP 中添加用户 USER<br>  -d, –delete USER             从组 GROUP 中添加或删除用户<br>  -h, –help                    显示此帮助信息并推出<br>  -Q, –root CHROOT_DIR         要 chroot 进的目录<br>  -r, –remove-password         移除组 GROUP 的密码<br>  -R, –restrict                向其成员限制访问组 GROUP<br>  -M, –members USER,…        设置组 GROUP 的成员列表<br>  -A, –administrators ADMIN,…    设置组的管理员列表</p>
<h2 id="权限管理"><a href="#权限管理" class="headerlink" title="权限管理"></a>权限管理</h2><h3 id="ACL权限"><a href="#ACL权限" class="headerlink" title="ACL权限"></a>ACL权限</h3><h4 id="ACL权限简介与开启"><a href="#ACL权限简介与开启" class="headerlink" title="ACL权限简介与开启"></a>ACL权限简介与开启</h4><h5 id="简介："><a href="#简介：" class="headerlink" title="简介："></a>简介：</h5><p>根目录中有一个 /project 目录，这是班级的项目目录。班级中的每个学员都可以访问和修改这个目录，老师也需要对这个目录拥有访问和修改权限，其他班级的学员当然不能访问这个目录。需要怎么规划这个目录的权限呢？应该这样：老师使用 root 用户，作为这个目录的属主，权限为 rwx；班级所有的学员都加入 tgroup 组，使 tgroup 组作为 /project 目录的属组，权限是 rwx；其他人的权限设定为 0。这样这个目录的权限就可以符合我们的项目开发要求了。</p>
<p>有一天，班里来了一位试听的学员 st，她必须能够访问 /project 目录，所以必须对这个目录拥有 r 和 x 权限；但是她又没有学习过以前的课程，所以不能赋予她 w 权限，怕她改错了目录中的内容，所以学员 st 的权限就是 r-x。可是如何分配她的身份呢？变为属主？当然不行，要不 root 该放哪里？加入 tgroup 组？也不行，因为 tgroup 组的权限是 rwx，而我们要求学员 st 的权限是 r-x。如果把其他人的权限改为 r-x 呢？这样一来，其他班级的所有学员都可以访问 /project 目录了。</p>
<p>当出现这种情况时，普通权限中的三种身份就不够用了。ACL 权限就是为了解决这个问题的。在使用 ACL 权限给用户 st 陚予权限时，st 既不是 /project 目录的属主，也不是属组，仅仅赋予用户 st 针对此目录的 r-x 权限。这有些类似于 Windows 系统中分配权限的方式，单独指定用户并单独分配权限，这样就解决了用户身份不足的问题。</p>
<p>ACL是Access Control List（访问控制列表）的缩写，不过在Linux系统中，ACL用于设定用户针对文件的权限，而不是在交换路由器中用来控制数据访问的功能（类似于防火墙）</p>
<h5 id="开启："><a href="#开启：" class="headerlink" title="开启："></a>开启：</h5><ol>
<li><p>查看分区是否开启ACL权限<br>[root@hhh<del>]#df  -h  看一下根目录所在分区<br>[root@hhh</del>]#dumpe2fs -h [根目录所在分区]</p>
<p>​                       -h：仅显示超级块中的信息，而不显示磁盘块组的详细信息</p>
<p>查找：Default mount options 后面是否有ACL（一般分区都开启ACL）</p>
</li>
<li><p>如果没开启，则可以临时开启分区ACL权限<br>[root@hhh<del>]#mount -o remount ,acl 重新挂载根分区，并加入acl权限<br>或者：永久开启ACL权限<br>[root@hhh</del>]#vim /etc/fstab<br>查找到：UUID=c2ca6f57-b15c-43ea-bca0-f239083d8bd2 / ext4 default  1 1<br>在default后加上“，acl”<br>然后重新挂载文件系统#mount -o remount/ 或 重启动系统，使修改生效</p>
</li>
</ol>
<h4 id="查看与设定ACL权限"><a href="#查看与设定ACL权限" class="headerlink" title="查看与设定ACL权限"></a>查看与设定ACL权限</h4><h5 id="查看ACL命令"><a href="#查看ACL命令" class="headerlink" title="查看ACL命令"></a>查看ACL命令</h5><p><code>[root@localhost ~]# getfacle 文件名</code></p>
<p>#查看 acl 权限</p>
<h5 id="设定ACL权限的命令"><a href="#设定ACL权限的命令" class="headerlink" title="设定ACL权限的命令"></a>设定ACL权限的命令</h5><p><code>[root@localhost ~]# setfacl 选项 文件名</code><br>选项:<br>-m       设定ACL权限<br>            如果是给予用户 ACL 权限，则使用”u:用户名：权限”格式赋予<br>            如果是给予组 ACL 权限，则使用”g:组名：权限” 格式赋予；<br>-x         删除指定的ACL权限<br>-b         删除所有的ACL权限,只对目录生效，指目录中新建立的文件拥有此默认权限；<br>-d         设定默认ACL权限。<br>-k         删除默认ACL权限<br>-R        递归设定ACL权限。</p>
<h5 id="给用户和用户组设定ACL权限"><a href="#给用户和用户组设定ACL权限" class="headerlink" title="给用户和用户组设定ACL权限"></a>给用户和用户组设定ACL权限</h5><p>我们要求 root 是 /project 目录的属主，权限是 rwx；tgroup 是此目录的属组，tgroup 组中拥有班级学员 zhangsan 和 lisi，权限是 rwx；其他人的权限是 0。这时，试听学员 st 来了，她的权限是 r-x。我们来看具体的分配命令。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># useradd zhangsan</span></span><br><span class="line">[root@localhost ~]<span class="comment"># useradd lisi</span></span><br><span class="line">[root@localhost ~]<span class="comment"># useradd st</span></span><br><span class="line">[root@localhost ~]<span class="comment"># groupadd tgroup</span></span><br><span class="line"><span class="comment">#添加需要试验的用户和用户组，省略设定密码的过程</span></span><br><span class="line">[root@localhost ~]<span class="comment"># mkdir /project #建立需要分配权限的目录</span></span><br><span class="line">[root@localhost ~]<span class="comment"># chown root:tgroup /project/</span></span><br><span class="line"><span class="comment">#改变/project目录的属主和属组</span></span><br><span class="line">[root@localhost ~]<span class="comment"># chmod 770 /project/</span></span><br><span class="line"><span class="comment">#指定/project目录的权限</span></span><br><span class="line">[root@localhost ~]<span class="comment"># ll -d /project/</span></span><br><span class="line">drwxrwx--- 2 root tgroup 4096 1月19 04:21 /project/</span><br><span class="line"><span class="comment">#查看一下权限，已经符合要求了</span></span><br><span class="line"><span class="comment">#这时st学员来试听了，如何给她分配权限</span></span><br><span class="line">[root@localhost ~]<span class="comment"># setfacl -m u:st:rx /project/</span></span><br><span class="line"><span class="comment">#给用户st赋予r-x权限，使用"u:用户名：权限" 格式</span></span><br><span class="line">[root@localhost /]<span class="comment"># cd /</span></span><br><span class="line">[root@localhost /]<span class="comment"># ll -d project/</span></span><br><span class="line">drwxrwx---+ 3 root tgroup 4096 1月19 05:20 project/</span><br><span class="line"><span class="comment">#使用ls-l査询时会发现，在权限位后面多了一个"+"，表示此目录拥有ACL权限</span></span><br><span class="line">[root@localhost /]<span class="comment"># getfacl project</span></span><br><span class="line"><span class="comment">#查看/prpject目录的ACL权限</span></span><br><span class="line"><span class="comment">#file: project &lt;-文件名</span></span><br><span class="line"><span class="comment">#owner: root &lt;-文件的属主</span></span><br><span class="line"><span class="comment">#group: tgroup &lt;-文件的属组</span></span><br><span class="line">user::rwx &lt;-用户名栏是空的，说明是属主的权限</span><br><span class="line">user:st:r-x &lt;-用户st的权限</span><br><span class="line">group::rwx &lt;-组名栏是空的，说明是属组的权限</span><br><span class="line">mask::rwx &lt;-mask权限</span><br><span class="line">other::--- &lt;-其他人的权限</span><br></pre></td></tr></table></figure>

<p>大家可以看到，st 用户既不是 /prpject 目录的属主、属组，也不是其他人，我们单独给 st 用户分配了 r-x 权限。这样分配权限太方便了，完全不用先辛苦地规划用户身份了。</p>
<p>我想给用户组赋予 ACL 权限可以吗？当然可以，命令如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost /]<span class="comment"># groupadd tgroup2</span></span><br><span class="line"><span class="comment">#添加测试组</span></span><br><span class="line">[root@localhost /]<span class="comment"># setfacl -m g:tgroup2:rwx project/</span></span><br><span class="line"><span class="comment">#为组tgroup2纷配ACL权限，使用"g:组名:权限"格式</span></span><br><span class="line">[root@localhost /]<span class="comment"># ll -d project/</span></span><br><span class="line">drwxrwx---+ 2 root tgroup 4096 1月19 04:21 project/</span><br><span class="line"><span class="comment">#属组并没有更改</span></span><br><span class="line">[root@localhost /]<span class="comment"># getfacl project/</span></span><br><span class="line"><span class="comment">#file: project/</span></span><br><span class="line"><span class="comment">#owner: root</span></span><br><span class="line"><span class="comment">#group: tgroup</span></span><br><span class="line">user::rwx</span><br><span class="line">user:st:r-x</span><br><span class="line">group::rwx</span><br><span class="line">group:tgroup2:rwx &lt;-用户组tgroup2拥有了rwx权限</span><br><span class="line">mask::rwx</span><br><span class="line">other::--</span><br></pre></td></tr></table></figure>

<h4 id="最大有效权限与删除ACL权限"><a href="#最大有效权限与删除ACL权限" class="headerlink" title="最大有效权限与删除ACL权限"></a>最大有效权限与删除ACL权限</h4><h5 id="最大有效权限mask"><a href="#最大有效权限mask" class="headerlink" title="最大有效权限mask"></a>最大有效权限mask</h5><p>mask 是用来指定最大有效权限的。mask 的默认权限是 rwx，如果我给 st 用户赋予了 r-x 的 ACL 权限，是需要和 mask 的 rwx 权限”相与”才能得到 st 的真正权限，也就是 r-x “相与”rwx 出的值是 r-x，所以 st 用户拥有 r-x 权限。</p>
<p>如果把 mask 的权限改为 r–，和 st 用户的权限相与，也就是 r–”相与”r-x 得出的值是 r–，st 用户的权限就会变为只读。大家可以这么理解：用户和用户组所设定的权限必须在 mask 权限设定的范围之内才能生效，mask权限就是最大有效权限。</p>
<p>不过我们一般不更改 mask 权限，只要给予 mask 最大权限 rwx，那么任何权限和 mask 权限相与，得出的值都是权限本身。也就是说，我们通过给用户和用户组直接赋予权限，就可以生效，这样做更直观。</p>
<p>修改最大有效权限的命令如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost /]<span class="comment"># setfacl -m m:rx project/</span></span><br><span class="line"><span class="comment">#设定mask权限为r-x，使用"m:权限"格式</span></span><br><span class="line">[root@localhost /]<span class="comment"># getfacl project/</span></span><br><span class="line"><span class="comment">#file：project/</span></span><br><span class="line"><span class="comment">#owner：root</span></span><br><span class="line"><span class="comment">#group：tgroup</span></span><br><span class="line">user::rwx</span><br><span class="line">group::rwx <span class="comment">#effective:r-x</span></span><br><span class="line">mask::r-x</span><br><span class="line"><span class="comment">#mask权限变为r-x</span></span><br><span class="line">other::--</span><br></pre></td></tr></table></figure>

<h5 id="删除ACL权限"><a href="#删除ACL权限" class="headerlink" title="删除ACL权限"></a>删除ACL权限</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost /]<span class="comment"># setfacl -x u:用户名 文件名</span></span><br><span class="line"><span class="comment"># 删除指定用户的 ACL 权限</span></span><br><span class="line">[root@localhost /]<span class="comment"># setfacl -x g:组名 文件名</span></span><br><span class="line"><span class="comment"># 删除指定用户组的 ACL 权限</span></span><br><span class="line">[root@localhost /]<span class="comment"># setfacl -b 文件名</span></span><br><span class="line"><span class="comment"># 会删除文件的所有的 ACL 权限</span></span><br></pre></td></tr></table></figure>

<h4 id="默认ACL权限和递归ACL权限"><a href="#默认ACL权限和递归ACL权限" class="headerlink" title="默认ACL权限和递归ACL权限"></a>默认ACL权限和递归ACL权限</h4><h5 id="默认ACL权限"><a href="#默认ACL权限" class="headerlink" title="默认ACL权限"></a>默认ACL权限</h5><p>我们已经给 /project 目录设定了 ACL 权限，那么，在这个目录中新建一些子文件和子目录，这些文件是否会继承父目录的 ACL 权限呢？我们试试吧。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost /]<span class="comment"># cd /project/</span></span><br><span class="line">[root@localhost prq<span class="string">'ect]# touch abc</span></span><br><span class="line"><span class="string">[root@localhost prq'</span>ect]<span class="comment"># mkdir d1</span></span><br><span class="line"><span class="comment">#在/project目录中新建了abc文件和d1目录</span></span><br><span class="line">[root@localhost project]<span class="comment">#ll</span></span><br><span class="line">总用量4</span><br><span class="line">-rw-r--r-- 1 root root 01月19 05:20 abc</span><br><span class="line">drwxr-xr-x 2 root root 4096 1月19 05:20 d1</span><br><span class="line"><span class="comment">#这两个新建立的文件权限位后面并没有"+"，表示它们没有继承ACL权限</span></span><br></pre></td></tr></table></figure>

<p>子文件 abc 和子目录 d1 因为是后建立的，所以并没有继承父目录的 ACL 权限。当然，我们可以手工给这两个文件分配 ACL 权限，但是如果在目录中再新建文件，都要手工指定，则显得过于麻烦。这时就需要用到默认 ACL 权限。</p>
<p><font color="#0099ff" face="宋体">默认 ACL 权限的作用是：如果给父目录设定了默认 ACL 权限，那么父目录中所有新建的子文件都会继承父目录的 ACL 权限。默认 ACL 权限只对目录生效。</font></p>
<p>命令如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost /]<span class="comment"># setfacl -m d:u:st:rx /project/</span></span><br><span class="line"><span class="comment">#使用"d:u:用户名：权限"格式设定默认ACL权限</span></span><br><span class="line">[root@localhost project]<span class="comment"># getfacl project/</span></span><br><span class="line"><span class="comment"># file: project/</span></span><br><span class="line"><span class="comment"># owner: root</span></span><br><span class="line"><span class="comment"># group: tgroup</span></span><br><span class="line">user:: rwx</span><br><span class="line">user:st:r-x</span><br><span class="line">group::rwx</span><br><span class="line">group:tgroup2:rwx</span><br><span class="line">mask::rwx</span><br><span class="line">other::--</span><br><span class="line">default:user::rwx &lt;-多出了default字段</span><br><span class="line">default:user:st:r-x</span><br><span class="line">default:group::rwx</span><br><span class="line">default:mask::rwx</span><br><span class="line">default:other::--</span><br><span class="line">[root@localhost /]<span class="comment"># cd project/</span></span><br><span class="line">[root@localhost project]<span class="comment"># touch bcd</span></span><br><span class="line">[root@localhost project]<span class="comment"># mkdir d2</span></span><br><span class="line"><span class="comment">#新建子文件和子目录</span></span><br><span class="line">[root@localhost project]<span class="comment"># ll 总用量8</span></span><br><span class="line">-rw-r--r-- 1 root root 01月19 05:20 abc</span><br><span class="line">-rw-rw----+ 1 root root 01月19 05:33 bcd</span><br><span class="line">drwxr-xr-x 2 root root 4096 1月19 05:20 d1</span><br><span class="line">drwxrwx---+ 2 root root 4096 1月19 05:33 d2</span><br><span class="line"><span class="comment">#新建的bcd和d2已经继承了父目录的ACL权限</span></span><br></pre></td></tr></table></figure>

<p>原先的 abc 和 d1 还是没有 ACL 权限，因为默认 ACL 权限是针对新建立的文件生效的。</p>
<h5 id="递归-ACL-权限"><a href="#递归-ACL-权限" class="headerlink" title="递归 ACL 权限"></a>递归 ACL 权限</h5><p>递归是指父目录在设定 ACL 权限时，所有的子文件和子目录也会拥有相同的 ACL 权限。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost project]<span class="comment"># setfacl -m u:st:rx -R/project/</span></span><br><span class="line"><span class="comment">#-R递归</span></span><br><span class="line">[root@localhost project]<span class="comment"># ll</span></span><br><span class="line">总用量8</span><br><span class="line">-rw-r-xr--+ 1 root root 01月19 05:20 abc</span><br><span class="line">-rw-rwx--+ 1 root root 01月19 05:33 bcd</span><br><span class="line">drwxr-xr-x+ 2 root root 4096 1月19 05:20 d1</span><br><span class="line">drwxrwx--+ 2 root root 4096 1月19 05:33 d2</span><br><span class="line"><span class="comment">#abc和d1也拥有了ACL权限</span></span><br></pre></td></tr></table></figure>

<p>总结一下：</p>
<ul>
<li>默认 ACL 权限指的是针对父目录中新建立的文件和目录会继承父目录的 ACL 权限，格式是<code>setfacl-m d:u:用户名：权限 文件名</code>；</li>
<li>递归 ACL 权限指的是针对父目录中已经存在的所有子文件和子目录继承父目录的 ACL 权限，格式是<code>setfacl-m u:用户名： 权限 -R 文件名</code>。</li>
</ul>
<h3 id="文件特殊权限"><a href="#文件特殊权限" class="headerlink" title="文件特殊权限"></a>文件特殊权限</h3><h4 id="SetUID"><a href="#SetUID" class="headerlink" title="SetUID"></a>SetUID</h4><h5 id="SetUID的功能"><a href="#SetUID的功能" class="headerlink" title="SetUID的功能"></a>SetUID的功能</h5><ul>
<li><p>只有可以执行的二进制程序才能设定SUID权限</p>
</li>
<li><p>命令执行者要对该程序拥有x(执行)权限</p>
</li>
<li><p>命令执行者在执行该程序时获得该程序文件属主的身份(在执行程序的过程中灵魂附体为文件的属主)</p>
</li>
<li><p>SetUID权限只在该程序执行过程中有效,也就是说身份改变只在程序执行过程中有效</p>
</li>
<li><p>passwd命令拥有SetUID权限,所以普通可以修改自己的密码</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root@finyorke:/home/finyorko<span class="comment"># ll /usr/bin/passwd</span></span><br><span class="line">-rwsr-xr-x 1 root root 54256 3月  27  2019 /usr/bin/passwd*</span><br></pre></td></tr></table></figure>
</li>
<li><p>cat命令没有SetUID权限,所以普通用户不能查看/etc/shadow文件内容</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root@finyorke:/home/finyorko<span class="comment"># ll /bin/cat</span></span><br><span class="line">-rwxr-xr-x 1 root root 52080 3月   3  2017 /bin/cat*</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h5 id="设定SetUID的方法"><a href="#设定SetUID的方法" class="headerlink" title="设定SetUID的方法"></a>设定SetUID的方法</h5><ul>
<li>4代表SUID<ul>
<li>chmod 4755 文件名</li>
<li>chmod u+s 文件名</li>
</ul>
</li>
</ul>
<h5 id="取消SetUID的方法"><a href="#取消SetUID的方法" class="headerlink" title="取消SetUID的方法"></a>取消SetUID的方法</h5><ul>
<li>chmod 755 文件名</li>
<li>chmod u-s 文件名</li>
</ul>
<h5 id="危险的SetUID"><a href="#危险的SetUID" class="headerlink" title="危险的SetUID"></a>危险的SetUID</h5><ul>
<li>关键目录应严格控制写权限。比如“/”、“/usr”等</li>
<li>用户的密码设置要严格遵守密码三原则</li>
<li>对系统中默认应该具有SetUID权限的文件作一列表,定时检查有没有这之外的文件被设置了SetUID权限</li>
</ul>
<h4 id="SetGID"><a href="#SetGID" class="headerlink" title="SetGID"></a>SetGID</h4><h5 id="SetGID针对文件的作用"><a href="#SetGID针对文件的作用" class="headerlink" title="SetGID针对文件的作用"></a>SetGID针对文件的作用</h5><ul>
<li><p>只有可执行的二进制程序才能设置SGID权限</p>
</li>
<li><p>命令执行者要对该程序拥有x(执行)权限</p>
</li>
<li><p>命令执行在执行程序的时候,组身份升级为该程序文件的属组</p>
</li>
<li><p>SetGID权限同样只在该程序执行过程中有效,也就是说组身份改变只在程序执行过程中有效</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">root@finyorke:/home/finyorko<span class="comment"># ll /usr/bin/locate</span></span><br><span class="line">lrwxrwxrwx 1 root root 24 4月  16  2019 /usr/bin/locate -&gt; /etc/alternatives/locate*</span><br><span class="line">root@finyorke:/home/finyorko<span class="comment"># ll /var/lib/mlocate/mlocate.db</span></span><br><span class="line">-rw-r----- 1 root mlocate 17479196 12月  3 07:17 /var/lib/mlocate/mlocate.db</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>/usr/bin/locate</strong>是可执行二进制程序,可以赋予SGID</p>
</li>
<li><p>执行用户lamp对<strong>/usr/bin/locate</strong>命令拥有执行权限</p>
</li>
<li><p>执行<strong>/usr/bin/locate</strong>命令时,组身份会升级为slocate组,而slocate组对<strong>/var/lib/mlocate/mlocate.db</strong>数据库拥有r权限,所以普通用户可以使用locate命令查询mlocate.db数据库</p>
</li>
<li><p>命令结束,lamp用户的组身份返回为lamp组</p>
</li>
</ul>
<h5 id="SetGID针对目录的作用"><a href="#SetGID针对目录的作用" class="headerlink" title="SetGID针对目录的作用"></a>SetGID针对目录的作用</h5><ul>
<li>普通用户必须对此目录拥有r和x权限,才能进入此目录</li>
<li>普通用户在此目录中的有效组会变成此目录的属组</li>
<li>若普通用户对此目录拥有w权限时,新建的文件的默认属组是这个目录的属组</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># cd /tmp/</span></span><br><span class="line">[root@localhost tmp]<span class="comment"># mkdir dtest</span></span><br><span class="line">[root@localhost tmp]<span class="comment"># chmod g+s dtest</span></span><br><span class="line">[root@localhost tmp]<span class="comment"># ll -d dtest/</span></span><br><span class="line">[root@localhost tmp]<span class="comment"># chmod 777 dtest/</span></span><br><span class="line">[root@localhost tmp]<span class="comment"># su – lamp</span></span><br><span class="line">[lamp@localhost ~]$ <span class="built_in">cd</span> /tmp/dtest/</span><br><span class="line">[lamp@localhost dtest]$ touch abc</span><br><span class="line">[lamp@localhost dtest]$ ll</span><br></pre></td></tr></table></figure>

<h5 id="设定SetGID"><a href="#设定SetGID" class="headerlink" title="设定SetGID"></a>设定SetGID</h5><ul>
<li>2代表SGID<ul>
<li>chmod 2755 文件名</li>
<li>chmod g+s 文件名</li>
</ul>
</li>
</ul>
<h5 id="取消SetGID"><a href="#取消SetGID" class="headerlink" title="取消SetGID"></a>取消SetGID</h5><ul>
<li>chmod 755 文件名</li>
<li>chmod g-s 文件名</li>
</ul>
<h4 id="Sticky-BIT"><a href="#Sticky-BIT" class="headerlink" title="Sticky BIT"></a>Sticky BIT</h4><h5 id="SBIT粘着位作用"><a href="#SBIT粘着位作用" class="headerlink" title="SBIT粘着位作用"></a>SBIT粘着位作用</h5><ul>
<li><p>粘着位目前只对目录有效</p>
</li>
<li><p>普通用户对该目录拥有w和x权限,即普通用户可以在此目录拥有写入权限</p>
</li>
<li><p>如果没有粘着位,因为普通用户拥有w权限,所以可以删除此目录下所有文件,包括其他用户建立的文件。一但赋予了粘着位,除了root可以删除所有文件,普通用户就算拥有w权限,也只能删除自己建立的文件,但是不能删除其他用户建立的文件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root@finyorke:/home/finyorko<span class="comment"># ll -d /tmp/</span></span><br><span class="line">drwxrwxrwt 27 root root 4096 12月  3 20:18 /tmp//</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h5 id="设置与取消粘着位"><a href="#设置与取消粘着位" class="headerlink" title="设置与取消粘着位"></a>设置与取消粘着位</h5><ul>
<li>设置粘着位<ul>
<li>chmod 1755 目 录名</li>
<li>chmod o+t 目录名</li>
</ul>
</li>
<li>取消粘着位<ul>
<li>chmod 777 目录名</li>
<li>chmod o-t 目录名</li>
</ul>
</li>
</ul>
<h3 id="文件系统属性chattr权限"><a href="#文件系统属性chattr权限" class="headerlink" title="文件系统属性chattr权限"></a>文件系统属性chattr权限</h3><h4 id="chattr命令格式"><a href="#chattr命令格式" class="headerlink" title="chattr命令格式"></a>chattr命令格式</h4><p>[root@localhost ~]# chattr [+-=] [选项] 文件或目录名<br>                                   +: 增加权限<br>                                   -: 删除权限<br>                                   =: 等于某权限</p>
<ul>
<li>选项<ul>
<li>i:如果对文件设置i属性,那么不允许对文件进行删除、改名,也不能添加和修改数据;如果对目录设置i属性,那么只能修改目录下文件的数据,但不允许建立和删除文件。</li>
<li>a:如果对文件设置a属性,那么只能在文件中增加数据,但是不能删除也不能修改数据;如果对目录设置a属性,那么只允许在目录中建立和修改文件,但是不允许删除</li>
</ul>
</li>
</ul>
<h4 id="查看文件系统属性"><a href="#查看文件系统属性" class="headerlink" title="查看文件系统属性"></a>查看文件系统属性</h4><p>[root@localhost ~]# lsattr 选项 文件名</p>
<p>选项:</p>
<ul>
<li>-a 显示所有文件和目录</li>
<li>-d 若目标是目录,仅列出目录本身的属性,而不是子文件的</li>
</ul>
<h3 id="系统命令sudo权限"><a href="#系统命令sudo权限" class="headerlink" title="系统命令sudo权限"></a>系统命令sudo权限</h3><h4 id="sudo权限"><a href="#sudo权限" class="headerlink" title="sudo权限"></a>sudo权限</h4><ul>
<li>root把本来只能超级用户执行的命令赋予普通用户执行。</li>
<li>sudo的操作对象是系统命令</li>
</ul>
<h4 id="sudo使用"><a href="#sudo使用" class="headerlink" title="sudo使用"></a>sudo使用</h4><p>[root@localhost ~]# visudo</p>
<p>#实际修改的是 /etc/sudoers 文件</p>
<p>root ALL=(ALL)   ALL</p>
<p>#用户名   被管理主机的地址 = (可使用的身份)    授权命令(绝对路径)</p>
<p>#%wheel    ALL=(ALL)     ALL</p>
<p>#% 组名   被管理主机的地址 = (可使用的身份)    授权命令(绝对路径)</p>
<p>授权sc用户可以重启服务器<br>[root@localhost ~]# visudo<br>sc<br>ALL= /sbin/shutdown –r now</p>
<h4 id="授权sc用户可以重启服务器"><a href="#授权sc用户可以重启服务器" class="headerlink" title="授权sc用户可以重启服务器"></a>授权sc用户可以重启服务器</h4><p>[root@localhost ~]# visudo<br>sc   ALL= /sbin/shutdown –r now</p>
<h4 id="普通用户执行sudo赋予的命令"><a href="#普通用户执行sudo赋予的命令" class="headerlink" title="普通用户执行sudo赋予的命令"></a>普通用户执行sudo赋予的命令</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># su – sc</span></span><br><span class="line">[sc@localhost ~]$ sudo -l</span><br><span class="line"><span class="comment"># 查看可用的 sudo 命令</span></span><br><span class="line">[lamp@localhost ~]$ sudo /sbin/shutdown -r now</span><br><span class="line"><span class="comment"># 普通用户执行 sudo 赋予的命令</span></span><br></pre></td></tr></table></figure>

<h2 id="文件系统管理"><a href="#文件系统管理" class="headerlink" title="文件系统管理"></a>文件系统管理</h2><h3 id="回顾分区和文件系统"><a href="#回顾分区和文件系统" class="headerlink" title="回顾分区和文件系统"></a>回顾分区和文件系统</h3><h4 id="分区类型"><a href="#分区类型" class="headerlink" title="分区类型"></a>分区类型</h4><ul>
<li>主分区:总共最多只能分四个</li>
<li>扩展分区:只能有一个,也算作主分区的一种,也就是说主分区加扩展分区最多有四个。但是扩展分区不能存储数据和格式化,必须再划分成逻辑分区才能使用。</li>
<li>逻辑分区:逻辑分区是在扩展分区中划分的,如果是IDE硬盘,Linux最多支持59个逻辑分区,如果是SCSI硬盘Linux最多支持11个逻辑分区</li>
</ul>
<p>问题：第2块SCSI硬盘的第3个逻辑分区，Linux如何表示？</p>
<p>答：</p>
<p>​        硬盘表示的规律：磁盘设备存放于/dev/文件夹下；对于IDE接口的磁盘，按照顺序分别表示为/dev/hda、/dev/hdb、/dev/hdc、/dev/hdd；对于SCSI接口的磁盘，按照顺序分别表示为/dev/sda、/dev/sdb、/dev/sdc、/dev/sdd、……。</p>
<p>​        MBR传统分区模式的特点：主分区最多只能有四个（其中一个可作为扩展分区），其分区编号对应1-4；扩展分区最多只能有一个，也可以没有，扩展分区需要占用主分区编号，不能被格式化用来存放文档；逻辑分区只能从扩展分区范围内再次划分，其分区编号始终从5开始。</p>
<p>​        综上所述，第2块SCSI硬盘的第3个逻辑分区，其设备文件应该位于/dev/sdb7。</p>
<h4 id="文件系统"><a href="#文件系统" class="headerlink" title="文件系统"></a>文件系统</h4><ul>
<li>ext2:是ext文件系统的升级版本,Red Hat Linux7.2版本以前的系统默认都是ext2文件系统。1993年发布,最大支持16TB的分区和最大2TB的文件(1TB=1024GB=1024*1024KB)</li>
<li>ext3: ext3文件系统是ext2文件系统的升级版本,最大的区别就是带日志功能,以在系统突然停止时提高文件系统的可靠性。支持最大16TB的分区和最大2TB的文件</li>
<li>ext4:它是ext3文件系统的升级版。ext4 在性能 、伸缩性和可靠性方面进行了大量改进。EXT4 的变化可以说是翻天覆地的,比如向下兼容 EXT3、最大1EB文件系统和16TB文件、无限数 量子目录、Extents连续数据块概念、多块分配 、延迟分配、持久预分配、快速FSCK、日志校 验、无日志模式、在线碎片整理、inode增强、 默认启用barrier等。是CentOS 6.3的默认文件系 统 (1EB=1024PB=1024*1024TB)</li>
</ul>
<h3 id="文件系统常用命令"><a href="#文件系统常用命令" class="headerlink" title="文件系统常用命令"></a>文件系统常用命令</h3><h4 id="df命令、du命令、fsck命令和dump2fs命令"><a href="#df命令、du命令、fsck命令和dump2fs命令" class="headerlink" title="df命令、du命令、fsck命令和dump2fs命令"></a>df命令、du命令、fsck命令和dump2fs命令</h4><h5 id="文件系统查看命令df"><a href="#文件系统查看命令df" class="headerlink" title="文件系统查看命令df"></a>文件系统查看命令df</h5><p>[root@localhost ~]# df [选项] [挂载点]</p>
<p>选项:<br>-a 显示所有的文件系统信息,包括特殊文件系统,如 /proc、/sysfs<br>-h 使用习惯单位显示容量,如KB,MB或GB等<br>-T 显示文件系统类型<br>-m 以MB为单位显示容量<br>-k 以KB为单位显示容量。默认就是以KB为单位</p>
<h5 id="统计目录或文件大小"><a href="#统计目录或文件大小" class="headerlink" title="统计目录或文件大小"></a>统计目录或文件大小</h5><p>[root@localhost ~]# du [选项] [目录或文件名]<br>选项:<br>-a 显示每个子文件的磁盘占用量。默认只统计子目录的磁盘占用量<br>-h 使用习惯单位显示磁盘占用量,如KB,MB或GB等<br>-s 统计总占用量,而不列出子目录和子文件的占用量</p>
<h5 id="du命令和df命令的区别"><a href="#du命令和df命令的区别" class="headerlink" title="du命令和df命令的区别"></a>du命令和df命令的区别</h5><ul>
<li>df命令是从文件系统考虑的,不光要考虑 文件占用的空间,还要统计被命令或程序 占用的空间(最常见的就是文件已经删除 ,但是程序并没有释放空间) </li>
<li>du命令是面向文件的,只会计算文件或目录占用的空间</li>
</ul>
<h5 id="文件系统修复命令fsck"><a href="#文件系统修复命令fsck" class="headerlink" title="文件系统修复命令fsck"></a>文件系统修复命令fsck</h5><p>[root@localhost ~]# fsck [选项] 分区设备文件名<br>选项:<br>-a: 不用显示用户提示,自动修复文件系统<br>-y: 自动修复。和-a作用一致,不过有些文件系统只支持-y</p>
<h5 id="显示磁盘状态命令dumpe2fs"><a href="#显示磁盘状态命令dumpe2fs" class="headerlink" title="显示磁盘状态命令dumpe2fs"></a>显示磁盘状态命令dumpe2fs</h5><p>[root@localhost ~]# dumpe2fs 分区设备文件名</p>
<h4 id="挂载命令"><a href="#挂载命令" class="headerlink" title="挂载命令"></a>挂载命令</h4><h5 id="查询与自动挂载"><a href="#查询与自动挂载" class="headerlink" title="查询与自动挂载"></a>查询与自动挂载</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># mount [-l]</span></span><br><span class="line"><span class="comment">#查询系统中已经挂载的设备, -l 会显示卷标名称</span></span><br><span class="line">[root@localhost ~]<span class="comment"># mount –a</span></span><br><span class="line"><span class="comment">#依据配置文件 /etc/fstab 的内容,自动挂载</span></span><br></pre></td></tr></table></figure>

<h5 id="挂载命令格式"><a href="#挂载命令格式" class="headerlink" title="挂载命令格式"></a>挂载命令格式</h5><p>[root@localhost ~]# mount [-t 文件系统] [-L 卷标名] <br>[-o 特殊选项] 设备文件名 挂载点<br>选项:<br>-t 文件系统:加入文件系统类型来指定挂载的类型,可以ext3、ext4、iso9660等文件系统<br>-L 卷标名:挂载指定卷标的分区,而不是安装设备文件名挂载<br>-o 特殊选项:可以指定挂载的额外选项</p>
<p>参数 说明 </p>
<ul>
<li>atime/noatime 更新访问时间/不更新访问时间。访问分区文件时,是否更新文件 的访问时间,默认为更新 </li>
<li>async/sync 异步/同步,默认为异步</li>
<li>auto/noauto  自动/手动,mount –a命令执行时,是否会自动安装/etc/fstab文件 内容挂载,默认为自动 </li>
<li>defaults 定义默认值,相当于rw,suid,dev,exec,auto,nouser,async这七个选项</li>
<li>exec/noexec  执行/不执行,设定是否允许在文件系统中执行可执行文件,默认是exec允许</li>
<li>remount 重新挂载已经挂载的文件系统,一般用于指定修改特殊权限 </li>
<li>rw/ro   读写/只读,文件系统挂载时,是否具有读写权限,默认是rw </li>
<li>suid/nosuid   具有/不具有SUID权限,设定文件系统是否具有SUID和SGID的权 限,默认是具有 </li>
<li>user/nouser 允许/不允许普通用户挂载,设定文件系统是否允许普通用户挂载, 默认是不允许,只有root可以挂载分区 </li>
<li>usrquota 写入代表文件系统支持用户磁盘配额,默认不支持 </li>
<li>grpquota  写入代表文件系统支持组磁盘配额,默认不支持</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># mount -o remount,noexec /home</span></span><br><span class="line"><span class="comment"># 重新挂载 /boot 分区,并使用 noexec 权限</span></span><br><span class="line">[root@localhost sh]<span class="comment"># cd /home</span></span><br><span class="line">[root@localhost boot]<span class="comment"># vi hello.sh</span></span><br><span class="line">[root@localhost boot]<span class="comment"># chmod 755 hello.sh</span></span><br><span class="line">[root@localhost boot]<span class="comment"># ./hello.sh</span></span><br><span class="line">[root@localhost boot]<span class="comment"># mount -o remount,exec /home</span></span><br><span class="line"><span class="comment"># 记得改回来啊,要不会影响系统启动的</span></span><br></pre></td></tr></table></figure>

<h4 id="挂载光盘与U盘"><a href="#挂载光盘与U盘" class="headerlink" title="挂载光盘与U盘"></a>挂载光盘与U盘</h4><h5 id="挂载光盘"><a href="#挂载光盘" class="headerlink" title="挂载光盘"></a>挂载光盘</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># mkdir /mnt/cdrom/</span></span><br><span class="line"><span class="comment"># 建立挂载点</span></span><br><span class="line">[root@localhost ~]<span class="comment"># mount -t iso9660 /dev/cdrom /mnt/cdrom/</span></span><br><span class="line"><span class="comment"># 挂载光盘</span></span><br><span class="line">[root@localhost ~]<span class="comment"># mount /dev/sr0 /mnt/cdrom/</span></span><br></pre></td></tr></table></figure>

<h5 id="卸载命令"><a href="#卸载命令" class="headerlink" title="卸载命令"></a>卸载命令</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># umount 设备文件名或挂载点</span></span><br><span class="line">[root@localhost ~]<span class="comment"># umount /mnt/cdrom</span></span><br></pre></td></tr></table></figure>

<h5 id="挂载U盘"><a href="#挂载U盘" class="headerlink" title="挂载U盘"></a>挂载U盘</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># fdisk –l</span></span><br><span class="line"><span class="comment"># 查看 U 盘设备文件名</span></span><br><span class="line">[root@localhost ~]<span class="comment"># mount -t vfat /dev/sdb1 /mnt/usb/</span></span><br></pre></td></tr></table></figure>

<p>注意:Linux默认是不支持NTFS文件系统的</p>
<h4 id="支持NTFS文件系统"><a href="#支持NTFS文件系统" class="headerlink" title="支持NTFS文件系统"></a>支持NTFS文件系统</h4><h5 id="下载NTFS-3G插件"><a href="#下载NTFS-3G插件" class="headerlink" title="下载NTFS-3G插件"></a>下载NTFS-3G插件</h5><p><a href="http://www.tuxera.com/community/ntfs-3g-download/" target="_blank" rel="noopener">http://www.tuxera.com/community/ntfs-3g-download/</a></p>
<h5 id="安装NTFS-3G"><a href="#安装NTFS-3G" class="headerlink" title="安装NTFS-3G"></a>安装NTFS-3G</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># tar -zxvf ntfs-3g_ntfsprogs-2013.1.13.tgz</span></span><br><span class="line"><span class="comment"># 解压</span></span><br><span class="line">[root@localhost ~]<span class="comment"># cd ntfs-3g_ntfsprogs-2013.1.13</span></span><br><span class="line"><span class="comment"># 进入解压目录</span></span><br><span class="line">[root@localhost ntfs-3g_ntfsprogs-2013.1.13]<span class="comment"># ./configure</span></span><br><span class="line"><span class="comment"># 编译器准备。没有指定安装目录,安装到默认位置中</span></span><br><span class="line">[root@localhost ntfs-3g_ntfsprogs-2013.1.13]<span class="comment"># make</span></span><br><span class="line"><span class="comment"># 编译</span></span><br><span class="line">[root@localhost ntfs-3g_ntfsprogs-2013.1.13]<span class="comment"># make install</span></span><br><span class="line"><span class="comment"># 编译安装</span></span><br></pre></td></tr></table></figure>

<h5 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h5><p>[root@localhost ~]# mount -t ntfs-3g 分区设备文件名 挂载点</p>
<h3 id="fdisk分区"><a href="#fdisk分区" class="headerlink" title="fdisk分区"></a>fdisk分区</h3><h4 id="fdisk命令分区过程"><a href="#fdisk命令分区过程" class="headerlink" title="fdisk命令分区过程"></a>fdisk命令分区过程</h4><ol>
<li><p>添加新硬盘</p>
</li>
<li><p>查看新硬盘<br>[root@localhost ~]# fdisk -l</p>
</li>
<li><p>使用fdisk命令分区<br>[root@localhost ~]# fdisk /dev/sdb</p>
<p>fdisk交互指令说明</p>
<table>
<thead>
<tr>
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>a</td>
<td>设置可引导标记</td>
</tr>
<tr>
<td>b</td>
<td>编辑bsd磁盘标签</td>
</tr>
<tr>
<td>c</td>
<td>设置DOS操作系统兼容标记</td>
</tr>
<tr>
<td>d</td>
<td>删除一个分区</td>
</tr>
<tr>
<td>l</td>
<td>显示已知的文件系统类型。82为Linux swap分区,83为Linux分区</td>
</tr>
<tr>
<td>m</td>
<td>显示帮助菜单</td>
</tr>
<tr>
<td>n</td>
<td>新建分区</td>
</tr>
<tr>
<td>o</td>
<td>建立空白DOS分区表</td>
</tr>
<tr>
<td>p</td>
<td>显示分区列表</td>
</tr>
<tr>
<td>q</td>
<td>不保存退出</td>
</tr>
<tr>
<td>s</td>
<td>新建空白SUN磁盘标签</td>
</tr>
<tr>
<td>t</td>
<td>改变一个分区的系统ID</td>
</tr>
<tr>
<td>u</td>
<td>改变显示记录单位</td>
</tr>
<tr>
<td>n</td>
<td>验证分区表验证分区表</td>
</tr>
<tr>
<td>w</td>
<td>保存退出</td>
</tr>
<tr>
<td>x</td>
<td>附加功能(仅专家)</td>
</tr>
</tbody></table>
</li>
<li><p>重新读取分区表信息<br>[root@localhost ~]# partprobe</p>
</li>
<li><p>格式化分区<br>[root@localhost ~]# mkfs -t ext4 /dev/sdb1</p>
</li>
<li><p>建立挂载点并挂载<br>[root@localhost ~]# mkdir /disk1<br>[root@localhost ~]# mount /dev/sdb1 /disk1/</p>
</li>
</ol>
<h4 id="分区自动挂载与fstab文件修复"><a href="#分区自动挂载与fstab文件修复" class="headerlink" title="分区自动挂载与fstab文件修复"></a>分区自动挂载与fstab文件修复</h4><ol>
<li><p>/etc/fstab文件<br>第一字段:分区设备文件名或UUID(硬盘通用唯一识别码)<br>第二字段:挂载点<br>第三字段:文件系统名称<br>第四字段:挂载参数<br>第五字段:指定分区是否被dump备份,0代表不备份,1代表每天备份,2代表不定期备份<br>第六字段:指定分区是否被fsck检测,0代表不检测,其他数字代表检测的优先级,那么当然1的优先级比2高</p>
</li>
<li><p>分区自动挂载<br>[root@localhost ~]# vi /etc/fstab<br>…省略部分输出…<br>/dev/sdb5    /disk5    ext4  defaults   1 2</p>
</li>
<li><p>/etc/fstab文件修复<br>[root@localhost ~]# mount -o remount,rw /</p>
</li>
</ol>
<h3 id="分配swap分区"><a href="#分配swap分区" class="headerlink" title="分配swap分区"></a>分配swap分区</h3><h4 id="新建swap分区"><a href="#新建swap分区" class="headerlink" title="新建swap分区"></a>新建swap分区</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># fdisk /dev/sdb</span></span><br></pre></td></tr></table></figure>

<p>别忘记把分区ID改为82</p>
<h4 id="格式化"><a href="#格式化" class="headerlink" title="格式化"></a>格式化</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># mkswap /dev/sdb1</span></span><br></pre></td></tr></table></figure>

<h4 id="加入swap分区"><a href="#加入swap分区" class="headerlink" title="加入swap分区"></a>加入swap分区</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># swapon /dev/sdb1</span></span><br><span class="line"><span class="comment"># 加入 swap 分区</span></span><br><span class="line">[root@localhost ~]<span class="comment"># swapoff /dev/sdb1</span></span><br><span class="line"><span class="comment"># 取消 swap 分区</span></span><br></pre></td></tr></table></figure>

<h4 id="swap分区开机自动挂载"><a href="#swap分区开机自动挂载" class="headerlink" title="swap分区开机自动挂载"></a>swap分区开机自动挂载</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># vi /etc/fstab</span></span><br><span class="line">/dev/sdb1  swap  swap defaults  0 0</span><br></pre></td></tr></table></figure>

<h4 id="free命令"><a href="#free命令" class="headerlink" title="free命令"></a>free命令</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># free</span></span><br><span class="line"><span class="comment"># 查看内存与 swap 分区使用状况</span></span><br></pre></td></tr></table></figure>

<ul>
<li>cached(缓存):是指把读取出来的数据保存在内存当 中,当再次读取时,不用读取硬盘而直接从内存当中读 取,加速了数据的读取过程 </li>
<li>buffer(缓冲):是指在写入数据时,先把分散的写入操 作保存到内存当中,当达到一定程度再集中写入硬盘, 减少了磁盘碎片和硬盘的反复寻道,加速了数据的写入 过程</li>
</ul>
<h2 id="Shell基础"><a href="#Shell基础" class="headerlink" title="Shell基础"></a>Shell基础</h2><h3 id="Shell概述"><a href="#Shell概述" class="headerlink" title="Shell概述"></a>Shell概述</h3><h4 id="Shell是什么-1"><a href="#Shell是什么-1" class="headerlink" title="Shell是什么"></a>Shell是什么</h4><ul>
<li>Shell是一个命令行解释器,它为用户提供 了一个向Linux内核发送请求以便运行程 序的界面系统级程序,用户可以用Shell来 启动、挂起、停止甚至是编写一些程序。</li>
<li>Shell还是一个功能相当强大的编程语言, 易编写,易调试,灵活性较强。Shell是解 释执行的脚本语言,在Shell中可以直接调 用Linux系统命令。</li>
</ul>
<h4 id="Shell的分类"><a href="#Shell的分类" class="headerlink" title="Shell的分类"></a>Shell的分类</h4><ul>
<li>Bourne Shell:从1979起Unix就开始使用 Bourne Shell,Bourne Shell的主文件名为 sh。</li>
<li>C Shell: C Shell主要在BSD版的Unix系 统中使用,其语法和C语言相类似而得名</li>
<li>Shell的两种主要语法类型有Bourne和C, 这两种语法彼此不兼容。Bourne家族主要 包括sh、ksh、Bash、psh、zsh;C家族主 要包括:csh、tcsh</li>
<li>Bash: Bash与sh兼容,现在使用的Linux 就是使用Bash作为用户的基本Shell</li>
</ul>
<h4 id="Linux支持的Shell"><a href="#Linux支持的Shell" class="headerlink" title="Linux支持的Shell"></a>Linux支持的Shell</h4><p>/etc/shells</p>
<h3 id="Shell脚本的执行方式"><a href="#Shell脚本的执行方式" class="headerlink" title="Shell脚本的执行方式"></a>Shell脚本的执行方式</h3><h4 id="echo输出命令"><a href="#echo输出命令" class="headerlink" title="echo输出命令"></a>echo输出命令</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># echo [选项] [输出内容]</span></span><br><span class="line">选项:</span><br><span class="line">-e:   支持反斜线控制的字符转换</span><br><span class="line">控制字符及其作用</span><br><span class="line">\\ 输出\本身</span><br><span class="line">\a 输出警告音</span><br><span class="line">\b 退格键,也就是向左删除键</span><br><span class="line">\c 取消输出行末的换行符。和“-n”选项一致</span><br><span class="line">\e ESCAPE键</span><br><span class="line">\f 换页符</span><br><span class="line">\n 换行符</span><br><span class="line">\r 回车键</span><br><span class="line">\t 制表符,也就是Tab键</span><br><span class="line">\v 垂直制表符</span><br><span class="line">\0nnn 按照八进制ASCII码表输出字符。其中0为数字零,nnn是三位八进制数</span><br><span class="line">\xhh 按照十六进制ASCII码表输出字符。其中hh是两位十六进制数</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# echo -e &quot;ab\bc&quot;</span><br><span class="line"># 删除左侧字符</span><br><span class="line">[root@localhost ~]# echo -e &quot;a\tb\tc\nd\te\tf&quot;</span><br><span class="line"># 制表符与换行符</span><br><span class="line">[root@localhost ~]# echo -e \ &quot;\x61\t\x62\t\x63\n\x64\t\x65\t\x66&quot;</span><br><span class="line"># 按照十六进制 ASCII 码也同样可以输出</span><br><span class="line">[root@localhost ~]# echo -e &quot;\e[1;31m abcd \e[0m&quot;</span><br><span class="line"># 输出颜色</span><br><span class="line">#\e[ 开始颜色输出</span><br><span class="line">#\e[0m 结束颜色输出</span><br><span class="line">#30m= 黑色, 31m= 红色, 32m= 绿色, 33m= 黄色</span><br><span class="line">#34m= 蓝色, 35m= 洋红, 36m= 青色, 37m= 白色</span><br></pre></td></tr></table></figure>

<h4 id="第一个脚本"><a href="#第一个脚本" class="headerlink" title="第一个脚本"></a>第一个脚本</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost sh]<span class="comment"># vi hello.sh</span></span><br><span class="line"><span class="comment">#!/bin/Bash    -----注意这一行不是注释</span></span><br><span class="line"><span class="comment">#The first program</span></span><br><span class="line"><span class="comment"># Author: finyorko</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">"The first shell.sh"</span></span><br></pre></td></tr></table></figure>

<h4 id="脚本执行"><a href="#脚本执行" class="headerlink" title="脚本执行"></a>脚本执行</h4><ul>
<li>赋予执行权限,直接运行<ul>
<li>chmod 755 hello.sh</li>
<li>./hello.sh</li>
</ul>
</li>
<li>绝对路径执行<br>/root/sh/hello.sh</li>
<li>相对路径执行<br>./hello.sh</li>
<li>通过Bash调用执行脚本<ul>
<li>bash hello.sh    #此种方式，甚至执行权限不给都可以用</li>
</ul>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># unix2dos  </span><br><span class="line">#unix格式转化为Windows格式</span><br><span class="line"># dos2unix   </span><br><span class="line">#Windows格式转化为unix格式</span><br></pre></td></tr></table></figure>

<h3 id="Bash的基本功能"><a href="#Bash的基本功能" class="headerlink" title="Bash的基本功能"></a>Bash的基本功能</h3><h4 id="历史命令与命令补全"><a href="#历史命令与命令补全" class="headerlink" title="历史命令与命令补全"></a>历史命令与命令补全</h4><h5 id="历史命令"><a href="#历史命令" class="headerlink" title="历史命令"></a>历史命令</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# history [选项] [历史命令保存文件]</span><br><span class="line">选项:</span><br><span class="line">-c:   清空历史命令</span><br><span class="line">-w:   把缓存中的历史命令写入历史命令保存文件</span><br><span class="line">~/.bash_history</span><br></pre></td></tr></table></figure>

<p>历史命令默认会保存1000条,可以在环境变量配置文件/etc/profile中进行修改</p>
<p>历史命令的调用</p>
<ul>
<li>使用上、下箭头调用以前的历史命令</li>
<li>使用“!n”重复执行第n条历史命令</li>
<li>使用“!!”重复执行上一条命令</li>
<li>使用“!字串”重复执行最后一条以该字串开头的命令</li>
</ul>
<h5 id="命令与文件补全"><a href="#命令与文件补全" class="headerlink" title="命令与文件补全"></a>命令与文件补全</h5><p>在Bash中,命令与文件补全是非常方便与常用的功能,我们只要在输入命令或文件时,按“Tab”键就会自动进行补全</p>
<h4 id="命令别名与常用快捷键"><a href="#命令别名与常用快捷键" class="headerlink" title="命令别名与常用快捷键"></a>命令别名与常用快捷键</h4><h5 id="命令别名"><a href="#命令别名" class="headerlink" title="命令别名"></a>命令别名</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># alias 别名='原命令'</span></span><br><span class="line"><span class="comment"># 设定命令别名</span></span><br><span class="line">[root@localhost ~]<span class="comment"># alias</span></span><br><span class="line"><span class="comment"># 查询命令别名</span></span><br></pre></td></tr></table></figure>

<p>命令执行时顺序</p>
<ol>
<li>第一顺位执行用绝对路径或相对路径执行的命令。</li>
<li>第二顺位执行别名。</li>
<li>第三顺位执行Bash的内部命令。</li>
<li>第四顺位执行按照$PATH环境变量定义的目录查找顺序找到的第一个命令。</li>
</ol>
<p>让别名永久生效</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># vi /root/.bashrc</span></span><br></pre></td></tr></table></figure>

<p>删除别名</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># unalias 别名</span></span><br></pre></td></tr></table></figure>

<h5 id="Bash常用快捷键"><a href="#Bash常用快捷键" class="headerlink" title="Bash常用快捷键"></a>Bash常用快捷键</h5><table>
<thead>
<tr>
<th>快捷键</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>ctrl+A</td>
<td>把光标移动到命令行开头。如果我们输入的命令过长,想要把光标移动到命令行开头时使用。</td>
</tr>
<tr>
<td>ctrl+E</td>
<td>把光标移动到命令行结尾。</td>
</tr>
<tr>
<td>ctrl+C</td>
<td>强制终止当前的命令。</td>
</tr>
<tr>
<td>ctrl+L</td>
<td>清屏,相当于clear命令。</td>
</tr>
<tr>
<td>ctrl+U</td>
<td>删除或剪切光标之前的命令。我输入了一行很长的命令,不用使用退格键一个一个字符的删除,使用这个快捷键会更加方便</td>
</tr>
<tr>
<td>ctrl+K</td>
<td>删除或剪切光标之后的内容。</td>
</tr>
<tr>
<td>ctrl+Y</td>
<td>粘贴ctrl+U或ctrl+K剪切的内容。</td>
</tr>
<tr>
<td>ctrl+R</td>
<td>在历史命令中搜索,按下ctrl+R之后,就会出现搜索界面,只要输入搜索内容,就会从历史命令中搜索。</td>
</tr>
<tr>
<td>ctrl+D</td>
<td>退出当前终端。</td>
</tr>
<tr>
<td>ctrl+Z</td>
<td>暂停,并放入后台。这个快捷键牵扯工作管理的内容,我们在系统管理章节详细介绍。</td>
</tr>
<tr>
<td>ctrl+S</td>
<td>暂停屏幕输出。</td>
</tr>
<tr>
<td>ctrl+Q</td>
<td>恢复屏幕输出</td>
</tr>
</tbody></table>
<h4 id="输入输出重定向"><a href="#输入输出重定向" class="headerlink" title="输入输出重定向"></a>输入输出重定向</h4><h5 id="标准输入输出"><a href="#标准输入输出" class="headerlink" title="标准输入输出"></a>标准输入输出</h5><table>
<thead>
<tr>
<th>设备</th>
<th>设备文件夹</th>
<th>文件描述符</th>
<th>类型</th>
</tr>
</thead>
<tbody><tr>
<td>键盘</td>
<td>/dev/stdin</td>
<td>0</td>
<td>标准输入</td>
</tr>
<tr>
<td>显示器</td>
<td>/dev/sdtout</td>
<td>1</td>
<td>标准输出</td>
</tr>
<tr>
<td>显示器</td>
<td>/dev/sdterr</td>
<td>2</td>
<td>标准错误输出</td>
</tr>
</tbody></table>
<h5 id="输出重定向"><a href="#输出重定向" class="headerlink" title="输出重定向"></a>输出重定向</h5><table>
<thead>
<tr>
<th>类型</th>
<th>符号</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>标准输出重定向</td>
<td>命令 &gt; 文件</td>
<td>以覆盖的方式,把命令的正确输出输出到指定的文件或设备当中。</td>
</tr>
<tr>
<td></td>
<td>命令 &gt;&gt; 文件</td>
<td>以追加的方式,把命令的 正确输出输出到指定的文 件或设备当中。</td>
</tr>
<tr>
<td>标准错误输出重定向</td>
<td>错误命令 2&gt;文件</td>
<td>以覆盖的方式,把命令的 错误输出输出到指定的文 件或设备当中</td>
</tr>
<tr>
<td></td>
<td>错误命令 2&gt;&gt;文件</td>
<td>以追加的方式,把命令的 错误输出输出到指定的文 件或设备当中。</td>
</tr>
<tr>
<td>正确输出和错误输出同时保存</td>
<td>命令 &gt; 文件 2&gt;&amp;1</td>
<td>以覆盖的方式,把正确输 出和错误输出都保存到同 一个文件当中。</td>
</tr>
<tr>
<td></td>
<td>命令 &gt;&gt; 文件 2&gt;&amp;1</td>
<td>以追加的方式,把正确输出和错误输出都保存到同一个文件当中。</td>
</tr>
<tr>
<td></td>
<td>命令 &amp;&gt;文件</td>
<td>以覆盖的方式,把正确输出和错误输出都保存到同一个文件当中。</td>
</tr>
<tr>
<td></td>
<td>命令 &amp;&gt;&gt;文件</td>
<td>以追加的方式,把正确输出和错误输出都保存到同一个文件当中。</td>
</tr>
<tr>
<td></td>
<td>命令&gt;&gt;文件1 2&gt;&gt;文件2</td>
<td>把正确的输出追加到文件1中,把错误的输出追加到文件2中。</td>
</tr>
</tbody></table>
<h5 id="输入重定向"><a href="#输入重定向" class="headerlink" title="输入重定向"></a>输入重定向</h5><p>[root@localhost ~]# wc [选项] [文件名]<br>选项:<br>-c  统计字节数<br>-w 统计单词数<br>-l  统计行数</p>
<ul>
<li><p>命令&lt;文件              把文件作为命令的输入</p>
</li>
<li><p>命令&lt;&lt; 标识符<br>…<br>标识符                   把标识符之间内容作为命令的输入</p>
</li>
</ul>
<h4 id="多命令顺序执行与管道符"><a href="#多命令顺序执行与管道符" class="headerlink" title="多命令顺序执行与管道符"></a>多命令顺序执行与管道符</h4><h5 id="多命令顺序执行"><a href="#多命令顺序执行" class="headerlink" title="多命令顺序执行"></a>多命令顺序执行</h5><table>
<thead>
<tr>
<th>多命令执行符</th>
<th>格式</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>;</td>
<td>命令1 ;命令2</td>
<td>多个命令顺序执行,命令之间没有任何逻辑联系</td>
</tr>
<tr>
<td>&amp;&amp;</td>
<td>命令1 &amp;&amp; 命令２</td>
<td>逻辑与<br>当命令1正确执行,则命令2才会执行<br>当命令1执行不正确,则命令2不会执行</td>
</tr>
<tr>
<td>||</td>
<td>命令１||命令２</td>
<td>逻辑或<br>当命令1 执行不正确,则命令2才会执<br>当命令1正确执行,则命令2不会执行</td>
</tr>
</tbody></table>
<p>例子：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># ls ; date ; cd /user ; pwd</span></span><br></pre></td></tr></table></figure>

<p>[root@localhost ~]# dd if=输入文件 of=输出文件 bs=字节数 count=个数<br>选项:<br>if=输入文件      指定源文件或源设备<br>of=输出文件    指定目标文件或目标设备<br>bs=字节数       指定一次输入/输出多少字节,即把这些字节看做一个数据块<br>count=个数     指定输入/输出多少个数据块</p>
<p>例子:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># date ; dd if=/dev/zero of=/root/testfile bs=1k count=100000 ;date</span></span><br><span class="line">[root@localhost ~]<span class="comment"># ls anaconda-ks.cfg &amp;&amp; echo yes</span></span><br><span class="line">[root@localhost ~]<span class="comment"># ls /root/test || echo "no</span></span><br><span class="line">[root@localhost ~]<span class="comment"># 命令 &amp;&amp; echo yes || echo no</span></span><br></pre></td></tr></table></figure>

<h5 id="管道符"><a href="#管道符" class="headerlink" title="管道符"></a>管道符</h5><p>命令格式:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# 命令1 | 命令2</span><br><span class="line"># 命令 1 的正确输出作为命令 2 的操作对象</span><br></pre></td></tr></table></figure>

<p>例子：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># ll -a /etc/ | more</span></span><br><span class="line">[root@localhost ~]<span class="comment"># netstat -an | grep "ESTABLISHED"</span></span><br></pre></td></tr></table></figure>

<p>[root@localhost ~]# grep [选项] “搜索内容” 文件名<br>选项:<br>-i:                        忽略大小写<br>-n:                       输出行号<br>-v:                       反向查找<br>–color=auto      搜索出的关键字用颜色显示</p>
<h4 id="通配符与其他特殊符号"><a href="#通配符与其他特殊符号" class="headerlink" title="通配符与其他特殊符号"></a>通配符与其他特殊符号</h4><h5 id="通配符"><a href="#通配符" class="headerlink" title="通配符"></a>通配符</h5><table>
<thead>
<tr>
<th>通配符</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>？</td>
<td>匹配一个任意字符</td>
</tr>
<tr>
<td>*</td>
<td>匹配0个或任意多个任意字符,也就是可以匹配任何内容</td>
</tr>
<tr>
<td>[]</td>
<td>匹配中括号中任意一个字符。例如:[abc]代表一定匹配一个字符,或者是a,或者是b,或者是c。</td>
</tr>
<tr>
<td>[-]</td>
<td>匹配中括号中任意一个字符,-代表一个范围。例如:[a-z]代表匹配一个小写字母。</td>
</tr>
<tr>
<td>[^]</td>
<td>逻辑非,表示匹配不是中括号内的一个字符。例如:[^0-9]代表匹配一个不是数字的字符。</td>
</tr>
</tbody></table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># cd /tmp/</span></span><br><span class="line">[root@localhost tmp]<span class="comment"># rm -rf *</span></span><br><span class="line">[root@localhost tmp]<span class="comment"># touch abc</span></span><br><span class="line">[root@localhost tmp]<span class="comment"># touch abcd</span></span><br><span class="line">[root@localhost tmp]<span class="comment"># touch 012</span></span><br><span class="line">[root@localhost tmp]<span class="comment"># touch 0abc</span></span><br><span class="line">[root@localhost tmp]<span class="comment"># ls ?abc</span></span><br><span class="line">[root@localhost tmp]<span class="comment"># ls [0-9]*</span></span><br><span class="line">[root@localhost tmp]<span class="comment"># ls [^0-9]*</span></span><br></pre></td></tr></table></figure>

<h5 id="Bash中其他特殊符号"><a href="#Bash中其他特殊符号" class="headerlink" title="Bash中其他特殊符号"></a>Bash中其他特殊符号</h5><table>
<thead>
<tr>
<th>符号</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>‘ ‘</td>
<td>单引号。在单引号中所有的特殊符号,如“$”和“`”(反引号)都没有特殊含义</td>
</tr>
<tr>
<td>“”</td>
<td>双引号。在双引号中特殊符号都没有特殊含义,但是“$”、“`”和“\”是例外,拥有“调用变量的值”、“引用命令”和“转义符”的特殊含义。</td>
</tr>
<tr>
<td>``</td>
<td>反引号。反引号括起来的内容是系统命令,在Bash中会先执行它。和$()作用一样,不过推荐使用$(),因为反引号非常容易看错。</td>
</tr>
<tr>
<td>$()</td>
<td>和反引号作用一样,用来引用系统命令</td>
</tr>
<tr>
<td>#</td>
<td>在Shell脚本中,#开头的行代表注释。</td>
</tr>
<tr>
<td>$</td>
<td>用于调用变量的值,如需要调用变量name的值时,需要用$name的方式得到变量的值</td>
</tr>
<tr>
<td>\</td>
<td>转义符,跟在\之后的特殊符号将失去特殊含义,变为普通字符。如$将输出“$”符号,而不当做是变量引用。</td>
</tr>
</tbody></table>
<p>例子：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">反引号与$()</span><br><span class="line">[root@localhost ~]<span class="comment"># echo `ls`</span></span><br><span class="line">[root@localhost ~]<span class="comment"># echo $(date)</span></span><br><span class="line"></span><br><span class="line">单引号与双引号</span><br><span class="line">[root@localhost ~]<span class="comment"># name=sc</span></span><br><span class="line">[root@localhost ~]<span class="comment"># echo '$name'</span></span><br><span class="line">[root@localhost ~]<span class="comment"># echo "$name"</span></span><br><span class="line">[root@localhost ~]<span class="comment"># echo ‘$(date)'</span></span><br><span class="line">[root@localhost ~]<span class="comment"># echo “$(date)"</span></span><br></pre></td></tr></table></figure>

<h3 id="Bash的变量"><a href="#Bash的变量" class="headerlink" title="Bash的变量"></a>Bash的变量</h3><h4 id="用户自定义变量"><a href="#用户自定义变量" class="headerlink" title="用户自定义变量"></a>用户自定义变量</h4><ol>
<li>什么是变量</li>
</ol>
<ul>
<li>变量是计算机内存的单元,其中存放的值可以改变。当Shell脚本需要保存一些信息时,如一个文件名或是一个数字,就把它存放在一个变量中。每个变量有一个名字,所以很容易引用它。使用变量可以保存有用信息,使系统获知用户相关设置,变量也可以用于保存暂时信息。</li>
</ul>
<ol start="2">
<li><p>变量设置规则</p>
<ul>
<li>变量名称可以由字母、数字和下划线组成,但是不能以数字开头。如果变量名是“2name”则是错误的。</li>
<li>在Bash中,变量的默认类型都是字符串型,如果要进行数值运算,则必修指定变量类型为数值型。</li>
<li>变量用等号连接值,等号左右两侧不能有空格。</li>
<li>变量的值如果有空格,需要使用单引号或双引号包括。</li>
<li>在变量的值中,可以使用“\”转义符。</li>
<li>如果需要增加变量的值,那么可以进行变量值的叠加。不过变量需要用双引号包含“$变量名”或用${变量名}包含。</li>
<li>如果是把命令的结果作为变量值赋予变量,则需要使用反引号或$()包含命令。</li>
<li>环境变量名建议大写,便于区分。</li>
</ul>
</li>
<li><p>变量分类</p>
<ul>
<li>用户自定义变量</li>
<li>环境变量:这种变量中主要保存的是和系统操作环境相关的数据。</li>
<li>位置参数变量:这种变量主要是用来向脚本当中传递参数或数据的,变量名不能自定义,变量作用是固定的。</li>
<li>预定义变量:是Bash中已经定义好的变量,变量名不能自定义,变量作用也是固定的。</li>
</ul>
</li>
<li><p>本地变量</p>
<ul>
<li><p>变量定义</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># name="finyorke"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>变量叠加</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># aa=123</span></span><br><span class="line">[root@localhost ~]<span class="comment"># aa="$aa"456</span></span><br><span class="line">[root@localhost ~]<span class="comment"># aa=$&#123;aa&#125;789</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>变量调用</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># echo $name</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>变量查看</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># set</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>变量删除</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># unset name</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ol>
<h4 id="环境变量"><a href="#环境变量" class="headerlink" title="环境变量"></a>环境变量</h4><ol>
<li><p>环境变量是什么<br>用户自定义变量只在当前的Shell中生效,而环境变量会在当前Shell和这个Shell的所有子Shell当中生效。如果把环境变量写入相应的配置文件,那么这个环境变量就会在所有的Shell中生效</p>
</li>
<li><p>设置环境变量</p>
<p>export 变量名=变量值</p>
<p>#申明变量</p>
</li>
</ol>
<p>   env</p>
<p>   #查询变量</p>
<p>   unset 变量名</p>
<p>   #删除变量</p>
<ol start="3">
<li><p>系统常见环境变量</p>
<ul>
<li><p>PATH:系统查找命令的路径</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># echo $PATH</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>PATH=”$PATH”:/root/sh<br>#PATH 变量叠加</p>
</li>
<li><p>PS1:定义系统提示符的变量<br>\d:  显示日期,格式为“星期 月 日”<br>\h:  显示简写主机名。如默认主机名“localhost”<br>\t:   显示24小时制时间,格式为“HH:MM:SS”<br>\T:  显示12小时制时间,格式为“HH:MM:SS”<br>\A:  显示24小时制时间,格式为“HH:MM”<br>\u:  显示当前用户名<br>\w:  显示当前所在目录的完整名称<br>\W:  显示当前所在目录的最后一个目录<br>\#:  执行的第几个命令<br>\$:  提示符。如果是root用户会显示提示符为“#”,如果是普通用户会显示提  示符为“​$”</p>
</li>
</ul>
<p>举例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># PS1='[\u@\t \w]\$ '</span></span><br><span class="line">[root@04:50:08 /usr/<span class="built_in">local</span>/src]<span class="comment">#PS1='[\u@\@ \h \# \W]\$‘</span></span><br><span class="line">[root@04:53 上午 localhost 31 src]<span class="comment">#PS1='[\u@\h \W]\$ '</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<h4 id="位置参数变量"><a href="#位置参数变量" class="headerlink" title="位置参数变量"></a>位置参数变量</h4><table>
<thead>
<tr>
<th>位置参数变量</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>$ｎ</td>
<td>n为数字,$0代表命令本身,​$1-$9代表第一到第九个参数,十以上的参数需要用大括号包含,如${10}</td>
</tr>
<tr>
<td>$*</td>
<td>这个变量代表命令行中所有的参数,$*把所有的参数看成一个整体</td>
</tr>
<tr>
<td>$0</td>
<td>这个变量也代表命令行中所有的参数,不过$@把每个参数区分对待</td>
</tr>
<tr>
<td>$#</td>
<td>这个变量代表命令行中所有参数的个数</td>
</tr>
</tbody></table>
<p>例子：</p>
<ul>
<li><p>例子1:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line">  num1=<span class="variable">$1</span></span><br><span class="line">  num2=<span class="variable">$2</span></span><br><span class="line">  sum=$(( <span class="variable">$num1</span> + <span class="variable">$num2</span>))</span><br><span class="line">  <span class="comment">#变量 sum 的和是 num1 加 num2</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="variable">$sum</span></span><br><span class="line">  <span class="comment">#打印变量 sum 的值</span></span><br></pre></td></tr></table></figure>

<p>例子２：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"A total of <span class="variable">$#</span> parameters"</span></span><br><span class="line"><span class="comment">#使用 $# 代表所有参数的个数</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"The parameters is: $*"</span></span><br><span class="line"><span class="comment">#使用 $* 代表所有的参数</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"The parameters is: <span class="variable">$@</span>"</span></span><br><span class="line"><span class="comment">#使用 $@ 也代表所有参数</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>例子3:$*与$@的区别</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="string">"$*"</span></span><br><span class="line"><span class="comment">#$* 中的所有参数看成是一个整体,所以这个 for 循环只会循环一次</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"The parameters is: <span class="variable">$i</span>"</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">x=1</span><br><span class="line"><span class="keyword">for</span> y <span class="keyword">in</span> <span class="string">"<span class="variable">$@</span>"</span></span><br><span class="line"><span class="comment">#$@ 中的每个参数都看成是独立的,所以“ $@ ”中有几个参数,就会循环几次</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"The parameter<span class="variable">$x</span> is: <span class="variable">$y</span>"</span></span><br><span class="line">x=$(( <span class="variable">$x</span> +1 ))</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h4 id="预定义变量"><a href="#预定义变量" class="headerlink" title="预定义变量"></a>预定义变量</h4><table>
<thead>
<tr>
<th>预定义变量</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>$?</td>
<td>最后一次执行的命令的返回状态。如果这个变量的值为0,证明上一个命令正确执行;如果这个变量的值为非0(具体是哪个数,由命令自己来决定),则证明上一个命令执行不正确了。</td>
</tr>
<tr>
<td>$$</td>
<td>当前进程的进程号(PID)</td>
</tr>
<tr>
<td>$!</td>
<td>后台运行的最后一个进程的进程号(PID)</td>
</tr>
</tbody></table>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line"># Author: shenchao (E-mail: shenchao@lampbrother.net)</span><br><span class="line">echo &quot;The current process is $$&quot;</span><br><span class="line"># 输出当前进程的 PID 。</span><br><span class="line"># 这个 PID 就是 variable.sh 这个脚本执行时,生成的进程的 PID</span><br><span class="line">find /root -name hello.sh &amp;</span><br><span class="line"># 使用 find 命令在 root 目录下查找 hello.sh 文件</span><br><span class="line"># 符号 &amp; 的意思是把命令放入后台执行,工作管理我们在系统管理章节</span><br><span class="line">有详细介绍</span><br><span class="line">echo &quot;The last one Daemon process is $!&quot;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>接收键盘输入</p>
<p>[root@localhost ~]# read [选项] [变量名]<br>选项:<br>-p “提示信息”:　　在等待read输入时,输出提示信息<br>-t 秒数:　　　　　read命令会一直等待用户输入,使用此选项可以指定等待时间<br>-n 字符数:　　　   read命令只接受指定的字符数,就会执行<br>-s:　　　　　　　隐藏输入的数据,适用于机密信息的输入</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># Author: shenchao (E-mail: shenchao@lampbrother.net)</span></span><br><span class="line"><span class="built_in">read</span> -t 30 -p <span class="string">"Please input your name: "</span> name</span><br><span class="line"><span class="comment"># 提示“请输入姓名”并等待 30 秒,把用户的输入保存入变量 name 中</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Name is <span class="variable">$name</span> "</span></span><br><span class="line"><span class="built_in">read</span> -s -t 30 -p <span class="string">"Please enter your age: "</span> age</span><br><span class="line"><span class="comment"># 年龄是隐私,所以我们用“ -s ”选项隐藏输入</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">"\n"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Age is <span class="variable">$age</span> "</span></span><br><span class="line"><span class="built_in">read</span> -n 1 -t 30 -p <span class="string">"Please select your gender[M/F]: "</span> gender</span><br><span class="line"><span class="comment"># 使用“ -n 1 ”选项只接收一个输入字符就会执行(都不用输入回车)</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">"\n"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Sex is <span class="variable">$gender</span>"</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="Bash的运算符"><a href="#Bash的运算符" class="headerlink" title="Bash的运算符"></a>Bash的运算符</h3><h4 id="数值运算与运算符"><a href="#数值运算与运算符" class="headerlink" title="数值运算与运算符"></a>数值运算与运算符</h4><ol>
<li><p>declare声明变量类型<br>[root@localhost ~]# declare [+/-][选项] 变量名<br>选项:<br>-:   给变量设定类型属性<br>+:   取消变量的类型属性<br>-i:   将变量声明为整数型(integer)<br>-x:   将变量声明为环境变量<br>-p:   显示指定变量的被声明的类型</p>
</li>
<li><p>数值运算</p>
<ul>
<li><p>方法一：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># aa=11</span></span><br><span class="line">[root@localhost ~]<span class="comment"># bb=22</span></span><br><span class="line"><span class="comment"># 给变量 aa 和 bb 赋值</span></span><br><span class="line">[root@localhost ~]<span class="comment"># declare -i cc=$aa+$bb</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>方法二:expr或let数值运算工具</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># aa=11</span></span><br><span class="line">[root@localhost ~]<span class="comment"># bb=22</span></span><br><span class="line"><span class="comment"># 给变量 aa 和变量 bb 赋值</span></span><br><span class="line">[root@localhost ~]<span class="comment"># dd=$(expr $aa + $bb)</span></span><br><span class="line"><span class="comment">#dd 的值是 aa 和 bb 的和。注意“ + ”号左右两</span></span><br><span class="line">侧必须有空格</span><br></pre></td></tr></table></figure>
</li>
<li><p>方法3:“$((运算式))”或“$[运算式]”</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># aa=11</span></span><br><span class="line">[root@localhost ~]<span class="comment"># bb=22</span></span><br><span class="line">[root@localhost ~]<span class="comment"># ff=$(( $aa+$bb ))</span></span><br><span class="line">[root@localhost ~]<span class="comment"># gg=$[ $aa+$bb ]</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>运算符</p>
<table>
<thead>
<tr>
<th>优先级</th>
<th>运算符</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>13</td>
<td>-, +</td>
<td>单目负、单目正</td>
</tr>
<tr>
<td>12</td>
<td>!, ~</td>
<td>逻辑非、按位取反或补码</td>
</tr>
<tr>
<td>11</td>
<td>* , / , %</td>
<td>乘、除、取模</td>
</tr>
<tr>
<td>10</td>
<td>+, -</td>
<td>加、减</td>
</tr>
<tr>
<td>9</td>
<td>&lt;&lt; , &gt;&gt;</td>
<td>按位左移、按位右移</td>
</tr>
<tr>
<td>8</td>
<td>&lt; =, &gt; =, &lt; , &gt;</td>
<td>小于或等于、大于或等于、小于、大于</td>
</tr>
<tr>
<td>7</td>
<td>== , !=</td>
<td>等于、不等于</td>
</tr>
<tr>
<td>6</td>
<td>&amp;</td>
<td>按位与</td>
</tr>
<tr>
<td>5</td>
<td>^</td>
<td>按位异或</td>
</tr>
<tr>
<td>4</td>
<td>|</td>
<td>按位或</td>
</tr>
<tr>
<td>3</td>
<td>&amp;&amp;</td>
<td>逻辑与</td>
</tr>
<tr>
<td>2</td>
<td>||</td>
<td>逻辑或</td>
</tr>
<tr>
<td>1</td>
<td>=,+=,-=,*=,/=,%=,&amp;=, ^=,=, &lt;&lt;=, &gt;&gt;=</td>
<td>赋值、运算且赋值</td>
</tr>
</tbody></table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># aa=$(( (11+3)*3/2 ))</span></span><br><span class="line"><span class="comment"># 虽然乘和除的优先级高于加,但是通过小括号可以调整运算优先级</span></span><br><span class="line">[root@localhost ~]<span class="comment"># bb=$(( 14%3 ))</span></span><br><span class="line"><span class="comment">#14 不能被 3 整除,余数是 2</span></span><br><span class="line">[root@localhost ~]<span class="comment"># cc=$(( 1 &amp;&amp; 0 ))</span></span><br><span class="line"><span class="comment"># 逻辑与运算只有想与的两边都是 1 ,与的结果才是 1 ,否则</span></span><br><span class="line">与的结果是 0</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h4 id="变量测试与内容替换"><a href="#变量测试与内容替换" class="headerlink" title="变量测试与内容替换"></a>变量测试与内容替换</h4><table>
<thead>
<tr>
<th>变量置换方式</th>
<th>变量y没有设置</th>
<th>变量y为空值</th>
<th>变量y设置值</th>
</tr>
</thead>
<tbody><tr>
<td>x=${y-新值}</td>
<td>x=新值</td>
<td>x为空</td>
<td>x=$y</td>
</tr>
<tr>
<td>x=${y:-新值}</td>
<td>x=新值</td>
<td>x=新值</td>
<td>x=$y</td>
</tr>
<tr>
<td>x=${y+新值}</td>
<td>x为空</td>
<td>x=新值</td>
<td>x=新值</td>
</tr>
<tr>
<td>x=${y:+新值}</td>
<td>x为空</td>
<td>x为空</td>
<td>x=新值</td>
</tr>
<tr>
<td>x=${y=新值}</td>
<td>x=新值<br>y=新值</td>
<td>x为空<br>y值不变</td>
<td>x=$y<br>y值不变</td>
</tr>
<tr>
<td>x=${y:=新值}</td>
<td>x=新值<br>y=新值</td>
<td>x=新值<br>y=新值</td>
<td>x=$y<br>y值不变</td>
</tr>
<tr>
<td>x=${y?新值}</td>
<td>新值输出到标准错误输出(就是屏幕)</td>
<td>x为空</td>
<td>x=$y</td>
</tr>
<tr>
<td>x=${y:?新值}</td>
<td>新值输出到标准错误输出</td>
<td>新值输出到标准错误输出</td>
<td>x=$y</td>
</tr>
</tbody></table>
<p>例子：测试x=${y-新值}</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># unset y</span></span><br><span class="line"><span class="comment"># 删除变量 y</span></span><br><span class="line">[root@localhost ~]<span class="comment"># x=$&#123;y-new&#125;</span></span><br><span class="line"><span class="comment"># 进行测试</span></span><br><span class="line">[root@localhost ~]<span class="comment"># echo $x</span></span><br><span class="line">new</span><br><span class="line"><span class="comment"># 因为变量 y 不存在,所以 x=new</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># y=""</span></span><br><span class="line"><span class="comment"># 给变量 y 赋值为空</span></span><br><span class="line">[root@localhost ~]<span class="comment"># x=$&#123;y-new&#125;</span></span><br><span class="line"><span class="comment"># 进行测试</span></span><br><span class="line">[root@localhost ~]<span class="comment"># echo $x</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># y=old</span></span><br><span class="line"><span class="comment"># 给变量 y 赋值</span></span><br><span class="line">[root@localhost ~]<span class="comment"># x=$&#123;y-new&#125;</span></span><br><span class="line"><span class="comment"># 进行测试</span></span><br><span class="line">[root@localhost ~]<span class="comment"># echo $x</span></span><br><span class="line">old</span><br></pre></td></tr></table></figure>

<h3 id="环境变量配置文件"><a href="#环境变量配置文件" class="headerlink" title="环境变量配置文件"></a>环境变量配置文件</h3><h4 id="环境变量配置文件简介"><a href="#环境变量配置文件简介" class="headerlink" title="环境变量配置文件简介"></a>环境变量配置文件简介</h4><ol>
<li><p>source命令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# source 配置文件</span><br><span class="line">或</span><br><span class="line">[root@localhost ~]# . 配置文件</span><br></pre></td></tr></table></figure>
</li>
<li><p>环境变量配置文件简介</p>
<ul>
<li>环境变量配置文件中主要是定义对系统的操作环境生效的系统默认环境变量,比如PATH、HISTSIZE、PS1、HOSTNAME等默认环境变量。</li>
<li>/etc/profile</li>
<li>/etc/profile.d/*.sh</li>
<li>~/.bash_profile</li>
<li>~/.bashrc</li>
<li>/etc/bashrc</li>
</ul>
</li>
</ol>
<h4 id="环境变量配置文件作用"><a href="#环境变量配置文件作用" class="headerlink" title="环境变量配置文件作用"></a>环境变量配置文件作用</h4><ul>
<li>/etc/profile</li>
<li>/etc/profile.d/*.sh</li>
<li>~/.bash_profile</li>
<li>~/.bashrc</li>
<li>/etc/bashrc</li>
</ul>
<p><img src="https://pic2.superbed.cn/item/5dea16c2f1f6f81c5003cfa2.png" alt></p>
<ul>
<li><p>/etc/profile的作用:</p>
<ul>
<li>USER变量:</li>
<li>LOGNAME变量:</li>
<li>MAIL变量:</li>
<li>PATH变量:</li>
<li>HOSTNAME变量:</li>
<li>HISTSIZE变量:</li>
<li>umask:</li>
<li>调用/etc/profile.d/*.sh文件</li>
</ul>
</li>
<li><p>~/.bash_profile的作用</p>
<ul>
<li>调用了~/.bashrc文件。</li>
<li>在PATH变量后面加入了“:$HOME/bin”<br>这个目录</li>
</ul>
</li>
<li><p>~/.bashrc的作用</p>
<ul>
<li>定义默认别名</li>
<li>调用/etc/bashrc</li>
</ul>
</li>
<li><p>/etc/bashrc的作用</p>
<ul>
<li>PS1变量</li>
<li>umask</li>
<li>PATH变量</li>
<li>调用/etc/profile.d/*.sh文件</li>
</ul>
</li>
</ul>
<h4 id="其他配置文件和登录信息"><a href="#其他配置文件和登录信息" class="headerlink" title="其他配置文件和登录信息"></a>其他配置文件和登录信息</h4><ul>
<li><p>注销时生效的环境变量配置文件<br>~/.bash_logout</p>
</li>
<li><p>其他配置文件<br>~/bash_history</p>
</li>
<li><p>Shell登录信息</p>
<ul>
<li><p>本地终端欢迎信息: /etc/issue</p>
<table>
<thead>
<tr>
<th>转义符</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>\d</td>
<td>显示当前系统日期</td>
</tr>
<tr>
<td>\s</td>
<td>显示操作系统名称</td>
</tr>
<tr>
<td>\l</td>
<td>显示登录的终端号,这个比较常用。</td>
</tr>
<tr>
<td>\m</td>
<td>显示硬件体系结构,如i386、i686等</td>
</tr>
<tr>
<td>\n</td>
<td>显示主机名</td>
</tr>
<tr>
<td>\o</td>
<td>显示域名</td>
</tr>
<tr>
<td>\r</td>
<td>显示内核版本</td>
</tr>
<tr>
<td>\t</td>
<td>显示当前系统时间</td>
</tr>
<tr>
<td>\u</td>
<td>显示当前登录用户的序列号</td>
</tr>
</tbody></table>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>远程终端欢迎信息: /etc/issue.net</p>
<ul>
<li>转义符在/etc/issue.net文件中不能使用</li>
<li>是否显示此欢迎信息,由ssh的配置文件/etc/ssh/sshd_config决定,加入“Banner/etc/issue.net”行才能显示(记得重启SSH服务)</li>
</ul>
</li>
<li><p>登陆后欢迎信息:/etc/motd<br>不管是本地登录,还是远程登录,都可以显示此欢迎信息</p>
</li>
</ul>
<h2 id="Shell编程"><a href="#Shell编程" class="headerlink" title="Shell编程"></a>Shell编程</h2><h3 id="基础正则表达式"><a href="#基础正则表达式" class="headerlink" title="基础正则表达式"></a>基础正则表达式</h3><h4 id="正则表达式与通配符"><a href="#正则表达式与通配符" class="headerlink" title="正则表达式与通配符"></a>正则表达式与通配符</h4><ul>
<li>正则表达式用来在文件中匹配符合条件的字符串,正则是包含匹配。grep、awk、sed等命令可以支持正则表达式。</li>
<li>通配符用来匹配符合条件的文件名,通配符是完全匹配。ls、find、cp这些命令不支持正则表达式,所以只能使用shell自己的通配符来进行匹配了。</li>
</ul>
<h4 id="基础正则表达式-1"><a href="#基础正则表达式-1" class="headerlink" title="基础正则表达式"></a>基础正则表达式</h4><table>
<thead>
<tr>
<th>元字符</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>*</td>
<td>前一个字符匹配0次或任意多次。</td>
</tr>
<tr>
<td>.</td>
<td>匹配除了换行符外任意一个字符。</td>
</tr>
<tr>
<td>^</td>
<td>匹配行首。例如:^hello会匹配以hello开头的行。</td>
</tr>
<tr>
<td>$</td>
<td>匹配行尾。例如:hello&amp;会匹配以hello结尾的行。</td>
</tr>
<tr>
<td>[]</td>
<td>匹配中括号中指定的任意一个字符,只匹配一个字符。<br>例如:[aoeiu] 匹配任意一个元音字母,[0-9] 匹配任意一位<br>数字, [a-z][0-9]匹配小写字和一位数字构成的两位字符。</td>
</tr>
<tr>
<td>[^]</td>
<td>匹配除中括号的字符以外的任意一个字符。例如:[^0-9] 匹配<br>任意一位非数字字符,[^a-z] 表示任意一位非小写字母。</td>
</tr>
<tr>
<td>\</td>
<td>转义符。用于取消讲特殊符号的含义取消。</td>
</tr>
<tr>
<td>\{n\}</td>
<td>表示其前面的字符恰好出现n次。例如:[0-9]\{4\} 匹配4位数<br>字,[1][3-8][0-9]{9} 匹配手机号码。</td>
</tr>
<tr>
<td>\{n,\}</td>
<td>表示其前面的字符出现不小于n次。例如: [0-9]\{2,\} 表示两<br>位及以上的数字。</td>
</tr>
<tr>
<td>\{n,m\}</td>
<td>表示其前面的字符至少出现n次,最多出现m次。例如: [a-<br>z]\{6,8\} 匹配6到8位的小写字母。</td>
</tr>
</tbody></table>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">“*”前一个字符匹配0次,或任意多次:</span><br><span class="line">grep &quot;a*&quot; test_rule.txt</span><br><span class="line"># 匹配所有内容,包括空白行</span><br><span class="line">grep &quot;aa*&quot; test_rule.txt</span><br><span class="line"># 匹配至少包含有一个 a 的行</span><br><span class="line">grep &quot;aaa*&quot; test_rule.txt</span><br><span class="line">匹配最少包含两个连续a的字符串</span><br><span class="line">grep &quot;aaaaa*&quot; test_rule.txt</span><br><span class="line">#则会匹配最少包含四个个连续a的字符串</span><br><span class="line"></span><br><span class="line">“.” 匹配除了换行符外任意一个字符:</span><br><span class="line">grep &quot;s..d&quot; test_rule.txt</span><br><span class="line"># “ s..d ”会匹配在 s 和 d 这两个字母之间一定有两个字符的单词</span><br><span class="line">grep &quot;s.*d&quot; test_rule.txt</span><br><span class="line"># 匹配在 s 和 d 字母之间有任意字符</span><br><span class="line">grep &quot;.*&quot; test_rule.txt</span><br><span class="line"># 匹配所有内容</span><br><span class="line"></span><br><span class="line">“^”匹配行首,“$”匹配行尾:</span><br><span class="line">grep &quot;^M&quot; test_rule.txt</span><br><span class="line"># 匹配以大写“ M ”开头的行</span><br><span class="line">grep &quot;n$&quot; test_rule.txt</span><br><span class="line"># 匹配以小写“ n ”结尾的行</span><br><span class="line">grep &quot;^M.*n$&quot; test_rule.txt</span><br><span class="line"># 匹配以大写“ M ”开头,以小写“ n ”结尾的行</span><br><span class="line">grep -n &quot;^$&quot; test_rule.txt</span><br><span class="line"># 会匹配空白行</span><br><span class="line"></span><br><span class="line">“[]” 匹配中括号中指定的任意一个:</span><br><span class="line">字符,只匹配一个字符</span><br><span class="line">grep &quot;s[ao]id&quot; test_rule.txt</span><br><span class="line"># 匹配 s 和 i 字母中,要不是 a 、要不是 o</span><br><span class="line">grep &quot;[0-9]&quot; test_rule.txt</span><br><span class="line"># 匹配任意一个数字</span><br><span class="line">grep &quot;^[a-z]&quot; test_rule.txt</span><br><span class="line"># 匹配用小写字母开头的行</span><br><span class="line"></span><br><span class="line">“[^]” 匹配除中括号的字符以外的:</span><br><span class="line">任意一个字符</span><br><span class="line">grep &quot;^[^a-z]&quot; test_rule.txt</span><br><span class="line"># 匹配不用小写字母开头的行</span><br><span class="line">grep &quot;^[^a-zA-Z]&quot; test_rule.txt</span><br><span class="line"># 匹配不用字母开头的行</span><br><span class="line"></span><br><span class="line">“\” 转义符:</span><br><span class="line">grep &quot;\.$&quot; test_rule.txt</span><br><span class="line"># 匹配使用“ . ”结尾的行</span><br><span class="line"></span><br><span class="line">“\&#123;n\&#125;”表示其前面的字符恰好出现n次:</span><br><span class="line">grep &quot;a\&#123;3\&#125;&quot; test_rule.txt</span><br><span class="line"># 匹配 a 字母连续出现三次的字符串</span><br><span class="line">grep &quot;[0-9]\&#123;3\&#125;&quot; test_rule.txt</span><br><span class="line"># 匹配包含连续的三个数字的字符串</span><br><span class="line"></span><br><span class="line">“\&#123;n,\&#125;”表示其前面的字符出现不小于n次</span><br><span class="line">grep &quot;^[0-9]\&#123;3,\&#125;[a-z]&quot; test_rule.txt</span><br><span class="line"># 匹配最少用连续三个数字开头的行</span><br><span class="line"></span><br><span class="line">“\&#123;n,m\&#125;”匹配其前面的字符至少出现n次,</span><br><span class="line">最多出现m次</span><br><span class="line">grep &quot;sa\&#123;1,3\&#125;i&quot; test_rule.txt</span><br><span class="line"># 匹配在字母 s 和字母 i 之间有最少一个 a ,最多三个 a</span><br></pre></td></tr></table></figure>

<h3 id="字符截取命令"><a href="#字符截取命令" class="headerlink" title="字符截取命令"></a>字符截取命令</h3><h4 id="cut字段提取命令"><a href="#cut字段提取命令" class="headerlink" title="cut字段提取命令"></a>cut字段提取命令</h4><p>[root@localhost ~]# cut [选项] 文件名<br>选项:<br>-f 列号:        提取第几列<br>-d 分隔符:   按照指定分隔符分割列</p>
<p>eg:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># cut -f 2 student.txt</span></span><br><span class="line">[root@localhost ~]<span class="comment"># cut -f 2,3 student.txt</span></span><br><span class="line">[root@localhost ~]<span class="comment"># cut -d ":" -f 1,3 etc/passwd</span></span><br></pre></td></tr></table></figure>

<p>cut命令的局限</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># df -h | cut -d " " -f 1,3</span></span><br></pre></td></tr></table></figure>

<h4 id="printf命令"><a href="#printf命令" class="headerlink" title="printf命令"></a>printf命令</h4><p>printf  ’输出类型输出格式’  输出内容<br>输出类型:<br>%ns:       输出字符串。n是数字指代输出几个字符<br>%ni:        输出整数。n是数字指代输出几个数字<br>%m.nf:   位数和小数位数。如%8.2f代表共输出8位数,其中2位是小数,6位是整数。</p>
<p>输出格式:<br>\a:         输出警告声音<br>\b:         输出退格键,也就是Backspace键<br>\f:          清除屏幕<br>\n:         换行<br>\r:          回车,也就是Enter键<br>\t:          水平输出退格键,也就是Tab键<br>\v:          垂直输出退格键,也就是Tab键</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># printf %s 1 2 3 4 5 6</span></span><br><span class="line">[root@localhost ~]<span class="comment"># printf %s %s %s 1 2 3 4 5 6</span></span><br><span class="line">[root@localhost ~]<span class="comment"># printf '%s %s %s' 1 2 3 4 5 6</span></span><br><span class="line">[root@localhost ~]<span class="comment"># printf '%s %s %s\n' 1 2 3 4 5 6</span></span><br><span class="line">[root@localhost ~]<span class="comment"># vi student.txt</span></span><br><span class="line">ID Name   PHP Linux MySQL Average</span><br><span class="line">1  Liming 82  95    86    87.66</span><br><span class="line">2  Sc     74  96    87    85.66</span><br><span class="line">3  Gao    99  83    93    91.66</span><br><span class="line">[root@localhost ~]<span class="comment"># printf '%s' $(cat student.txt)</span></span><br><span class="line"><span class="comment">#不调整输出格式</span></span><br><span class="line">[root@localhost ~]<span class="comment"># printf '%s\t %s\t %s\t %s\t %s\t %s\t \n' $(cat student.txt)</span></span><br><span class="line"><span class="comment">#调整格式输出</span></span><br></pre></td></tr></table></figure>

<p>在awk命令的输出中支持print和printf命令</p>
<ul>
<li>print:print会在每个输出之后自动加入一个换行符(Linux默认没有print命令)</li>
<li>printf:printf是标准格式输出命令,并不会自动加入换行符,如果需要换行,需要手工加入换行符</li>
</ul>
<h4 id="awk命令"><a href="#awk命令" class="headerlink" title="awk命令"></a>awk命令</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># awk ‘条件1&#123;动作1&#125; 条件2&#123;动作2&#125;...’ 文件名</span></span><br><span class="line">----条件(Pattern):</span><br><span class="line">一般使用关系表达式作为条件</span><br><span class="line">x &gt; 10  判断变量 x是否大于10</span><br><span class="line">x&gt;=10   大于等于</span><br><span class="line">x&lt;=10   小于等于</span><br><span class="line">----动作(Action):</span><br><span class="line">格式化输出</span><br><span class="line">流程控制语句</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># vi student.txt</span></span><br><span class="line">ID Name   PHP Linux MySQL Average</span><br><span class="line">1  Liming 82  95    86    87.66</span><br><span class="line">2  Sc     74  96    87    85.66</span><br><span class="line">3  Gao    99  83    93    91.66</span><br><span class="line">[root@localhost ~]<span class="comment"># awk '&#123;printf $2 "\t" $6 "\n"&#125;' student.txt</span></span><br><span class="line">[root@localhost ~]<span class="comment"># df -h | awk '&#123;print $1 "\t" $3&#125;'</span></span><br></pre></td></tr></table></figure>

<p>BEGIN</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># awk 'BEGIN&#123;printf "This is a transcript \n" &#125;&#123;printf $2 "\t" $6 "\n"&#125;' student.txt</span></span><br></pre></td></tr></table></figure>

<p>END</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># awk 'END&#123;printf "The End \n" &#125; &#123;printf $2 "\t" $6 "\n"&#125;' student.txt</span></span><br></pre></td></tr></table></figure>

<p>FS内置变量</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cat /etc/passwd | grep "/bin/bash" | \awk 'BEGIN &#123;FS=":"&#125; &#123;printf $1 "\t" $3 "\n"&#125;'</span></span><br></pre></td></tr></table></figure>

<p>关系运算符</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># cat student.txt | grep -v Name | \awk '$6 &gt;= 87 &#123;printf $2 "\n" &#125;'</span></span><br></pre></td></tr></table></figure>

<h4 id="sed命令"><a href="#sed命令" class="headerlink" title="sed命令"></a>sed命令</h4><blockquote>
<p>sed 是一种几乎包括在所有 UNIX 平台( 包括 Linux)的轻量级流编辑器。sed主要 是用来将数据进行选取、替换、删除、新 增的命令。</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># sed [选项] ‘[动作]’ 文件名</span></span><br><span class="line">选项:</span><br><span class="line">-n:   一般sed命令会把所有数据都输出到屏幕 ,如果加入此选择,则只会把经过         sed命令处理的行输出到屏幕</span><br><span class="line">-e:   允许对输入数据应用多条sed命令编辑</span><br><span class="line">-i:   用sed的修改结果直接修改读取数据的文件,而不是由屏幕输出</span><br><span class="line">动作:</span><br><span class="line">a\:   追加,在当前行后添加一行或多行。添加多行时,除最后 一行</span><br><span class="line">      外,每行末尾需要用“\”代表数据未完结。</span><br><span class="line">c\:   行替换,用c后面的字符串替换原数据行,替换多行时,除最</span><br><span class="line">      后一行外,每行末尾需用“\”代表数据未完结。</span><br><span class="line">i\:   插入,在当期行前插入一行或多行。插入多行时,除最后 一行</span><br><span class="line">      ,每行末尾需要用“\”代表数据未完结。</span><br><span class="line">d:    删除,删除指定的行。</span><br><span class="line">p:    打印,输出指定的行。</span><br><span class="line">s:    字串替换,用一个字符串替换另外一个字符串。格式为“行范</span><br><span class="line">      围s/旧字串/新字串/g”(和vim中的替换格式类似) 。</span><br></pre></td></tr></table></figure>

<p>学生成绩表</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># vi student.txt</span></span><br><span class="line">ID Name   PHP Linux MySQL Average</span><br><span class="line">1  Liming 82  95    86    87.66</span><br><span class="line">2  Sc     74  96    87    85.66</span><br><span class="line">3  Gao    99  83    93    91.66</span><br></pre></td></tr></table></figure>

<p>行数据操作</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># sed '2p' student.txt</span></span><br><span class="line"><span class="comment">#查看文件的第二行</span></span><br><span class="line">[root@localhost ~]<span class="comment"># sed -n '2p' student.txt</span></span><br><span class="line">[root@localhost ~]<span class="comment"># sed '2,4d' student.txt</span></span><br><span class="line"><span class="comment"># 删除第二行到第四行的数据,但不修改文件本身</span></span><br><span class="line">[root@localhost ~]<span class="comment"># sed '2a hello' student.txt</span></span><br><span class="line"><span class="comment"># 在第二行后追加 hello</span></span><br><span class="line">[root@localhost ~]<span class="comment"># sed '2i hello \world' student.txt</span></span><br><span class="line"><span class="comment"># 在第二行前插入两行数据</span></span><br><span class="line"><span class="comment"># sed '2c No such person‘ student.txt</span></span><br><span class="line"><span class="comment"># 数据替换</span></span><br></pre></td></tr></table></figure>

<p>字符串替换</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># sed ‘s/旧字串/新字串/g’ 文件名</span></span><br><span class="line"><span class="comment"># sed '3s/74/99/g' student.txt</span></span><br><span class="line"><span class="comment"># 在第三行中,把 74 换成 99</span></span><br><span class="line"><span class="comment">#sed -i '3s/74/99/g' student.txt</span></span><br><span class="line"><span class="comment">#sed操作的数据直接写入文件</span></span><br><span class="line"><span class="comment"># sed -e 's/Liming//g ; s/Gao//g' student.txt</span></span><br><span class="line"><span class="comment"># 同时把“ Liming ”和“ Gao ”替换为空</span></span><br></pre></td></tr></table></figure>

<h3 id="字符处理命令"><a href="#字符处理命令" class="headerlink" title="字符处理命令"></a>字符处理命令</h3><h4 id="排序命令sort"><a href="#排序命令sort" class="headerlink" title="排序命令sort"></a>排序命令sort</h4><p>[root@localhost ~]# sort [选项] 文件名<br>选项:<br>-f:               忽略大小写<br>-n:             以数值型进行排序,默认使用字符串型排序<br>-r:              反向排序<br>-t:              指定分隔符,默认是分隔符是制表符<br>-k n[,m]:   按照指定的字段范围排序。从第n字段开始,m字段结束(默认到行尾)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># sort /etc/passwd</span></span><br><span class="line"><span class="comment"># 排序用户信息文件</span></span><br><span class="line">[root@localhost ~]<span class="comment"># sort -r /etc/passwd</span></span><br><span class="line"><span class="comment"># 反向排序</span></span><br><span class="line">[root@localhost ~]<span class="comment"># sort -t ":" -k 3,3 /etc/passwd</span></span><br><span class="line"><span class="comment"># 指定分隔符是“:”,用第三字段开头,第三字段结尾排</span></span><br><span class="line">序,就是只用第三字段排序</span><br><span class="line">[root@localhost ~]<span class="comment"># sort -n -t ":" -k 3,3 /etc/passwd</span></span><br></pre></td></tr></table></figure>

<h4 id="统计命令wc"><a href="#统计命令wc" class="headerlink" title="统计命令wc"></a>统计命令wc</h4><p>[root@localhost ~]# wc [选项] 文件名<br>选项:<br>-l:     只统计行数<br>-w:   只统计单词数<br>-m:   只统计字符数</p>
<h3 id="条件判断"><a href="#条件判断" class="headerlink" title="条件判断"></a>条件判断</h3><ol>
<li><p>按照文件类型进行判断</p>
<table>
<thead>
<tr>
<th>测试选项</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>-b 文件</td>
<td>判断该文件是否存在,并且是否为块设备文件(是块设备文件 为真)</td>
</tr>
<tr>
<td>-c 文件</td>
<td>判断该文件是否存在,并且是否为字符设备文件(是字符设备 文件为真)</td>
</tr>
<tr>
<td>-d 文件</td>
<td>判断该文件是否存在,并且是否为目录文件(是目录为真)</td>
</tr>
<tr>
<td>-e 文件</td>
<td>判断该文件是否存在(存在为真)</td>
</tr>
<tr>
<td>-f 文件</td>
<td>判断该文件是否存在,并且是否为普通文件(是普通文件为真)</td>
</tr>
<tr>
<td>-L 文件</td>
<td>判断该文件是否存在,并且是否为符号链接文件(是符号链接 文件为真)</td>
</tr>
<tr>
<td>-p 文件</td>
<td>判断该文件是否存在,并且是否为管道文件(是管道文件为真)</td>
</tr>
<tr>
<td>-s 文件</td>
<td>判断该文件是否存在,并且是否为非空(非空为真)</td>
</tr>
<tr>
<td>-S 文件</td>
<td>判断该文件是否存在,并且是否为套接字文件(是套接字文件 为真)</td>
</tr>
</tbody></table>
<p> 两种判断格式</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># test -e /root/install.log</span></span><br><span class="line">[root@localhost ~]<span class="comment"># [ -e /root/install.log ]</span></span><br><span class="line">[ -d /root ] &amp;&amp; <span class="built_in">echo</span> <span class="string">"yes"</span> || <span class="built_in">echo</span> <span class="string">"no"</span></span><br><span class="line"><span class="comment"># 第一个判断命令如果正确执行,则打印“ yes ”,否则打</span></span><br><span class="line">印“ no ”</span><br></pre></td></tr></table></figure>



</li>
</ol>
<ol start="2">
<li><p>按照文件权限进行判断</p>
<table>
<thead>
<tr>
<th>测试选项</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>-r</td>
<td>判断该文件是否存在,并且是否该文件拥有读权限(有读 权限为真)</td>
</tr>
<tr>
<td>-w</td>
<td>判断该文件是否存在,并且是否该文件拥有写权限(有写 权限为真)</td>
</tr>
<tr>
<td>-x</td>
<td>判断该文件是否存在,并且是否该文件拥有执行权限(有执行权限为真)</td>
</tr>
<tr>
<td>-u</td>
<td>判断该文件是否存在,并且是否该文件拥有SUID权限(有SUID权限为真)</td>
</tr>
<tr>
<td>-g</td>
<td>判断该文件是否存在,并且是否该文件拥有SGID权限(有SGID权限为真)</td>
</tr>
<tr>
<td>-k</td>
<td>判断该文件是否存在,并且是否该文件拥有SBit权限(有SBit权限为真)</td>
</tr>
</tbody></table>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[ -w student.txt ] &amp;&amp; echo &quot;yes&quot; || echo &quot;no&quot;</span><br><span class="line"># 判断文件是拥有写权限的</span><br></pre></td></tr></table></figure>
</li>
<li><p>两个文件之间进行比较</p>
<table>
<thead>
<tr>
<th>测试选项</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>文件1 -nt 文件2</td>
<td>判断文件1的修改时间是否比文件2的新(如果新则为真)</td>
</tr>
<tr>
<td>文件1 -ot 文件2</td>
<td>判断文件1的修改时间是否比文件2的旧(如果旧则为真)</td>
</tr>
<tr>
<td>文件1 -ef 文件2</td>
<td>判断文件1是否和文件2的Inode号一致,可以理解为两个文件是否为同一个文件。这个判断用于判断硬链接是很好的方法</td>
</tr>
</tbody></table>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ln /root/student.txt /tmp/stu.txt</span><br><span class="line"># 创建个硬链接吧</span><br><span class="line">[ /root/student.txt -ef /tmp/stu.txt ] &amp;&amp; echo &quot;yes&quot; || echo &quot;no&quot;</span><br><span class="line">yes</span><br><span class="line"># 用 test 测试下,果然很有用</span><br></pre></td></tr></table></figure>
</li>
<li><p>两个整数之间比较</p>
<table>
<thead>
<tr>
<th>测试选项</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>整数1 -eq 整数２</td>
<td>判断整数1是否和整数2相等(相等为真)</td>
</tr>
<tr>
<td>整数1 -ne 整数２</td>
<td>判断整数1是否和整数2不相等(不相等位置)</td>
</tr>
<tr>
<td>整数1 -gt 整数2</td>
<td>判断整数1是否大于整数2(大于为真)</td>
</tr>
<tr>
<td>整数1 -lt 整数2</td>
<td>判断整数1是否小于整数2(小于位置)</td>
</tr>
<tr>
<td>整数1 -ge 整数2</td>
<td>判断整数1是否大于等于整数2(大于等于为真)</td>
</tr>
<tr>
<td>整数1 -le 整数2</td>
<td>判断整数1是否小于等于整数2(小于等于为真)</td>
</tr>
</tbody></table>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[ 23 -ge 22 ] &amp;&amp; echo &quot;yes&quot; || echo &quot;no&quot;</span><br><span class="line">yes</span><br><span class="line"># 判断 23 是否大于等于 22 ,当然是了</span><br><span class="line">[ 23 -le 22 ] &amp;&amp; echo &quot;yes&quot; || echo &quot;no&quot;</span><br><span class="line">no</span><br><span class="line"># 判断 23 是否小于等于 22 ,当然不是了</span><br></pre></td></tr></table></figure>
</li>
<li><p>字符串的判断</p>
<table>
<thead>
<tr>
<th>测试选项</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>-z 字符串</td>
<td>判断字符串是否为空(为空返回真)</td>
</tr>
<tr>
<td>-n 字符串</td>
<td>判断字符串是否为非空(非空返回真)</td>
</tr>
<tr>
<td>字串1 ==字串2</td>
<td>判断字符串1是否和字符串2相等(相等返回真)</td>
</tr>
<tr>
<td>字串1 != 字串2</td>
<td>判断字符串1是否和字符串2不相等(不相等返回真)</td>
</tr>
</tbody></table>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">name=sc</span><br><span class="line"># 给 name 变量赋值</span><br><span class="line">[ -z &quot;$name&quot; ] &amp;&amp; echo &quot;yes&quot; || echo &quot;no&quot;</span><br><span class="line">no</span><br><span class="line"># 判断 name 变量是否为空,因为不为空,所</span><br><span class="line">以返回 no</span><br><span class="line">aa=11</span><br><span class="line">bb=22</span><br><span class="line"># 给变量 aa 和变量 bb 赋值</span><br><span class="line">[ &quot;$aa&quot; == &quot;bb&quot; ] &amp;&amp; echo &quot;yes&quot; || echo &quot;no&quot;</span><br><span class="line">no</span><br><span class="line"># 判断两个变量的值是否相等,明显不相等</span><br><span class="line">,所以返回 no</span><br></pre></td></tr></table></figure>
</li>
<li><p>多重条件判断</p>
<table>
<thead>
<tr>
<th>测试选项</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>判断1 -a 判断2</td>
<td>逻辑与,判断1和判断2都成立,最终的结果才为真</td>
</tr>
<tr>
<td>判断1 -o 判断2</td>
<td>逻辑或,判断1和判断2有一个成立,最终的结果就为真</td>
</tr>
<tr>
<td>!判断</td>
<td>逻辑非,使原始的判断式取反</td>
</tr>
</tbody></table>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">aa=11</span><br><span class="line">[ -n &quot;$aa&quot; -a &quot;$aa&quot; -gt 23 ] &amp;&amp; echo &quot;yes&quot; || echo &quot;no&quot;</span><br><span class="line">no</span><br><span class="line"># 判断变量 aa 是否有值,同时判断变量 aa 的是否大于 23</span><br><span class="line"># 因为变量 aa 的值不大于 23 ,所以虽然第一个判断值为真,</span><br><span class="line">返回的结果也是假</span><br><span class="line">aa=24</span><br><span class="line">[ -n &quot;$aa&quot; -a &quot;$aa&quot; -gt 23 ] &amp;&amp; echo &quot;yes&quot; || echo &quot;no&quot;</span><br><span class="line">yes</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="流程控制"><a href="#流程控制" class="headerlink" title="流程控制"></a>流程控制</h3><h4 id="if语句"><a href="#if语句" class="headerlink" title="if语句"></a>if语句</h4><ol>
<li><p>单分支if条件语句</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">if [ 条件判断式 ];then</span><br><span class="line">  程序</span><br><span class="line">fi</span><br><span class="line">或者</span><br><span class="line">if [ 条件判断式 ]</span><br><span class="line">  then</span><br><span class="line">      程序</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<p>单分支条件语句需要注意几个点</p>
<ul>
<li>if语句使用fi结尾,和一般语言使用大括号结尾不同</li>
<li>[ 条件判断式 ]就是使用test命令判断,所以中括号和条件判断式之间必须有空格</li>
<li>then后面跟符合条件之后执行的程序,可以放在[]之后,用“;”分割。也可以换<br>行写入,就不需要“;”了</li>
</ul>
<p>例子:判断分区使用率</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#统计根分区使用率</span></span><br><span class="line"><span class="comment"># Author: finyorko</span></span><br><span class="line">rate=$(df -h | grep <span class="string">"/dev/sda3"</span> | awk <span class="string">'&#123;print $5&#125;'</span> | cut -d <span class="string">"%"</span> -f1)</span><br><span class="line"><span class="comment">#把根分区使用率作为变量值赋予变量 rate</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$rate</span> -ge 80 ]</span><br><span class="line">   <span class="keyword">then</span></span><br><span class="line">       <span class="built_in">echo</span> <span class="string">"Warning! /dev/sda3 is full!!"</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>双分支if条件语句</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> [ 条件判断式 ]</span><br><span class="line">  <span class="keyword">then</span></span><br><span class="line">     条件成立时,执行的程序</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">     条件不成立时,执行的另一个程序</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<p>例子1:备份mysql数据库</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#备份 mysql 数据库。</span></span><br><span class="line"><span class="comment"># Author: finyorko</span></span><br><span class="line">ntpdate asia.pool.ntp.org &amp;&gt;/dev/null</span><br><span class="line"><span class="comment">#同步系统时间</span></span><br><span class="line">date=$(date +%y%m%d)</span><br><span class="line"><span class="comment">#把当前系统时间按照“年月日”格式赋予变量 date</span></span><br><span class="line">size=$(du -sh /var/lib/mysql)</span><br><span class="line"><span class="comment">#统计 mysql 数据库的大小,并把大小赋予 size 变量</span></span><br><span class="line"><span class="keyword">if</span> [ -d /tmp/dbbak ]</span><br><span class="line">	<span class="keyword">then</span></span><br><span class="line">		<span class="built_in">echo</span> <span class="string">"Date : <span class="variable">$date</span>!"</span> &gt; /tmp/dbbak/dbinfo.txt</span><br><span class="line">		<span class="built_in">echo</span> <span class="string">"Data size : <span class="variable">$size</span>"</span> &gt;&gt; /tmp/dbbak/dbinfo.txt</span><br><span class="line">		<span class="built_in">cd</span> /tmp/dbbak</span><br><span class="line">		tar -zcf mysql-lib-<span class="variable">$date</span>.tar.gz /var/lib/mysql &amp;&gt;/dev/null</span><br><span class="line">		rm -rf /tmp/dbbak/dbinfo.txt</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">		mkdir /tmp/dbbak</span><br><span class="line">		<span class="built_in">echo</span> <span class="string">"Date : <span class="variable">$date</span>!"</span> &gt; /tmp/dbbak/dbinfo.txt</span><br><span class="line">		<span class="built_in">echo</span> <span class="string">"Data size : <span class="variable">$size</span>"</span> &gt;&gt; /tmp/dbbak/dbinfo.txt</span><br><span class="line">		<span class="built_in">cd</span> /tmp/dbbak dbinfo.txt</span><br><span class="line">		tar -zcf mysql-lib-<span class="variable">$date</span>.tar.gz /var/lib/mysql dbinfo.txt &amp;&gt;/dev/null</span><br><span class="line">		rm -rf /tmp/dbbak/dbinfo.txt</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<p>例子2:判断apache是否启动</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line"># Author: finyorko</span><br><span class="line">port=$(nmap -sT 192.168.1.156 | grep tcp | grep http | awk &apos;&#123;print $2&#125;&apos;)</span><br><span class="line">#使用nmap命令扫描服务器,并截取apache服务的状态,赋予变量port</span><br><span class="line">if [ &quot;$port&quot; == &quot;open&quot; ]</span><br><span class="line">	then</span><br><span class="line">		echo “$(date) httpd is ok!” &gt;&gt; /tmp/autostart-acc.log</span><br><span class="line">	else</span><br><span class="line">		/etc/rc.d/init.d/httpd start &amp;&gt;/dev/null</span><br><span class="line">		echo &quot;$(date) restart httpd !!&quot; &gt;&gt; /tmp/autostart-err.log</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>
</li>
<li><p>多分支if条件语句</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> [ 条件判断式1 ]</span><br><span class="line">	<span class="keyword">then</span></span><br><span class="line">		当条件判断式1成立时,执行程序1</span><br><span class="line"><span class="keyword">elif</span> [ 条件判断式2 ]</span><br><span class="line">	<span class="keyword">then</span></span><br><span class="line">		当条件判断式2成立时,执行程序2</span><br><span class="line">„省略更多条件 ...</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">	当所有条件都不成立时,最后执行此程序</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#判断用户输入的是什么文件</span></span><br><span class="line"><span class="comment"># Author: finyorko</span></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"Please input a filename: "</span> file</span><br><span class="line"><span class="comment">#接收键盘的输入,并赋予变量 file</span></span><br><span class="line"><span class="keyword">if</span> [ -z <span class="string">"<span class="variable">$file</span>"</span> ]</span><br><span class="line"><span class="comment">#判断 file 变量是否为空</span></span><br><span class="line">	<span class="keyword">then</span></span><br><span class="line">		<span class="built_in">echo</span> <span class="string">"Error,please input a filename"</span></span><br><span class="line">		<span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">elif</span> [ ! -e <span class="string">"<span class="variable">$file</span>"</span> ]</span><br><span class="line"><span class="comment">#判断 file 的值是否存在</span></span><br><span class="line">	<span class="keyword">then</span></span><br><span class="line">		<span class="built_in">echo</span> <span class="string">"Your input is not a file!"</span></span><br><span class="line">		<span class="built_in">exit</span> 2</span><br><span class="line"><span class="keyword">elif</span> [ -f <span class="string">"<span class="variable">$file</span>"</span> ]</span><br><span class="line"><span class="comment">#判断 file 的值是否为普通文件</span></span><br><span class="line">	<span class="keyword">then</span></span><br><span class="line">		<span class="built_in">echo</span> <span class="string">"<span class="variable">$file</span> is a regulare file!"</span></span><br><span class="line"><span class="keyword">elif</span> [ -d <span class="string">"<span class="variable">$file</span>"</span> ]</span><br><span class="line"><span class="comment">#判断 file 的值是否为目录文件</span></span><br><span class="line">	<span class="keyword">then</span></span><br><span class="line">		<span class="built_in">echo</span> <span class="string">"<span class="variable">$file</span> is a directory!"</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">		<span class="built_in">echo</span> <span class="string">"<span class="variable">$file</span> is an other file!"</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>



</li>
</ol>
<h4 id="case语句"><a href="#case语句" class="headerlink" title="case语句"></a>case语句</h4><p>多分支case条件语句</p>
<p>case语句和if…elif…else语句一样都是多分支条件语句,不过和if多分支条件语句不同的是,case语句只能判断一种条件关系,而if语句可以判断多种条件关系。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> $变量名 <span class="keyword">in</span></span><br><span class="line">	<span class="string">"值1"</span>)</span><br><span class="line">		如果变量的值等于值1,则执行程序1</span><br><span class="line">		;;</span><br><span class="line">	<span class="string">"值2"</span>)</span><br><span class="line">		如果变量的值等于值2,则执行程序2</span><br><span class="line">		;;</span><br><span class="line">	...省略其他分支...</span><br><span class="line">	*)</span><br><span class="line">		如果变量的值都不是以上的值,则执行此程序</span><br><span class="line">		;;</span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#判断用户输入</span></span><br><span class="line"><span class="comment"># Author: finyorko</span></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"Please choose yes/no: "</span> -t 30 cho</span><br><span class="line"><span class="keyword">case</span> <span class="variable">$cho</span> <span class="keyword">in</span></span><br><span class="line">	<span class="string">"yes"</span>)</span><br><span class="line">		<span class="built_in">echo</span> <span class="string">"Your choose is yes!"</span></span><br><span class="line">		;;</span><br><span class="line">    <span class="string">"no"</span>)</span><br><span class="line">		<span class="built_in">echo</span> <span class="string">"Your choose is no!"</span></span><br><span class="line">		;;</span><br><span class="line">	*)</span><br><span class="line">		<span class="built_in">echo</span> <span class="string">"Your choose is error!"</span></span><br><span class="line">		;;</span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure>

<h4 id="for循环"><a href="#for循环" class="headerlink" title="for循环"></a>for循环</h4><ul>
<li><p>语法一</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> 变量 <span class="keyword">in</span> 值1 值2 值3...</span><br><span class="line">	<span class="keyword">do</span></span><br><span class="line">		程序</span><br><span class="line">	<span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#打印时间</span></span><br><span class="line"><span class="comment"># Author: finyorkp</span></span><br><span class="line"><span class="keyword">for</span> time <span class="keyword">in</span> morning noon afternoon evening</span><br><span class="line">	<span class="keyword">do</span></span><br><span class="line">		<span class="built_in">echo</span> <span class="string">"This time is <span class="variable">$time</span>!"</span></span><br><span class="line">	<span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#批量解压缩脚本</span></span><br><span class="line"><span class="comment"># Author: finyorko</span></span><br><span class="line"><span class="built_in">cd</span> /lamp</span><br><span class="line">ls *.tar.gz &gt; ls.log</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $(cat ls.log)</span><br><span class="line">	<span class="keyword">do</span></span><br><span class="line">		tar -zxf <span class="variable">$i</span> &amp;&gt;/dev/null</span><br><span class="line">	<span class="keyword">done</span></span><br><span class="line">rm -rf /lamp/ls.log</span><br></pre></td></tr></table></figure>
</li>
<li><p>语法二</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (( 初始值;循环控制条件;变量变化 ))</span><br><span class="line">	<span class="keyword">do</span></span><br><span class="line">		程序</span><br><span class="line">	<span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># 从 1 加到 100</span></span><br><span class="line"><span class="comment"># Author: finyorko</span></span><br><span class="line"></span><br><span class="line">s=0</span><br><span class="line"><span class="keyword">for</span> (( i=1;i&lt;=100;i=i+1 ))</span><br><span class="line">	<span class="keyword">do</span></span><br><span class="line">		s=$(( <span class="variable">$s</span>+<span class="variable">$i</span> ))</span><br><span class="line">	<span class="keyword">done</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"The sum of 1+2+...+100 is : <span class="variable">$s</span>"</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#批量添加指定数量的用户</span></span><br><span class="line"><span class="comment"># Author: finyorko</span></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"Please input user name: "</span> -t 30 name</span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"Please input the number of users: "</span> -t 30 num</span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"Please input the password of users: "</span> -t 30 pass</span><br><span class="line"><span class="keyword">if</span> [ ! -z <span class="string">"<span class="variable">$name</span>"</span> -a ! -z <span class="string">"<span class="variable">$num</span>"</span> -a ! -z <span class="string">"<span class="variable">$pass</span>"</span> ]</span><br><span class="line">	<span class="keyword">then</span></span><br><span class="line">		y=$(<span class="built_in">echo</span> <span class="variable">$num</span> | sed <span class="string">'s/[0-9]//g'</span>)</span><br><span class="line">			<span class="keyword">if</span> [ -z <span class="string">"<span class="variable">$y</span>"</span> ]</span><br><span class="line">			<span class="keyword">then</span></span><br><span class="line">			<span class="keyword">for</span> (( i=1;i&lt;=<span class="variable">$num</span>;i=i+1 ))</span><br><span class="line">				<span class="keyword">do</span></span><br><span class="line">					/usr/sbin/useradd <span class="variable">$name</span><span class="variable">$i</span> &amp;&gt;/dev/null</span><br><span class="line">					<span class="built_in">echo</span> <span class="variable">$pass</span> | /usr/bin/passwd --stdin<span class="variable">$name</span><span class="variable">$i</span> &amp;&gt;/dev/null</span><br><span class="line">				<span class="keyword">done</span></span><br><span class="line">			<span class="keyword">fi</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h4 id="while循环与until循环"><a href="#while循环与until循环" class="headerlink" title="while循环与until循环"></a>while循环与until循环</h4><ol>
<li><p>while循环<br>while循环是不定循环,也称作条件循环 。只要条件判断式成立,循环就会一直继 续,直到条件判断式不成立,循环才会停 止。这就和for的固定循环不太一样了。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> [ 条件判断式 ]</span><br><span class="line">	<span class="keyword">do</span></span><br><span class="line">		程序</span><br><span class="line">	<span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#从1加到100</span></span><br><span class="line"><span class="comment"># Author: finyorko</span></span><br><span class="line"></span><br><span class="line">i=1</span><br><span class="line">s=0</span><br><span class="line"><span class="keyword">while</span> [ <span class="variable">$i</span> -le 100 ]</span><br><span class="line"><span class="comment">#如果变量 i 的值小于等于 100 ,则执行循环</span></span><br><span class="line">	<span class="keyword">do</span></span><br><span class="line">		s=$(( <span class="variable">$s</span>+<span class="variable">$i</span> ))</span><br><span class="line">		i=$(( <span class="variable">$i</span>+1 ))</span><br><span class="line">	<span class="keyword">done</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"The sum is: <span class="variable">$s</span>"</span></span><br></pre></td></tr></table></figure>



</li>
</ol>
<ol start="2">
<li><p>until循环<br>until循环,和while循环相反,until循环时 只要条件判断式不成立则进行循环,并执 行循环程序。一旦循环条件成立,则终止 循环。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">until [ 条件判断式 ]</span><br><span class="line">	<span class="keyword">do</span></span><br><span class="line">		程序</span><br><span class="line">	<span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#从1加到100</span></span><br><span class="line"><span class="comment"># Author: finyorko</span></span><br><span class="line"></span><br><span class="line">i=1</span><br><span class="line">s=0</span><br><span class="line">until [ <span class="variable">$i</span> -gt 100 ]</span><br><span class="line"><span class="comment">#循环直到变量 i 的值大于 100 ,就停止循环</span></span><br><span class="line">	<span class="keyword">do</span></span><br><span class="line">		s=$(( <span class="variable">$s</span>+<span class="variable">$i</span> ))</span><br><span class="line">		i=$(( <span class="variable">$i</span>+1 ))</span><br><span class="line">	<span class="keyword">done</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"The sum is: <span class="variable">$s</span>"</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<h2 id="Linux服务管理"><a href="#Linux服务管理" class="headerlink" title="Linux服务管理"></a>Linux服务管理</h2><h3 id="服务简介与分类"><a href="#服务简介与分类" class="headerlink" title="服务简介与分类"></a>服务简介与分类</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">graph LR</span><br><span class="line">A[Linux服务]</span><br><span class="line">    A --&gt;D[RPM包安装的服务]</span><br><span class="line">    A --&gt;E[源码包安装的服务]</span><br><span class="line">    D --&gt;F[独立的服务]</span><br><span class="line">    D --&gt;G[基于xinetd服务]</span><br></pre></td></tr></table></figure>

<p>启动与自启动</p>
<ul>
<li>服务启动:就是在当前系统中让服务运行,并提供功能。</li>
<li>服务自启动:自启动是指让服务在系统开机或重启动之后,随着系统的启动而自动启动服务。</li>
</ul>
<p>查询已安装的服务</p>
<ul>
<li><p>RPM包安装的服务</p>
<p>chkconfig –list</p>
</li>
</ul>
<p>​       #查看服务自启动状态,可以看到所有 RPM 包安装的服务</p>
<ul>
<li>源码包安装的服务<br>查看服务安装位置,一般是/usr/local/下</li>
</ul>
<p>RPM安装服务和源码包安装服务的区别</p>
<ul>
<li>RPM安装服务和源码包安装服务的区别<br>就是安装位置的不同</li>
</ul>
<h3 id="RPM包安装服务的管理"><a href="#RPM包安装服务的管理" class="headerlink" title="RPM包安装服务的管理"></a>RPM包安装服务的管理</h3><h4 id="独立服务的管理"><a href="#独立服务的管理" class="headerlink" title="独立服务的管理"></a>独立服务的管理</h4><ol>
<li><p>RPM包安装服务的位置</p>
<ul>
<li>RPM安装服务和源码包安装服务的区别就是安装位置的不同<ul>
<li>源码包安装在指定位置,一般是/usr/local/</li>
<li>RPM包安装在默认位置中</li>
</ul>
</li>
<li>/etc/init.d/:启动脚本位置</li>
<li>/etc/sysconfig/:初始化环境配置文件位置</li>
<li>/etc/:配置文件位置</li>
<li>/etc/xinetd.conf:xinetd配置文件</li>
<li>/etc/xinetd.d/:基于xinetd服务的启动脚本</li>
<li>/var/lib/:服务产生的数据放在这里</li>
<li>/var/log/:日志</li>
</ul>
</li>
<li><p>独立服务的启动</p>
<ul>
<li>/etc/init.d/独立服务名 start|stop|status|restart|</li>
<li>service 独立服务名 start|stop|restart||status</li>
</ul>
</li>
<li><p>独立服务的自启动</p>
<ul>
<li>chkconfig [–level 运行级别] [独立服务名] [on|off]</li>
<li>修改/etc/rc.d/rc.local文件</li>
<li>使用ntsysv命令管理自启动</li>
</ul>
</li>
</ol>
<h4 id="基于xinetd服务的管理"><a href="#基于xinetd服务的管理" class="headerlink" title="基于xinetd服务的管理"></a>基于xinetd服务的管理</h4><ol>
<li><p>安装xinetd与telnet</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># yum -y install xinetd</span></span><br><span class="line">[root@localhost ~]<span class="comment"># yum -y install telnet-server</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>xinetd服务的启动</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># vi /etc/xinetd.d/telnet</span></span><br><span class="line">service telnet      <span class="comment">#服务的名称为 telnet</span></span><br><span class="line">&#123;</span><br><span class="line">flags    = REUSE     <span class="comment">#标志为 REUSE ,设定 TCP/IP socket 可重用</span></span><br><span class="line">socket_type = stream <span class="comment">#使用 TCP 协议数据包</span></span><br><span class="line"><span class="built_in">wait</span>  = no           <span class="comment">#允许多个连接同时连接</span></span><br><span class="line">user= root           <span class="comment">#启动服务的用户为 root</span></span><br><span class="line">server= /usr/sbin/in.telnetd <span class="comment">#服务的启动程序</span></span><br><span class="line">log_on_failure += USERID     <span class="comment">#登陆失败后,记录用户的 ID</span></span><br><span class="line"><span class="built_in">disable</span>= no          <span class="comment">#服务不启动</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>重启xinetd服务</p>
<figure class="highlight plain"><figcaption><span>~]# service xinetd restart```</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">3. xinetd服务的自启动</span><br><span class="line"></span><br><span class="line">   - `[root@localhost ~]# chkconfig telnet on`</span><br><span class="line">   - `ntsysv`</span><br><span class="line"></span><br><span class="line">### 源码包安装服务的管理</span><br><span class="line"></span><br><span class="line">1. 源码包安装服务的启动</span><br><span class="line"></span><br><span class="line">   - 使用绝对路径,调用启动脚本来启动。不同的源码包的启动脚本不同。可以查看源码包的安装说明,查看启动脚本的方法。</span><br><span class="line">   - /usr/local/apache2/bin/apachectl start|stop</span><br><span class="line"></span><br><span class="line">2. 源码包服务的自启动</span><br><span class="line">   `[root@localhost ~]# vi /etc/rc.d/rc.local`</span><br><span class="line">   加入</span><br><span class="line">   `/usr/local/apache2/bin/apachectl start`</span><br><span class="line"></span><br><span class="line">3. 让源码包服务被服务管理命令识别</span><br><span class="line"></span><br><span class="line">   - 让源码包的apache服务能被service命令管理启动</span><br><span class="line">     `ln -s /usr/local/apache2/bin/apachectl /etc/init.d/apache`</span><br><span class="line"></span><br><span class="line">   - 让源码包的apache服务能被chkconfig与ntsysv命令管理自启动</span><br><span class="line"></span><br><span class="line">     ```bash</span><br><span class="line">     vi /etc/init.d/apache</span><br><span class="line">     # chkconfig: 35 86 76</span><br><span class="line">     # 指定 httpd 脚本可以被 chkconfig 命令管理 。 格式是:</span><br><span class="line">     chkconfig : 运行级别 启动顺序 关闭顺序</span><br><span class="line">     # description: source package apache</span><br><span class="line">     # 说明,内容随意</span><br><span class="line">     [root@localhost ~]# chkconfig --add apache</span><br><span class="line">     #把源码包apache加入chkconfig命令</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="服务管理总结"><a href="#服务管理总结" class="headerlink" title="服务管理总结"></a>服务管理总结</h3><p><img src="https://pic.superbed.cn/item/5deb9969f1f6f81c504b865e.png" alt></p>
<h2 id="Linux系统管理"><a href="#Linux系统管理" class="headerlink" title="Linux系统管理"></a>Linux系统管理</h2><h3 id="进程管理"><a href="#进程管理" class="headerlink" title="进程管理"></a>进程管理</h3><h4 id="进程查看"><a href="#进程查看" class="headerlink" title="进程查看"></a>进程查看</h4><ol>
<li><p>进程简介<br>进程是正在执行的一个程序或命令,每一个进程都是一个运行的实体,都有自己的地址空间,并占用一定的系统资源。</p>
</li>
<li><p>进程管理的作用</p>
<ul>
<li>判断服务器健康状态</li>
<li>查看系统中所有进程</li>
<li>杀死进程</li>
</ul>
</li>
<li><p>查看系统中所有进程</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# ps aux</span><br><span class="line"># 查看系统中所有进程,使用 BSD 操作系统格式</span><br><span class="line">[root@localhost ~]# ps -le</span><br><span class="line"># 查看系统中所有进程,使用 Linux 标准命令格式。</span><br><span class="line"></span><br><span class="line">USER:该进程是由哪个用户产生的;</span><br><span class="line">PID:进程的ID号;</span><br><span class="line">%CPU:该进程占用CPU资源的百分比,占用越高,进程越耗费资源;</span><br><span class="line">%MEM:该进程占用物理内存的百分比,占用越高,进程越耗费资源;</span><br><span class="line">VSZ:该进程占用虚拟内存的大小,单位KB;</span><br><span class="line">RSS:该进程占用实际物理内存的大小,单位KB;</span><br><span class="line">TTY:该进程是在哪个终端中运行的。其中tty1-tty7代表本地控制台终端,tty1-tty6是本地的字符界面终端,tty7是图形终端。pts/0-255代表虚拟终端。</span><br><span class="line">STAT:进程状态。常见的状态有:R:运行、S:睡眠、T:停止状态、s:包含子进 程、+:位于后台</span><br><span class="line">START:该进程的启动时间</span><br><span class="line">TIME:该进程占用CPU的运算时间,注意不是系统时间</span><br><span class="line">OMMAND:产生此进程的命令名</span><br></pre></td></tr></table></figure>
</li>
<li><p>查看系统健康状态</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># top [选项]</span></span><br><span class="line">选项:</span><br><span class="line">-d 秒数: 指定top命令每隔几秒更新。默认是3秒</span><br><span class="line">在top命令的交互模式当中可以执行的命令:</span><br><span class="line">?或h:  显示交互模式的帮助</span><br><span class="line">P:     以CPU使用率排序,默认就是此项</span><br><span class="line">M:     以内存的使用率排序</span><br><span class="line">N:     以PID排序</span><br><span class="line">q:     退出top</span><br></pre></td></tr></table></figure>

<ul>
<li><p>第一行信息为任务队列信息</p>
<table>
<thead>
<tr>
<th>内容</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>12:26:46</td>
<td>系统当前时间</td>
</tr>
<tr>
<td>up 1 day, 13:32</td>
<td>系统的运行时间,本机已经运行1天13小时32分钟</td>
</tr>
<tr>
<td>2 users</td>
<td>当前登录了两个用户</td>
</tr>
<tr>
<td>load average:0.00,0.00, 0.00</td>
<td>系统在之前1分钟,5分钟,15分钟 的平均负载。一般认为小于1时,负载较小。如果大于1,系统已经超出负荷。</td>
</tr>
</tbody></table>
</li>
<li><p>第二行为进程信息</p>
<table>
<thead>
<tr>
<th>内容</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>Tasks: 95 total</td>
<td>系统中的进程总数</td>
</tr>
<tr>
<td>1 running</td>
<td>正在运行的进程数</td>
</tr>
<tr>
<td>94 sleeping</td>
<td>睡眠的进程</td>
</tr>
<tr>
<td>0 stopped</td>
<td>正在停止的进程</td>
</tr>
<tr>
<td>0 zombie</td>
<td>僵尸进程。如果不是0,需要手工检查僵尸进程</td>
</tr>
</tbody></table>
</li>
<li><p>第三行为CPU信息</p>
<table>
<thead>
<tr>
<th>内容</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>Cpu(s): 0.1%us</td>
<td>用户模式占用的CPU百分比</td>
</tr>
<tr>
<td>0.1%sy</td>
<td>系统模式占用的CPU百分比</td>
</tr>
<tr>
<td>0.0%ni</td>
<td>改变过优先级的用户进程占用的CPU百分比</td>
</tr>
<tr>
<td>99.7%id</td>
<td>空闲CPU的CPU百分比</td>
</tr>
<tr>
<td>0.1%wa</td>
<td>空闲CPU的CPU百分比比</td>
</tr>
<tr>
<td>0.0%hi</td>
<td>硬中断请求服务占用的CPU百分比</td>
</tr>
<tr>
<td>0.1%si</td>
<td>软中断请求服务占用的CPU百分比</td>
</tr>
<tr>
<td>0.0%st</td>
<td>st(Steal time)虚拟时间百分比。就是当有虚拟机时 ,虚拟CPU等待实际CPU的时间百分比。</td>
</tr>
</tbody></table>
</li>
<li><p>第四行为物理内存信息</p>
<table>
<thead>
<tr>
<th>内容</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>Mem:625344k total</td>
<td>物理内存的总量,单位KB</td>
</tr>
<tr>
<td>571504k used</td>
<td>已经使用的物理内存数量</td>
</tr>
<tr>
<td>53840k free</td>
<td>空闲的物理内存数量,我们使用的是虚拟机,总共只分配了628MB内存,所以只有53MB的空闲内存了</td>
</tr>
<tr>
<td>65800k buffers</td>
<td>作为缓冲的内存数量</td>
</tr>
</tbody></table>
</li>
<li><p>第五行为交换分区(swap)信息</p>
<table>
<thead>
<tr>
<th>内容</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>Swap:524280k total</td>
<td>交换分区(虚拟内存)的总大小</td>
</tr>
<tr>
<td>0k used</td>
<td>已经使用的交互分区的大小</td>
</tr>
<tr>
<td>524280k free</td>
<td>空闲交换分区的大小</td>
</tr>
<tr>
<td>409280k cached</td>
<td>作为缓存的交互分区的大小</td>
</tr>
</tbody></table>
</li>
</ul>
</li>
<li><p>查看进程树</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># pstree [选项]</span></span><br><span class="line">选项:</span><br><span class="line">-p:  显示进程的PID</span><br><span class="line">-u:  显示进程的所属用户</span><br></pre></td></tr></table></figure>



</li>
</ol>
<h4 id="终止进程"><a href="#终止进程" class="headerlink" title="终止进程"></a>终止进程</h4><ol>
<li><p>kill命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># kill –l</span></span><br><span class="line"><span class="comment"># 查看可用的进程信号</span></span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>信号代号</th>
<th>信号代号</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>SIGHUP</td>
<td>该信号让进程立即关闭,然后重新读取配置文件之后重启。</td>
</tr>
<tr>
<td>2</td>
<td>SIGINT</td>
<td>程序终止信号,用于终止前台进程。相当于输出ctrl+c快捷键。</td>
</tr>
<tr>
<td>8</td>
<td>SIGFPE</td>
<td>在发生致命的算术运算错误时发出. 不仅包括浮点运算错误,还包括溢出及除数为0等其它所有的算术的错误。</td>
</tr>
<tr>
<td>9</td>
<td>SIGKILL</td>
<td>用来立即结束程序的运行. 本信号不能被阻塞、处理和忽略。一般用于强制终止进程</td>
</tr>
<tr>
<td>14</td>
<td>SIGALRM</td>
<td>时钟定时信号, 计算的是实际的时间或时钟时间. alarm函数使用该信号。</td>
</tr>
<tr>
<td>15</td>
<td>SIGTERM</td>
<td>正常结束进程的信号,kill命令的默认信号。有时如果进程已经发生问题,这个信号是无法正常终止进程的,我们才会尝试SIGKILL信号,也就是信号9。</td>
</tr>
<tr>
<td>18</td>
<td>SIGCONT</td>
<td>该信号可以让暂停的进程恢复执行,本信号不能被阻断</td>
</tr>
<tr>
<td>19</td>
<td>SIGSTOP</td>
<td>该信号可以暂停前台进程,相当于输入ctrl+z快捷键。本信号不能被阻断。</td>
</tr>
</tbody></table>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># kill -1 22354</span></span><br><span class="line"><span class="comment"># 重启进程</span></span><br><span class="line">[root@localhost ~]<span class="comment"># kill -9 22368</span></span><br><span class="line"><span class="comment"># 强制杀死进程</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>killall命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># killall [选项][信号] 进程名</span></span><br><span class="line"><span class="comment"># 按照进程名杀死进程</span></span><br><span class="line">选项:</span><br><span class="line">-i:   交互式,询问是否要杀死某个进程</span><br><span class="line">-I:   忽略进程名的大小写</span><br></pre></td></tr></table></figure>



</li>
</ol>
<ol start="3">
<li><p>pkill命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># pkill [选项] [信号] 进程名</span></span><br><span class="line"><span class="comment"># 按照进程名终止进程</span></span><br><span class="line">选项:</span><br><span class="line">-t 终端号:按照终端号踢出用户</span><br></pre></td></tr></table></figure>

<p>按照终端号踢出用户</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># w</span></span><br><span class="line"><span class="comment"># 使用 w 命令查询本机已经登录的用户</span></span><br><span class="line">[root@localhost ~]<span class="comment"># pkill -t -9 pts/1</span></span><br><span class="line"><span class="comment"># 强制杀死从 pts/1 虚拟终端登录的进程</span></span><br></pre></td></tr></table></figure>



</li>
</ol>
<h3 id="工作管理"><a href="#工作管理" class="headerlink" title="工作管理"></a>工作管理</h3><ol>
<li><p>把进程放入后台</p>
<ul>
<li>tar -zcf etc.tar.gz /etc &amp;</li>
<li>[root@localhost ~]# top<br>#在 top 命令执行的过程中,按下 ctrl+z 快捷键</li>
</ul>
</li>
<li><p>查看后台的工作</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># jobs [-l]</span></span><br><span class="line">选项:</span><br><span class="line">-l:  显示工作的PID</span><br><span class="line">注:“ + ”号代表最近一个放入后台的工作,也是工作恢复时,默认恢复的工作。“ - ”号代表倒数第二个放入后台的工作</span><br></pre></td></tr></table></figure>
</li>
<li><p>将后台暂停的工作恢复到前台执行</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># fg %工作号</span></span><br><span class="line">参数:</span><br><span class="line">%工作号: %号可以省略,但是注意工作号和PID的区别</span><br></pre></td></tr></table></figure>
</li>
<li><p>把后台暂停的工作恢复到后台执行</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># bg %工作号</span></span><br></pre></td></tr></table></figure>

<p>注:后台恢复执行的命令,是不能和前台有交互的,否则不能恢复到后台执行</p>
</li>
</ol>
<h3 id="系统资源查看"><a href="#系统资源查看" class="headerlink" title="系统资源查看"></a>系统资源查看</h3><h4 id="vmstat命令监控系统资源"><a href="#vmstat命令监控系统资源" class="headerlink" title="vmstat命令监控系统资源"></a>vmstat命令监控系统资源</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# vmstat [刷新延时 刷新次数]</span><br><span class="line">例如:</span><br><span class="line">[root@localhost proc]# vmstat 1 3</span><br></pre></td></tr></table></figure>

<h4 id="dmesg开机时内核检测信息"><a href="#dmesg开机时内核检测信息" class="headerlink" title="dmesg开机时内核检测信息"></a>dmesg开机时内核检测信息</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# dmesg</span><br><span class="line">[root@localhost ~]# dmesg | grep CPU</span><br></pre></td></tr></table></figure>

<h4 id="free命令查看内存使用状态"><a href="#free命令查看内存使用状态" class="headerlink" title="free命令查看内存使用状态"></a>free命令查看内存使用状态</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# free [-b|-k|-m|-g]</span><br><span class="line">选项:</span><br><span class="line">-b:  以字节为单位显示</span><br><span class="line">-k:  以KB为单位显示,默认就是以KB为单位显示</span><br><span class="line">-m:  以MB为单位显示</span><br><span class="line">-g:  以GB为单位显示</span><br></pre></td></tr></table></figure>

<p>缓存和缓冲的区别</p>
<p>简单来说缓存(cache)是用来加速数据 从硬盘中“读取”的,而缓冲(buffer) 是用来加速数据“写入”硬盘的。</p>
<h4 id="查看CPU信息"><a href="#查看CPU信息" class="headerlink" title="查看CPU信息"></a>查看CPU信息</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# cat /proc/cpuinfo</span><br></pre></td></tr></table></figure>

<h4 id="uptime命令"><a href="#uptime命令" class="headerlink" title="uptime命令"></a>uptime命令</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# uptime</span><br><span class="line"># 显示系统的启动时间和平均负载,也就是 top 命令的第一行。 w 命令也可以看到这个数据。</span><br></pre></td></tr></table></figure>

<h4 id="查看系统与内核相关信息"><a href="#查看系统与内核相关信息" class="headerlink" title="查看系统与内核相关信息"></a>查看系统与内核相关信息</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# uname [选项]</span><br><span class="line">选项:</span><br><span class="line">-a: 查看系统所有相关信息;</span><br><span class="line">-r: 查看内核版本;</span><br><span class="line">-s: 查看内核名称。</span><br></pre></td></tr></table></figure>

<p>判断当前系统的位数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# file /bin/ls</span><br></pre></td></tr></table></figure>

<p>查询当前Linux系统的发行版本</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# lsb_release -a</span><br></pre></td></tr></table></figure>

<h4 id="列出进程打开或使用的文件信息"><a href="#列出进程打开或使用的文件信息" class="headerlink" title="列出进程打开或使用的文件信息"></a>列出进程打开或使用的文件信息</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# lsof [选项]</span><br><span class="line">#列出进程调用或打开的文件的信息</span><br><span class="line">选项:</span><br><span class="line">-c 字符串:只列出以字符串开头的进程打开的文件</span><br><span class="line">-u 用户名:只列出某个用户的进程打开的文件</span><br><span class="line">-p pid:列出某个PID进程打开的文件</span><br></pre></td></tr></table></figure>

<h3 id="系统定时任务"><a href="#系统定时任务" class="headerlink" title="系统定时任务"></a>系统定时任务</h3><h4 id="crond服务管理与访问控制"><a href="#crond服务管理与访问控制" class="headerlink" title="crond服务管理与访问控制"></a>crond服务管理与访问控制</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# service crond restart</span><br><span class="line">[root@localhost ~]# chkconfig crond on</span><br></pre></td></tr></table></figure>

<h4 id="用户的crontab设置"><a href="#用户的crontab设置" class="headerlink" title="用户的crontab设置"></a>用户的crontab设置</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# crontab [选项]</span><br><span class="line">选项:</span><br><span class="line">-e: 编辑crontab定时任务</span><br><span class="line">-l: 查询crontab任务</span><br><span class="line">-r: 删除当前用户所有的crontab任务</span><br><span class="line"></span><br><span class="line">[root@localhost ~]# crontab -e</span><br><span class="line"># 进入 crontab 编辑界面。会打开 vim 编辑你的工作。</span><br><span class="line">* * * * * 执行的任务</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>项目</th>
<th>含义</th>
<th>范围</th>
</tr>
</thead>
<tbody><tr>
<td>第一个“*”</td>
<td>一小时当中的第几分钟</td>
<td>0-59</td>
</tr>
<tr>
<td>第二个“*”</td>
<td>一天当中的第几小时</td>
<td>0-23</td>
</tr>
<tr>
<td>第三个“*”</td>
<td>一个月当中的第几天</td>
<td>1-31</td>
</tr>
<tr>
<td>第四个“*”</td>
<td>一年当中的第几月</td>
<td>1-12</td>
</tr>
<tr>
<td>第五个“*”</td>
<td>一周当中的星期几</td>
<td>0-7(0和7都代表星期日)</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>特殊符号</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>*</td>
<td>代表任何时间。比如第一个“*”就代表一小时中每分钟都执行一次的意思。</td>
</tr>
<tr>
<td>,</td>
<td>代表不连续的时间。比如“0 8,12,16 * * * 命令”,就代表在每天的8点0分,12点0分,16点0分都执行一次命令</td>
</tr>
<tr>
<td>-</td>
<td>代表连续的时间范围。比如“0 5 * * 1-6命令”,代表在周一到周六的凌晨5点0分执行命令</td>
</tr>
<tr>
<td>*/n</td>
<td>代表每隔多久执行一次。比如“*/10 * * * * 命令”,代表每隔10分钟就执行一遍命令</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>时间</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>45 22 * * * 命令</td>
<td>在22点45分执行命令</td>
</tr>
<tr>
<td>0 17 * * 1 命令</td>
<td>每周1 的17点0分执行命令</td>
</tr>
<tr>
<td>0 5 1,15 * * 命令</td>
<td>每月1号和15号的凌晨5点0分执行命令</td>
</tr>
<tr>
<td>40 4 * * 1-5 命令</td>
<td>每周一到周五的凌晨4点40分执行命令</td>
</tr>
<tr>
<td>*/10 4 * * * 命令</td>
<td>每天的凌晨4点,每隔10分钟执行一次命令</td>
</tr>
<tr>
<td>0 0 1,15 * 1 命令</td>
<td>每月1号和15号,每周1的0点0分都会执行命令。注意:星期几和几号最好不要同时出现,因为他们定义的都是天。非常容易让管理员混乱。</td>
</tr>
</tbody></table>
<p>举例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">*/5 * * * * /bin/echo ”11” &gt;&gt; /tmp/test</span><br><span class="line">5 5 * * 2 /sbin/shutdown -r now</span><br><span class="line">0 5 1,10,15 * * /root/sh/autobak.sh</span><br></pre></td></tr></table></figure>

<h2 id="日志管理"><a href="#日志管理" class="headerlink" title="日志管理"></a>日志管理</h2><h3 id="日志管理简介"><a href="#日志管理简介" class="headerlink" title="日志管理简介"></a>日志管理简介</h3><h4 id="日志服务"><a href="#日志服务" class="headerlink" title="日志服务"></a>日志服务</h4><ul>
<li>在CentOS 6.x中日志服务已经由rsyslogd取代了原先的syslogd服务。rsyslogd日志服务更加先进,功能更多。但是不论该服务的使用,还是日志文件的格式其实都是和syslogd服务相兼容的,所以学习起来基本和syslogd服务一致。</li>
<li>rsyslogd的新特点:<ul>
<li>基于TCP网络协议传输日志信息;</li>
<li>更安全的网络传输方式;</li>
<li>有日志消息的及时分析框架;</li>
<li>后台数据库;</li>
<li>配置文件中可以写简单的逻辑判断;</li>
<li>与syslog配置文件相兼容。</li>
</ul>
</li>
</ul>
<blockquote>
<p> 确定服务启动</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# ps aux | grep rsyslogd</span><br><span class="line"># 查看服务是否启动</span><br><span class="line">chkconfig --list | grep rsyslog</span><br><span class="line"># 查看服务是否自启动</span><br></pre></td></tr></table></figure>

<h4 id="常见日志的作用"><a href="#常见日志的作用" class="headerlink" title="常见日志的作用"></a>常见日志的作用</h4><table>
<thead>
<tr>
<th>日志文件</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>/var/log/cron</td>
<td>记录了系统定时任务相关的日志</td>
</tr>
<tr>
<td>/var/log/cups/</td>
<td>记录打印信息的日志</td>
</tr>
<tr>
<td>/var/log/dmesg</td>
<td>记录了系统在开机时内核自检的信息。也可以使用dmesg命令直接查看内核自检信息。</td>
</tr>
<tr>
<td>/var/log/btmp</td>
<td>记录错误登录的日志。这个文件是二进制文件,不能直接vi查看,而要使用lastb命令查看,命令如下:<br>[root@localhost log]# lastb<br>root   tty1   Tue Jun 4 22:38 - 22:38  (00:00)<br>#有人在 6 月 4 日 22:38 使用 root 用户,在本地终端 1 登录错误</td>
</tr>
<tr>
<td>/var/log/lastlog</td>
<td>记录系统中所有用户最后一次的登录时间的日志。这个文件也是二进制文件,不能直接vi,而要使用lastlogog命令查看。</td>
</tr>
<tr>
<td>/var/log/mailog</td>
<td>记录邮件信息。</td>
</tr>
<tr>
<td>/var/log/message</td>
<td>记录系统重要信息的日志。这个日志文件中会记录Linux系统的绝大 多数重要信息,如果系统出现问题时,首先要检查的就应该是这个 日志文件。</td>
</tr>
<tr>
<td>/var/log/secure</td>
<td>记录验证和授权方面的信息,只要涉及账户和密码的程序都会记录。 比如说系统的登录,ssh的登录,su切换用户,sudo授权,甚至添加 用户和修改用户密码都会记录在这个日志文件中。</td>
</tr>
<tr>
<td>/var/log/wtmp</td>
<td>永久记录所有用户的登录、注销信息,同时记录系统的启动、重启、 关机事件。同样这个文件也是一个二进制文件,不能直接vi,而需 要使用last命令来查看。</td>
</tr>
<tr>
<td>/var/run/utmp</td>
<td>记录当前已经登录的用户的信息。这个文件会随着用户的登录和注 销而不断变化,只记录当前登录用户的信息。同样这个文件不能直 接vi,而要使用w,who,users等命令来查询。</td>
</tr>
</tbody></table>
<ul>
<li>除了系统默认的日志之外,采用RPM方 式安装的系统服务也会默认把日志记录在 /var/log/目录中(源码包安装的服务日志 是在源码包指定目录中)。不过这些日志 不是由rsyslogd服务来记录和管理的,而 是各个服务使用自己的日志管理文档来记 录自身日志。</li>
</ul>
<table>
<thead>
<tr>
<th>日志文件</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>/var/log/httpd/</td>
<td>RPM包安装的apache服务的默认日志目录</td>
</tr>
<tr>
<td>/var/log/mail/</td>
<td>RPM包安装的邮件服务的额外日志目录</td>
</tr>
<tr>
<td>/var/log/samba/</td>
<td>RPM包安装的samba服务的日志目录</td>
</tr>
<tr>
<td>/var/log/sssd/</td>
<td>守护进程安全服务目录</td>
</tr>
</tbody></table>
<h3 id="rsyslogd日志服务"><a href="#rsyslogd日志服务" class="headerlink" title="rsyslogd日志服务"></a>rsyslogd日志服务</h3><h4 id="日志文件格式"><a href="#日志文件格式" class="headerlink" title="日志文件格式"></a>日志文件格式</h4><ul>
<li>基本日志格式包含以下四列:<ul>
<li>事件产生的时间;</li>
<li>发生事件的服务器的主机名;</li>
<li>产生事件的服务名或程序名;</li>
<li>事件的具体信息。</li>
</ul>
</li>
</ul>
<h4 id="etc-rsyslog-conf配置文件"><a href="#etc-rsyslog-conf配置文件" class="headerlink" title="/etc/rsyslog.conf配置文件"></a>/etc/rsyslog.conf配置文件</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">authpriv.*                       /var/log/secure</span><br><span class="line"># 服务名称 [ 连接符号 ] 日志等级    日志记录位置</span><br><span class="line">#认证相关服务 . 所有日志等级        记录在/var/log/secure 日志中</span><br></pre></td></tr></table></figure>

<p><strong>服务名称</strong></p>
<table>
<thead>
<tr>
<th>服务名称</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>auth</td>
<td>安全和认证相关消息(不推荐使用authpriv替代)</td>
</tr>
<tr>
<td>authpriv</td>
<td>安全和认证相关消息(私有的)</td>
</tr>
<tr>
<td>cron</td>
<td>系统定时任务cront和at产生的日志</td>
</tr>
<tr>
<td>daemon</td>
<td>和各个守护进程相关的日志</td>
</tr>
<tr>
<td>ftp</td>
<td>ftp守护进程产生的日志</td>
</tr>
<tr>
<td>kern</td>
<td>内核产生的日志(不是用户进程产生的)</td>
</tr>
<tr>
<td>local0-local7</td>
<td>为本地使用预留的服务</td>
</tr>
<tr>
<td>lpr</td>
<td>打印产生的日志</td>
</tr>
<tr>
<td>mail</td>
<td>邮件收发信息</td>
</tr>
<tr>
<td>news</td>
<td>与新闻服务器相关的日志</td>
</tr>
<tr>
<td>syslog</td>
<td>有syslogd服务产生的日志信息(虽然服务名称已经改为rsyslogd,但是很多配置都还是沿用了syslogd的,这里并没有修改服务名)。</td>
</tr>
<tr>
<td>user</td>
<td>用户等级类别的日志信息</td>
</tr>
<tr>
<td>uucp</td>
<td>uucp子系统的日志信息,uucp是早期linux系统进行数据传递的协议,后来也常用在新闻组服务中。</td>
</tr>
</tbody></table>
<p><strong>连接符号</strong></p>
<ul>
<li>连接符号可以识别为:<ul>
<li>“*”代表所有日志等级,比如:“authpriv.<em>”代表authpriv认证信息服务产生的日志,所有的日志等级都记录</em></li>
<li>“.”代表只要比后面的等级高的(包含该等级)日志都记录下来。比如:“cron.info”代表cron服务产生的日志,只要日志等级大于等于info级别,就记录</li>
<li>“.=”代表只记录所需等级的日志,其他等级的都不记录。比如:“*.=emerg”代表人和日志服务产生的日志,只要等级是emerg等级就记录。这种用法及少见,了解就好</li>
<li>“.!”代表不等于,也就是除了该等级的日志外,其他等级的日志都记录。</li>
</ul>
</li>
</ul>
<p><strong>日志等级</strong></p>
<table>
<thead>
<tr>
<th>等级名称</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>debug</td>
<td>一般的调试信息说明</td>
</tr>
<tr>
<td>info</td>
<td>基本的通知信息</td>
</tr>
<tr>
<td>notice</td>
<td>普通信息,但是有一定的重要性</td>
</tr>
<tr>
<td>warning</td>
<td>警告信息,但是还不回影响到服务或系统的运行</td>
</tr>
<tr>
<td>err</td>
<td>错误信息,一般达到err等级的信息以及可以影响到服务或系</td>
</tr>
<tr>
<td>crit</td>
<td>临界状况信息,比err等级还要严重</td>
</tr>
<tr>
<td>alert</td>
<td>警告状态信息,比crit还要严重。必须立即采取行动</td>
</tr>
<tr>
<td>emerg</td>
<td>疼痛等级信息,系统已经无法使用了</td>
</tr>
</tbody></table>
<p><strong>日志记录位置</strong></p>
<ul>
<li>日志文件的绝对路径,如“/var/log/secure”</li>
<li>系统设备文件,如“/dev/lp0”</li>
<li>转发给远程主机,如“@192.168.0.210:514”</li>
<li>用户名,如“root”</li>
<li>忽略或丢弃日志,如“~”</li>
</ul>
<h3 id="日志轮替"><a href="#日志轮替" class="headerlink" title="日志轮替"></a>日志轮替</h3><h4 id="日志文件的命名规则"><a href="#日志文件的命名规则" class="headerlink" title="日志文件的命名规则"></a>日志文件的命名规则</h4><ul>
<li>如果配置文件中拥有“dateext”参数,那 么日志会用日期来作为日志文件的后缀, 例如“secure-20130605”。这样的话日志 文件名不会重叠,所以也就不需要日志文 件的改名,只需要保存指定的日志个数, 删除多余的日志文件即可。</li>
<li>如果配置文件中没有“dateext”参数,那么日 志文件就需要进行改名了。当第一次进行日志 轮替时,当前的“secure”日志会自动改名为 “secure.1”,然后新建“secure”日志,用来 保存新的日志。当第二次进行日志轮替时, “secure.1”会自动改名为“secure.2”,当前的 “secure”日志会自动改名为“secure.1”,然 后也会新建“secure”日志,用来保存新的日志 ,以此类推。</li>
</ul>
<h4 id="logrotate配置文件"><a href="#logrotate配置文件" class="headerlink" title="logrotate配置文件"></a>logrotate配置文件</h4><table>
<thead>
<tr>
<th>参数</th>
<th>参数说明</th>
</tr>
</thead>
<tbody><tr>
<td>daily</td>
<td>日志的轮替周期是每天</td>
</tr>
<tr>
<td>weekly</td>
<td>日志的轮替周期是每周</td>
</tr>
<tr>
<td>monthly</td>
<td>日志的轮替周期是每月</td>
</tr>
<tr>
<td>rotate 数字</td>
<td>保留的日志文件的个数。0指没有备份</td>
</tr>
<tr>
<td>compress</td>
<td>日志轮替时,旧的日志进行压缩</td>
</tr>
<tr>
<td>create mode owner group</td>
<td>建立新日志,同时指定新日志的权限与所有者和所属组。如create 0600 root utmp</td>
</tr>
<tr>
<td>mail address</td>
<td>当日志轮替时,输出内容通过邮件发送到指定的邮件地址。如mail <a href="mailto:finyorko@163.com" target="_blank" rel="noopener">finyorko@163.com</a></td>
</tr>
<tr>
<td>missingok</td>
<td>如果日志不存在,则忽略该日志的警告信息</td>
</tr>
<tr>
<td>notifempty</td>
<td>如果日志为空文件,则不进行日志轮替</td>
</tr>
<tr>
<td>minsize 大小</td>
<td>日志轮替的最小值。也就是日志一定要达到这个最小值才会轮替,否则就算时间达到也不轮替</td>
</tr>
<tr>
<td>size 大小</td>
<td>日志只有大于指定大小才进行日志轮替,而不是按照时间轮替。如size 100k</td>
</tr>
<tr>
<td>dateext</td>
<td>使用日期作为日志轮替文件的后缀。如secure-20130605</td>
</tr>
</tbody></table>
<h4 id="把apache日志加入轮替"><a href="#把apache日志加入轮替" class="headerlink" title="把apache日志加入轮替"></a>把apache日志加入轮替</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# vi /etc/logrotate.conf</span><br><span class="line">/usr/local/apache2/logs/access_log &#123;</span><br><span class="line">daily</span><br><span class="line">create</span><br><span class="line">rotate 30</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="logrotate命令"><a href="#logrotate命令" class="headerlink" title="logrotate命令"></a>logrotate命令</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# logrotate [选项] 配置文件名</span><br><span class="line">选项:</span><br><span class="line">如果此命令没有选项,则会按照配置文件中的条件进行</span><br><span class="line">日志轮替</span><br><span class="line">-v: 显示日志轮替过程。加了-v选项,会显示日志的轮替的过程</span><br><span class="line">-f: 强制进行日志轮替。不管日志轮替的条件是否已经符合,强制配置文件中所有的日志进行轮替</span><br></pre></td></tr></table></figure>

<h2 id="启动管理"><a href="#启动管理" class="headerlink" title="启动管理"></a>启动管理</h2><h3 id="CentOS-6-x启动管理"><a href="#CentOS-6-x启动管理" class="headerlink" title="CentOS 6.x启动管理"></a>CentOS 6.x启动管理</h3><h4 id="系统运行级别-1"><a href="#系统运行级别-1" class="headerlink" title="系统运行级别"></a>系统运行级别</h4><ol>
<li><p>运行级别</p>
<table>
<thead>
<tr>
<th>运行级别</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>0</td>
<td>关机</td>
</tr>
<tr>
<td>1</td>
<td>单用户模式,可以想象为windows的安全模式,主要用于系统修复</td>
</tr>
<tr>
<td>2</td>
<td>不完全的命令行模式,不含NFS服务</td>
</tr>
<tr>
<td>3</td>
<td>完全的命令行模式,就是标准字符界面</td>
</tr>
<tr>
<td>4</td>
<td>系统保留</td>
</tr>
<tr>
<td>5</td>
<td>图形模式</td>
</tr>
<tr>
<td>6</td>
<td>重启动</td>
</tr>
</tbody></table>
</li>
<li><p>运行级别命令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# runlevel</span><br><span class="line"># 查看运行级别命令</span><br><span class="line">[root@localhost ~]# init 运行级别</span><br><span class="line"># 改变运行级别命令</span><br></pre></td></tr></table></figure>
</li>
<li><p>系统默认运行级别</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# vim /etc/inittab</span><br><span class="line">id:3:initdefault:</span><br><span class="line"># 系统开机后直接进入哪个运行级别</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h4 id="系统启动过程"><a href="#系统启动过程" class="headerlink" title="系统启动过程"></a>系统启动过程</h4><p><strong>initramfs内存文件系统</strong></p>
<p>CentOS 6.x中使用initramfs内存文件系统 取代了CentOS 5.x中的initrd RAM Disk。 他们的作用类似,可以通过启动引导程序 加载到内存中,然后加载启动过程中所需 要的内核模块,比如USB、SATA、SCSI 硬盘的驱动和LVM、RAID文件系统的驱 动</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">mkdir /tmp/initramfs</span><br><span class="line"># 建立测试目录</span><br><span class="line">cp /boot/initramfs-2.6.32-279.el6.i686.img /tmp/initramfs/</span><br><span class="line"># 复制 initramfs 文件</span><br><span class="line">cd /tmp/initramfs/</span><br><span class="line">file initramfs-2.6.32-279.el6.i686.img</span><br><span class="line">mv initramfs-2.6.32-279.el6.i686.img initramfs-2.6.32-279.el6.i686.img.gz</span><br><span class="line"># 修改文件的后缀名为 .gz</span><br><span class="line">gunzip initramfs-2.6.32-279.el6.i686.img.gz</span><br><span class="line"># 解压缩</span><br><span class="line">file initramfs-2.6.32-279.el6.i686.img</span><br><span class="line">cpio -ivcdu &lt; initramfs-2.6.32-279.el6.i686.img</span><br><span class="line"># 解压缩</span><br></pre></td></tr></table></figure>

<p><strong>调用/etc/init/rcS.conf配置文件</strong></p>
<ul>
<li>主要功能是两个:<ul>
<li>先调用/etc/rc.d/rc.sysinit,然后由/etc/rc.d/rc.sysinit配置文件进行Linux系统初始化。</li>
<li>然后再调用/etc/inittab,然后由/etc/inittab配<br>置文件确定系统的默认运行级别</li>
</ul>
</li>
</ul>
<p><strong>由/etc/rc.d/rc.sysinit初始化</strong></p>
<p>1、获得网络环境<br>2、挂载设备<br>3、开机启动画面Plymouth(取替了过往的 RHGB)<br>4、判断是否启用SELinux<br>5、显示于开机过程中的欢迎画面<br>6、初始化硬件<br>7、用户自定义模块的加载<br>8、配置内核的参数<br>9、设置主机名<br>10、同步存储器<br>11、设备映射器及相关的初始化<br>12、初始化软件磁盘阵列(RAID)<br>13、初始化 LVM 的文件系统功能<br>14、检验磁盘文件系统(fsck)<br>15、设置磁盘配额(quota)<br>16、重新以可读写模式挂载系统磁盘<br>17、更新quota(非必要)<br>18、启动系统虚拟随机数生成器<br>19、配置机器(非必要)<br>20、清除开机过程当中的临时文件<br>21、创建ICE目录<br>22、启动交换分区(swap)<br>23、将开机信息写入/var/log/dmesg文件中</p>
<p><strong>调用/etc/rc.d/rc文件</strong></p>
<ul>
<li>运行级别参数传入/etc/rc.d/rc这个脚本之后,由这个脚本文件按照不同的运行级别启动/etc/rc[0-6].d/目录中的相应的程序<ul>
<li>/etc/rc3.d/k??开头的文件(??是数字),会按照数字顺序依次关闭</li>
<li>/etc/rc3.d/S??开头的文件(??是数字),会按照数字顺序依次启动</li>
</ul>
</li>
</ul>
<h3 id="启动引导程序grub"><a href="#启动引导程序grub" class="headerlink" title="启动引导程序grub"></a>启动引导程序grub</h3><h4 id="Grub配置文件"><a href="#Grub配置文件" class="headerlink" title="Grub配置文件"></a>Grub配置文件</h4><ol>
<li><p>grub中分区表示</p>
<table>
<thead>
<tr>
<th>硬盘</th>
<th>分区</th>
<th>Linux中设备文件名</th>
<th>Grub 中 设 备 文 件名</th>
</tr>
</thead>
<tbody><tr>
<td>第一块SCSI硬盘</td>
<td>第一个主分区</td>
<td>/dev/sda1</td>
<td>hd(0,0)</td>
</tr>
<tr>
<td></td>
<td>第二个主分区</td>
<td>/dev/sda2</td>
<td>hd(0,1)</td>
</tr>
<tr>
<td></td>
<td>扩展分区</td>
<td>/dev/sda3</td>
<td>hd(0,2)</td>
</tr>
<tr>
<td></td>
<td>第一个逻辑分区</td>
<td>/dev/sda5</td>
<td>hd(0,4)</td>
</tr>
<tr>
<td>第二块SCSI硬盘</td>
<td>第一个主分区</td>
<td>/dev/sdb1</td>
<td>hd(1,0)</td>
</tr>
<tr>
<td></td>
<td>第二个主分区</td>
<td>/dev/sdb2</td>
<td>hd(1,1)</td>
</tr>
<tr>
<td></td>
<td>扩展分区</td>
<td>/dev/sdb3</td>
<td>hd(1,2)</td>
</tr>
<tr>
<td></td>
<td>第一个逻辑分区</td>
<td>/dev/sdb5</td>
<td>hd(1,4)</td>
</tr>
</tbody></table>
</li>
<li><p>grub配置文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">vi /boot/grub/grub.conf</span><br><span class="line"></span><br><span class="line">default=0  默认启动第一个系统</span><br><span class="line"></span><br><span class="line">timeout=5  等待时间,默认是5秒</span><br><span class="line"></span><br><span class="line">splashimage=(hd0,0)/grub/splash.xpm.gz  这里是指定grub启动时的背景图像文件的保存位置的</span><br><span class="line"></span><br><span class="line">hiddenmenu  隐藏菜单</span><br><span class="line"></span><br><span class="line">title CentOS (2.6.32-279.el6.i686) title就是标题的意思</span><br><span class="line"></span><br><span class="line">root (hd0,0)  是指启动程序的保存分区</span><br><span class="line"></span><br><span class="line">kernel /vmlinuz-2.6.32-279.el6.i686 ro</span><br><span class="line">root=UUID=b9a7a1a8-767f-4a87-8a2b-a535edb362c9</span><br><span class="line">rd_NO_LUKS KEYBOARDTYPE=pc KEYTABLE=us</span><br><span class="line">rd_NO_MD crashkernel=auto LANG=zh_CN.UTF-8</span><br><span class="line">rd_NO_LVM rd_NO_DM rhgb quiet</span><br><span class="line">  定义内核加载时的选项</span><br><span class="line">  </span><br><span class="line">initrd /initramfs-2.6.32-279.el6.i686.img  指定了initramfs内存文件系统镜像文件的所在位置</span><br></pre></td></tr></table></figure>



</li>
</ol>
<h4 id="Grub加密与字符界面分辨率调整"><a href="#Grub加密与字符界面分辨率调整" class="headerlink" title="Grub加密与字符界面分辨率调整"></a>Grub加密与字符界面分辨率调整</h4><ol>
<li><p>grub加密</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# grub-md5-crypt</span><br><span class="line">#生成加密密码串</span><br><span class="line">[root@localhost ~]# vi /boot/grub/grub.conf</span><br><span class="line">default=0</span><br><span class="line">timeout=5</span><br><span class="line">password --md5</span><br><span class="line">$1$Y84LB1$8tMY2PibScmuOCc8z8U35/</span><br><span class="line">#password 选项放在整体设置处。</span><br><span class="line">splashimage=(hd0,0)/grub/splash.xpm.gz</span><br><span class="line">hiddenmenu</span><br><span class="line">...省略部分内容...</span><br></pre></td></tr></table></figure>
</li>
<li><p>纯字符界面分辨率调整</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">grep &quot;CONFIG_FRAMEBUFFER_CONSOLE&quot; /boot/config-2.6.32-279.el6.i686</span><br><span class="line">#查询内核是否支持分辨率修改</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>色深</th>
<th>640×480</th>
<th>800×600</th>
<th>1024×768</th>
<th>1280×1024</th>
</tr>
</thead>
<tbody><tr>
<td>8位</td>
<td>769</td>
<td>771</td>
<td>773</td>
<td>775</td>
</tr>
<tr>
<td>15位</td>
<td>784</td>
<td>787</td>
<td>790</td>
<td>793</td>
</tr>
<tr>
<td>16位</td>
<td>785</td>
<td>788</td>
<td>791</td>
<td>794</td>
</tr>
<tr>
<td>32位</td>
<td>786</td>
<td>789</td>
<td>792</td>
<td>795</td>
</tr>
</tbody></table>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">vi /boot/grub/grub.conf</span><br><span class="line">kernel /vmlinuz-2.6.32-279.el6.i686 ro</span><br><span class="line">root=UUID=b9a7a1a8-767f-4a87-8a2b-</span><br><span class="line">a535edb362c9 rd_NO_LUKS</span><br><span class="line">KEYBOARDTYPE=pc KEYTABLE=us</span><br><span class="line">rd_NO_MD crashkernel=auto LANG=zh_CN.UTF-</span><br><span class="line">8 rd_NO_LVM rd_NO_DM rhgb quiet vga=791</span><br></pre></td></tr></table></figure>



</li>
</ol>
<h3 id="系统修复模式"><a href="#系统修复模式" class="headerlink" title="系统修复模式"></a>系统修复模式</h3><h4 id="单用户模式"><a href="#单用户模式" class="headerlink" title="单用户模式"></a>单用户模式</h4><p>单用户模式常见的错误修复</p>
<ul>
<li>遗忘root密码</li>
<li>修改系统默认运行级别</li>
</ul>
<h4 id="光盘修复模式"><a href="#光盘修复模式" class="headerlink" title="光盘修复模式"></a>光盘修复模式</h4><p>重要系统文件丢失,导致系统无法启动</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">bash-4.1# chroot /mnt/sysimage</span><br><span class="line"># 改变主目录</span><br><span class="line">sh-4.1# cd /root</span><br><span class="line">sh-4.1# rpm -qf /etc/inittab</span><br><span class="line"># 查询下 /etc/inittab 文件属于哪个包。</span><br><span class="line">sh-4.1# mkdir /mnt/cdrom</span><br><span class="line"># 建立挂载点</span><br><span class="line">sh-4.1# mount /dev/sr0 /mnt/cdrom</span><br><span class="line"># 挂载光盘</span><br><span class="line">sh-4.1# rpm2cpio \</span><br><span class="line">/mnt/cdrom/Packages/initscripts-8.45.3-1.i386.rpm \</span><br><span class="line">| cpio -idv ./etc/inittab</span><br><span class="line"># 提取 inittab 文件到当前目录</span><br><span class="line">sh-4.1# cp etc/inittab /etc/inittab</span><br><span class="line"># 复制 inittab 文件到指定位置</span><br></pre></td></tr></table></figure>

<h4 id="Linux的安全性"><a href="#Linux的安全性" class="headerlink" title="Linux的安全性"></a>Linux的安全性</h4><p><img src="https://pic.superbed.cn/item/5decb2c0f1f6f81c507c7b22.png" alt></p>
<h2 id="备份与恢复"><a href="#备份与恢复" class="headerlink" title="备份与恢复"></a>备份与恢复</h2><h3 id="备份概述"><a href="#备份概述" class="headerlink" title="备份概述"></a>备份概述</h3><h4 id="Linux系统需要备份的数据"><a href="#Linux系统需要备份的数据" class="headerlink" title="Linux系统需要备份的数据"></a>Linux系统需要备份的数据</h4><ul>
<li>/root/目录:</li>
<li>/home/目录:</li>
<li>/var/spool/mail/目录:</li>
<li>/etc/目录:</li>
<li>其他目录:</li>
</ul>
<p><strong>安装服务的数据</strong></p>
<ul>
<li>apache需要备份的数据<ul>
<li>配置文件</li>
<li>网页主目录</li>
<li>日志文件</li>
</ul>
</li>
<li>mysql需要备份的数据<ul>
<li>源码包安装的mysql:/usr/local/mysql/data/</li>
<li>RPM包安装的mysql:/var/lib/mysql/</li>
</ul>
</li>
</ul>
<h4 id="备份策略"><a href="#备份策略" class="headerlink" title="备份策略"></a>备份策略</h4><ul>
<li><p>完全备份:完全备份就是指把所有需要备份的数据全部备份,当然完全备份可以备<br>份整块硬盘,整个分区或某个具体的目录</p>
</li>
<li><p>增量备份<br><img src="https://pic2.superbed.cn/item/5decb3e7f1f6f81c507cbd5e.png" alt></p>
</li>
<li><p>差异备份<br><img src="https://pic2.superbed.cn/item/5decb3d5f1f6f81c507cbac8.png" alt></p>
</li>
</ul>
<h3 id="dump和restore命令"><a href="#dump和restore命令" class="headerlink" title="dump和restore命令"></a>dump和restore命令</h3><h4 id="dump命令"><a href="#dump命令" class="headerlink" title="dump命令"></a>dump命令</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# dump [选项] 备份之后的文件名 原文件或目录</span><br><span class="line">选项:</span><br><span class="line">-level: 就是我们说的0-9十个备份级别</span><br><span class="line">-f 文件名: 指定备份之后的文件名</span><br><span class="line">-u: 备份成功之后,把备份时间记录在/etc/dumpdates文件</span><br><span class="line">-v: 显示备份过程中更多的输出信息</span><br><span class="line">-j: 调用bzlib库压缩备份文件,其实就是把备份文件压缩为.bz2格式,默认压缩等级是2</span><br><span class="line">-W: 显示允许被dump的分区的备份等级及备份时间</span><br></pre></td></tr></table></figure>

<p><strong>备份分区</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">dump -0uj -f /root/boot.bak.bz2 /boot/</span><br><span class="line"># 备份命令。先执行一次完全备份,并压缩和更新备份时间</span><br><span class="line">cat /etc/dumpdates</span><br><span class="line"># 查看备份时间文件</span><br><span class="line">cp install.log /boot/</span><br><span class="line"># 复制日志文件到 /boot 分区</span><br><span class="line">dump -1uj -f /root/boot.bak1.bz2 /boot/</span><br><span class="line"># 增量备份 /boot 分区,并压缩</span><br><span class="line">dump –W</span><br><span class="line"># 查询分区的备份时间及备份级别的</span><br></pre></td></tr></table></figure>

<p><strong>备份文件或目录</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dump -0j -f /root/etc.dump.bz2 /etc/</span><br><span class="line"># 完全备份 /etc/ 目录,只能使用 0 级别进行完全备份,而不再支持增量备份</span><br></pre></td></tr></table></figure>

<h4 id="restore命令"><a href="#restore命令" class="headerlink" title="restore命令"></a>restore命令</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# restore [模式选项] [选项]</span><br><span class="line">模式选项:restore命令常用的模式有以下四种,这四个模式不能混用。</span><br><span class="line">	-C:比较备份数据和实际数据的变化</span><br><span class="line">	-i: 进入交互模式,手工选择需要恢复的文件。</span><br><span class="line">	-t: 查看模式,用于查看备份文件中拥有哪些数据。</span><br><span class="line">	-r: 还原模式,用于数据还原 。</span><br><span class="line">选项:</span><br><span class="line">	-f: 指定备份文件的文件名</span><br></pre></td></tr></table></figure>

<p><strong>比较备份数据和实际数据的变化</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mv /boot/vmlinuz-2.6.32-279.el6.i686 /boot/vmlinuz-2.6.32-279.el6.i686.bak</span><br><span class="line"># 把 /boot 目录中内核镜像文件改个名字</span><br><span class="line">restore -C -f /root/boot.bak.bz2</span><br><span class="line">#restore 发现内核镜像文件丢失</span><br></pre></td></tr></table></figure>

<p><strong>查看模式</strong></p>
<p><code>restore -t -f boot.bak.bz2</code></p>
<p><strong>还原模式</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># 还原 boot.bak.bz2 分区备份</span><br><span class="line"># 先还原完全备份的数据</span><br><span class="line">mkdir boot.test</span><br><span class="line">cd boot.test/</span><br><span class="line">restore -r -f /root/boot.bak.bz2</span><br><span class="line"># 解压缩</span><br><span class="line">restore -r -f /root/boot.bak1.bz2</span><br><span class="line"># 恢复增量备份数据</span><br><span class="line"></span><br><span class="line"># 还原 /etc/ 目录的备份 etc.dump.bz2</span><br><span class="line">restore -r -f etc.dump.bz2</span><br><span class="line"># 还原 etc.dump.bz2 备份</span><br></pre></td></tr></table></figure>

<div style="display: none">哈哈我是注释，不会在浏览器中显示。我也是注释。</div>
<!--哈哈我是注释，不会在浏览器中显示。-->

<!--
哈哈我是多段
注释，
不会在浏览器中显示。
-->


      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Linux/" rel="tag"># -Linux</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/learngit.html" rel="next" title="Git学习">
                <i class="fa fa-chevron-left"></i> Git学习
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/network.html" rel="prev" title="network">
                network <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  
    <div class="comments" id="comments">
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
            <a href="/">
              <img class="site-author-image" itemprop="image" src="/images/avatar.png" alt="冯宇康">
            </a>    
            
              <p class="site-author-name" itemprop="name">冯宇康</p>
              <div class="site-description motion-element" itemprop="description">起步晚，抓紧学，加油干！</div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">9</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                      <a href="/categories/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">10</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                      <a href="/tags/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">7</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/finyorko" title="GitHub &rarr; https://github.com/finyorko" rel="noopener" target="_blank"><i class="fa fa-fw fa-globe"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="mailto:finyorko@163.com" title="E-Mail &rarr; mailto:finyorko@163.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://twitter.com/finyorko" title="Twitter &rarr; https://twitter.com/finyorko" rel="noopener" target="_blank"><i class="fa fa-fw fa-twitter"></i>Twitter</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://wpa.qq.com/msgrd?v=3&uin=820506576&site=qq&menu=yes" title="QQ &rarr; https://wpa.qq.com/msgrd?v=3&uin=820506576&site=qq&menu=yes" rel="noopener" target="_blank"><i class="fa fa-fw fa-qq"></i>QQ</a>
                </span>
              
            </div>
          

          

          
          

          
            
          
          

        </div>
      </div>

      
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#linux注意事项"><span class="nav-number">1.</span> <span class="nav-text">linux注意事项</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Linux各个目录的作用"><span class="nav-number">2.</span> <span class="nav-text">Linux各个目录的作用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Linux常用命令"><span class="nav-number">3.</span> <span class="nav-text">Linux常用命令</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#文件处理命令"><span class="nav-number">3.1.</span> <span class="nav-text">文件处理命令</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#命令格式与目录处理命令ls"><span class="nav-number">3.1.1.</span> <span class="nav-text">命令格式与目录处理命令ls</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#目录处理命令"><span class="nav-number">3.1.2.</span> <span class="nav-text">目录处理命令</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#mkdir"><span class="nav-number">3.1.2.1.</span> <span class="nav-text">mkdir</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#cd"><span class="nav-number">3.1.2.2.</span> <span class="nav-text">cd</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#pwd"><span class="nav-number">3.1.2.3.</span> <span class="nav-text">pwd</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#rmdir"><span class="nav-number">3.1.2.4.</span> <span class="nav-text">rmdir</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#cp"><span class="nav-number">3.1.2.5.</span> <span class="nav-text">cp</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#mv"><span class="nav-number">3.1.2.6.</span> <span class="nav-text">mv</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#rm"><span class="nav-number">3.1.2.7.</span> <span class="nav-text">rm</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#文件处理命令-1"><span class="nav-number">3.1.3.</span> <span class="nav-text">文件处理命令</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#touch"><span class="nav-number">3.1.3.1.</span> <span class="nav-text">touch</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#cat"><span class="nav-number">3.1.3.2.</span> <span class="nav-text">cat</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#tac"><span class="nav-number">3.1.3.3.</span> <span class="nav-text">tac</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#more"><span class="nav-number">3.1.3.4.</span> <span class="nav-text">more</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#less"><span class="nav-number">3.1.3.5.</span> <span class="nav-text">less</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#head"><span class="nav-number">3.1.3.6.</span> <span class="nav-text">head</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#tail"><span class="nav-number">3.1.3.7.</span> <span class="nav-text">tail</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#链接命令"><span class="nav-number">3.1.4.</span> <span class="nav-text">链接命令</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#ln"><span class="nav-number">3.1.4.1.</span> <span class="nav-text">ln</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#权限管理命令"><span class="nav-number">3.2.</span> <span class="nav-text">权限管理命令</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#chmod"><span class="nav-number">3.2.1.</span> <span class="nav-text">chmod</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#其他权限管理命令"><span class="nav-number">3.2.2.</span> <span class="nav-text">其他权限管理命令</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#chown"><span class="nav-number">3.2.2.1.</span> <span class="nav-text">chown</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#chgrp"><span class="nav-number">3.2.2.2.</span> <span class="nav-text">chgrp</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#umask"><span class="nav-number">3.2.2.3.</span> <span class="nav-text">umask</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#文件搜索命令"><span class="nav-number">3.3.</span> <span class="nav-text">文件搜索命令</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#其他搜索命令"><span class="nav-number">3.3.1.</span> <span class="nav-text">其他搜索命令</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#locate"><span class="nav-number">3.3.1.1.</span> <span class="nav-text">locate</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#which"><span class="nav-number">3.3.1.2.</span> <span class="nav-text">which</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#whereis"><span class="nav-number">3.3.1.3.</span> <span class="nav-text">whereis</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#grep"><span class="nav-number">3.3.1.4.</span> <span class="nav-text">grep</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#帮助命令"><span class="nav-number">3.4.</span> <span class="nav-text">帮助命令</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#man"><span class="nav-number">3.4.1.</span> <span class="nav-text">man</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#help"><span class="nav-number">3.4.2.</span> <span class="nav-text">help</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#用户管理命令"><span class="nav-number">3.5.</span> <span class="nav-text">用户管理命令</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#useradd"><span class="nav-number">3.5.1.</span> <span class="nav-text">useradd</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#passwd"><span class="nav-number">3.5.2.</span> <span class="nav-text">passwd</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#who"><span class="nav-number">3.5.3.</span> <span class="nav-text">who</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#w"><span class="nav-number">3.5.4.</span> <span class="nav-text">w</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#压缩解压命令"><span class="nav-number">3.6.</span> <span class="nav-text">压缩解压命令</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#gzip压缩"><span class="nav-number">3.6.1.</span> <span class="nav-text">gzip压缩</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#gunzip解压"><span class="nav-number">3.6.2.</span> <span class="nav-text">gunzip解压</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#tar压缩"><span class="nav-number">3.6.3.</span> <span class="nav-text">tar压缩</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#tar解压"><span class="nav-number">3.6.4.</span> <span class="nav-text">tar解压</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#zip压缩"><span class="nav-number">3.6.5.</span> <span class="nav-text">zip压缩</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#unzip解压"><span class="nav-number">3.6.6.</span> <span class="nav-text">unzip解压</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#bzip2压缩"><span class="nav-number">3.6.7.</span> <span class="nav-text">bzip2压缩</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#bunzip解压"><span class="nav-number">3.6.8.</span> <span class="nav-text">bunzip解压</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#网络命令"><span class="nav-number">3.7.</span> <span class="nav-text">网络命令</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#write"><span class="nav-number">3.7.1.</span> <span class="nav-text">write</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#wall"><span class="nav-number">3.7.2.</span> <span class="nav-text">wall</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ping"><span class="nav-number">3.7.3.</span> <span class="nav-text">ping</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ifconfig"><span class="nav-number">3.7.4.</span> <span class="nav-text">ifconfig</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#mail"><span class="nav-number">3.7.5.</span> <span class="nav-text">mail</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#last"><span class="nav-number">3.7.6.</span> <span class="nav-text">last</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#lastlog"><span class="nav-number">3.7.7.</span> <span class="nav-text">lastlog</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#traceroute"><span class="nav-number">3.7.8.</span> <span class="nav-text">traceroute</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#netstat"><span class="nav-number">3.7.9.</span> <span class="nav-text">netstat</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#setup"><span class="nav-number">3.7.10.</span> <span class="nav-text">setup</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#mount"><span class="nav-number">3.7.11.</span> <span class="nav-text">mount</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#关机重启命令"><span class="nav-number">3.8.</span> <span class="nav-text">关机重启命令</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#shutdown"><span class="nav-number">3.8.1.</span> <span class="nav-text">shutdown</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#其他关机命令"><span class="nav-number">3.8.2.</span> <span class="nav-text">其他关机命令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#其他重启命令"><span class="nav-number">3.8.3.</span> <span class="nav-text">其他重启命令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#系统运行级别"><span class="nav-number">3.8.4.</span> <span class="nav-text">系统运行级别</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#退出登录命令"><span class="nav-number">3.8.5.</span> <span class="nav-text">退出登录命令</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#文本编辑器Vim"><span class="nav-number">4.</span> <span class="nav-text">文本编辑器Vim</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Vim常用操作"><span class="nav-number">4.1.</span> <span class="nav-text">Vim常用操作</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#插入命令"><span class="nav-number">4.1.1.</span> <span class="nav-text">插入命令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#定位命令"><span class="nav-number">4.1.2.</span> <span class="nav-text">定位命令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#删除复制和粘贴命令"><span class="nav-number">4.1.3.</span> <span class="nav-text">删除复制和粘贴命令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#替换和取消命令"><span class="nav-number">4.1.4.</span> <span class="nav-text">替换和取消命令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#搜索和搜索替换命令"><span class="nav-number">4.1.5.</span> <span class="nav-text">搜索和搜索替换命令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#保存和退出命令"><span class="nav-number">4.1.6.</span> <span class="nav-text">保存和退出命令</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#vim暂存机制"><span class="nav-number">4.2.</span> <span class="nav-text">vim暂存机制</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#vim高级操作"><span class="nav-number">4.3.</span> <span class="nav-text">vim高级操作</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#vim区块选择"><span class="nav-number">4.3.1.</span> <span class="nav-text">vim区块选择</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#多档案编辑"><span class="nav-number">4.3.2.</span> <span class="nav-text">多档案编辑</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#多窗口编辑"><span class="nav-number">4.3.3.</span> <span class="nav-text">多窗口编辑</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#操作目录"><span class="nav-number">4.3.4.</span> <span class="nav-text">操作目录</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Linux软件安装"><span class="nav-number">5.</span> <span class="nav-text">Linux软件安装</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#编译安装方式"><span class="nav-number">5.1.</span> <span class="nav-text">编译安装方式</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#apt-get-安装方法"><span class="nav-number">5.1.1.</span> <span class="nav-text">apt-get 安装方法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#deb-包的安装方式"><span class="nav-number">5.1.2.</span> <span class="nav-text">deb 包的安装方式</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#二进制编译或者脚本安装方式"><span class="nav-number">5.2.</span> <span class="nav-text">二进制编译或者脚本安装方式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#rpm-包的安装方式"><span class="nav-number">5.3.</span> <span class="nav-text">rpm 包的安装方式</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#用户和用户组管理"><span class="nav-number">6.</span> <span class="nav-text">用户和用户组管理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#用户配置文件"><span class="nav-number">6.1.</span> <span class="nav-text">用户配置文件</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#用户信息文件-etc-passwd"><span class="nav-number">6.1.1.</span> <span class="nav-text">用户信息文件/etc/passwd</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#初始组和附加组"><span class="nav-number">6.1.1.1.</span> <span class="nav-text">初始组和附加组</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Shell是什么"><span class="nav-number">6.1.1.2.</span> <span class="nav-text">Shell是什么</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#影子文件-etc-shadow"><span class="nav-number">6.1.2.</span> <span class="nav-text">影子文件/etc/shadow</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#时间戳换算"><span class="nav-number">6.1.2.1.</span> <span class="nav-text">时间戳换算</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#组信息文件-etc-group和组密码文件-etc-gshadow"><span class="nav-number">6.1.3.</span> <span class="nav-text">组信息文件/etc/group和组密码文件/etc/gshadow</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#组信息文件-etc-group"><span class="nav-number">6.1.4.</span> <span class="nav-text">组信息文件/etc/group</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#组密码文件-etc-gshadow"><span class="nav-number">6.1.4.1.</span> <span class="nav-text">组密码文件/etc/gshadow</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#用户管理相关文件"><span class="nav-number">6.2.</span> <span class="nav-text">用户管理相关文件</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#用户的家目录"><span class="nav-number">6.2.1.</span> <span class="nav-text">用户的家目录</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#用户的邮箱"><span class="nav-number">6.2.2.</span> <span class="nav-text">用户的邮箱</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#用户模板目录"><span class="nav-number">6.2.3.</span> <span class="nav-text">用户模板目录</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#用户管理命令-1"><span class="nav-number">6.3.</span> <span class="nav-text">用户管理命令</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#用户添加命令useradd"><span class="nav-number">6.3.1.</span> <span class="nav-text">用户添加命令useradd</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#useradd命令格式"><span class="nav-number">6.3.1.1.</span> <span class="nav-text">useradd命令格式</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#添加默认用户"><span class="nav-number">6.3.1.2.</span> <span class="nav-text">添加默认用户</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#指定选项添加用户"><span class="nav-number">6.3.1.3.</span> <span class="nav-text">指定选项添加用户</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#用户默认值文件"><span class="nav-number">6.3.1.4.</span> <span class="nav-text">用户默认值文件</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#修改用户密码passwd"><span class="nav-number">6.3.2.</span> <span class="nav-text">修改用户密码passwd</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#passwd命令格式"><span class="nav-number">6.3.2.1.</span> <span class="nav-text">passwd命令格式</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#查看密码状态"><span class="nav-number">6.3.2.2.</span> <span class="nav-text">查看密码状态</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#锁定用户和解锁用户"><span class="nav-number">6.3.2.3.</span> <span class="nav-text">锁定用户和解锁用户</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#使用字符串作为用户的密码"><span class="nav-number">6.3.2.4.</span> <span class="nav-text">使用字符串作为用户的密码</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#修改用户信息usermod和修改用户密码状态chage"><span class="nav-number">6.3.3.</span> <span class="nav-text">修改用户信息usermod和修改用户密码状态chage</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#修改用户信息usermod"><span class="nav-number">6.3.3.1.</span> <span class="nav-text">修改用户信息usermod</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#修改用户密码状态chage"><span class="nav-number">6.3.3.2.</span> <span class="nav-text">修改用户密码状态chage</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#删除用户userdel和用户切换命令su"><span class="nav-number">6.3.4.</span> <span class="nav-text">删除用户userdel和用户切换命令su</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#删除用户userdel"><span class="nav-number">6.3.4.1.</span> <span class="nav-text">删除用户userdel</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#手工删除用户"><span class="nav-number">6.3.4.2.</span> <span class="nav-text">手工删除用户</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#查看用户ID"><span class="nav-number">6.3.4.3.</span> <span class="nav-text">查看用户ID</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#切换用户身份su"><span class="nav-number">6.3.4.4.</span> <span class="nav-text">切换用户身份su</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#用户组管理命令"><span class="nav-number">6.4.</span> <span class="nav-text">用户组管理命令</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#groupmod"><span class="nav-number">6.4.1.</span> <span class="nav-text">groupmod</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#删除用户组"><span class="nav-number">6.4.2.</span> <span class="nav-text">删除用户组</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#gpasswd"><span class="nav-number">6.4.3.</span> <span class="nav-text">gpasswd</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#权限管理"><span class="nav-number">7.</span> <span class="nav-text">权限管理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ACL权限"><span class="nav-number">7.1.</span> <span class="nav-text">ACL权限</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#ACL权限简介与开启"><span class="nav-number">7.1.1.</span> <span class="nav-text">ACL权限简介与开启</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#简介："><span class="nav-number">7.1.1.1.</span> <span class="nav-text">简介：</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#开启："><span class="nav-number">7.1.1.2.</span> <span class="nav-text">开启：</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#查看与设定ACL权限"><span class="nav-number">7.1.2.</span> <span class="nav-text">查看与设定ACL权限</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#查看ACL命令"><span class="nav-number">7.1.2.1.</span> <span class="nav-text">查看ACL命令</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#设定ACL权限的命令"><span class="nav-number">7.1.2.2.</span> <span class="nav-text">设定ACL权限的命令</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#给用户和用户组设定ACL权限"><span class="nav-number">7.1.2.3.</span> <span class="nav-text">给用户和用户组设定ACL权限</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#最大有效权限与删除ACL权限"><span class="nav-number">7.1.3.</span> <span class="nav-text">最大有效权限与删除ACL权限</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#最大有效权限mask"><span class="nav-number">7.1.3.1.</span> <span class="nav-text">最大有效权限mask</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#删除ACL权限"><span class="nav-number">7.1.3.2.</span> <span class="nav-text">删除ACL权限</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#默认ACL权限和递归ACL权限"><span class="nav-number">7.1.4.</span> <span class="nav-text">默认ACL权限和递归ACL权限</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#默认ACL权限"><span class="nav-number">7.1.4.1.</span> <span class="nav-text">默认ACL权限</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#递归-ACL-权限"><span class="nav-number">7.1.4.2.</span> <span class="nav-text">递归 ACL 权限</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#文件特殊权限"><span class="nav-number">7.2.</span> <span class="nav-text">文件特殊权限</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#SetUID"><span class="nav-number">7.2.1.</span> <span class="nav-text">SetUID</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#SetUID的功能"><span class="nav-number">7.2.1.1.</span> <span class="nav-text">SetUID的功能</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#设定SetUID的方法"><span class="nav-number">7.2.1.2.</span> <span class="nav-text">设定SetUID的方法</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#取消SetUID的方法"><span class="nav-number">7.2.1.3.</span> <span class="nav-text">取消SetUID的方法</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#危险的SetUID"><span class="nav-number">7.2.1.4.</span> <span class="nav-text">危险的SetUID</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#SetGID"><span class="nav-number">7.2.2.</span> <span class="nav-text">SetGID</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#SetGID针对文件的作用"><span class="nav-number">7.2.2.1.</span> <span class="nav-text">SetGID针对文件的作用</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#SetGID针对目录的作用"><span class="nav-number">7.2.2.2.</span> <span class="nav-text">SetGID针对目录的作用</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#设定SetGID"><span class="nav-number">7.2.2.3.</span> <span class="nav-text">设定SetGID</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#取消SetGID"><span class="nav-number">7.2.2.4.</span> <span class="nav-text">取消SetGID</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Sticky-BIT"><span class="nav-number">7.2.3.</span> <span class="nav-text">Sticky BIT</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#SBIT粘着位作用"><span class="nav-number">7.2.3.1.</span> <span class="nav-text">SBIT粘着位作用</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#设置与取消粘着位"><span class="nav-number">7.2.3.2.</span> <span class="nav-text">设置与取消粘着位</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#文件系统属性chattr权限"><span class="nav-number">7.3.</span> <span class="nav-text">文件系统属性chattr权限</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#chattr命令格式"><span class="nav-number">7.3.1.</span> <span class="nav-text">chattr命令格式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#查看文件系统属性"><span class="nav-number">7.3.2.</span> <span class="nav-text">查看文件系统属性</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#系统命令sudo权限"><span class="nav-number">7.4.</span> <span class="nav-text">系统命令sudo权限</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#sudo权限"><span class="nav-number">7.4.1.</span> <span class="nav-text">sudo权限</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#sudo使用"><span class="nav-number">7.4.2.</span> <span class="nav-text">sudo使用</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#授权sc用户可以重启服务器"><span class="nav-number">7.4.3.</span> <span class="nav-text">授权sc用户可以重启服务器</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#普通用户执行sudo赋予的命令"><span class="nav-number">7.4.4.</span> <span class="nav-text">普通用户执行sudo赋予的命令</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#文件系统管理"><span class="nav-number">8.</span> <span class="nav-text">文件系统管理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#回顾分区和文件系统"><span class="nav-number">8.1.</span> <span class="nav-text">回顾分区和文件系统</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#分区类型"><span class="nav-number">8.1.1.</span> <span class="nav-text">分区类型</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#文件系统"><span class="nav-number">8.1.2.</span> <span class="nav-text">文件系统</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#文件系统常用命令"><span class="nav-number">8.2.</span> <span class="nav-text">文件系统常用命令</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#df命令、du命令、fsck命令和dump2fs命令"><span class="nav-number">8.2.1.</span> <span class="nav-text">df命令、du命令、fsck命令和dump2fs命令</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#文件系统查看命令df"><span class="nav-number">8.2.1.1.</span> <span class="nav-text">文件系统查看命令df</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#统计目录或文件大小"><span class="nav-number">8.2.1.2.</span> <span class="nav-text">统计目录或文件大小</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#du命令和df命令的区别"><span class="nav-number">8.2.1.3.</span> <span class="nav-text">du命令和df命令的区别</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#文件系统修复命令fsck"><span class="nav-number">8.2.1.4.</span> <span class="nav-text">文件系统修复命令fsck</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#显示磁盘状态命令dumpe2fs"><span class="nav-number">8.2.1.5.</span> <span class="nav-text">显示磁盘状态命令dumpe2fs</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#挂载命令"><span class="nav-number">8.2.2.</span> <span class="nav-text">挂载命令</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#查询与自动挂载"><span class="nav-number">8.2.2.1.</span> <span class="nav-text">查询与自动挂载</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#挂载命令格式"><span class="nav-number">8.2.2.2.</span> <span class="nav-text">挂载命令格式</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#挂载光盘与U盘"><span class="nav-number">8.2.3.</span> <span class="nav-text">挂载光盘与U盘</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#挂载光盘"><span class="nav-number">8.2.3.1.</span> <span class="nav-text">挂载光盘</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#卸载命令"><span class="nav-number">8.2.3.2.</span> <span class="nav-text">卸载命令</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#挂载U盘"><span class="nav-number">8.2.3.3.</span> <span class="nav-text">挂载U盘</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#支持NTFS文件系统"><span class="nav-number">8.2.4.</span> <span class="nav-text">支持NTFS文件系统</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#下载NTFS-3G插件"><span class="nav-number">8.2.4.1.</span> <span class="nav-text">下载NTFS-3G插件</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#安装NTFS-3G"><span class="nav-number">8.2.4.2.</span> <span class="nav-text">安装NTFS-3G</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#使用"><span class="nav-number">8.2.4.3.</span> <span class="nav-text">使用</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#fdisk分区"><span class="nav-number">8.3.</span> <span class="nav-text">fdisk分区</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#fdisk命令分区过程"><span class="nav-number">8.3.1.</span> <span class="nav-text">fdisk命令分区过程</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#分区自动挂载与fstab文件修复"><span class="nav-number">8.3.2.</span> <span class="nav-text">分区自动挂载与fstab文件修复</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#分配swap分区"><span class="nav-number">8.4.</span> <span class="nav-text">分配swap分区</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#新建swap分区"><span class="nav-number">8.4.1.</span> <span class="nav-text">新建swap分区</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#格式化"><span class="nav-number">8.4.2.</span> <span class="nav-text">格式化</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#加入swap分区"><span class="nav-number">8.4.3.</span> <span class="nav-text">加入swap分区</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#swap分区开机自动挂载"><span class="nav-number">8.4.4.</span> <span class="nav-text">swap分区开机自动挂载</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#free命令"><span class="nav-number">8.4.5.</span> <span class="nav-text">free命令</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Shell基础"><span class="nav-number">9.</span> <span class="nav-text">Shell基础</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Shell概述"><span class="nav-number">9.1.</span> <span class="nav-text">Shell概述</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Shell是什么-1"><span class="nav-number">9.1.1.</span> <span class="nav-text">Shell是什么</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Shell的分类"><span class="nav-number">9.1.2.</span> <span class="nav-text">Shell的分类</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Linux支持的Shell"><span class="nav-number">9.1.3.</span> <span class="nav-text">Linux支持的Shell</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Shell脚本的执行方式"><span class="nav-number">9.2.</span> <span class="nav-text">Shell脚本的执行方式</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#echo输出命令"><span class="nav-number">9.2.1.</span> <span class="nav-text">echo输出命令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#第一个脚本"><span class="nav-number">9.2.2.</span> <span class="nav-text">第一个脚本</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#脚本执行"><span class="nav-number">9.2.3.</span> <span class="nav-text">脚本执行</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Bash的基本功能"><span class="nav-number">9.3.</span> <span class="nav-text">Bash的基本功能</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#历史命令与命令补全"><span class="nav-number">9.3.1.</span> <span class="nav-text">历史命令与命令补全</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#历史命令"><span class="nav-number">9.3.1.1.</span> <span class="nav-text">历史命令</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#命令与文件补全"><span class="nav-number">9.3.1.2.</span> <span class="nav-text">命令与文件补全</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#命令别名与常用快捷键"><span class="nav-number">9.3.2.</span> <span class="nav-text">命令别名与常用快捷键</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#命令别名"><span class="nav-number">9.3.2.1.</span> <span class="nav-text">命令别名</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Bash常用快捷键"><span class="nav-number">9.3.2.2.</span> <span class="nav-text">Bash常用快捷键</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#输入输出重定向"><span class="nav-number">9.3.3.</span> <span class="nav-text">输入输出重定向</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#标准输入输出"><span class="nav-number">9.3.3.1.</span> <span class="nav-text">标准输入输出</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#输出重定向"><span class="nav-number">9.3.3.2.</span> <span class="nav-text">输出重定向</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#输入重定向"><span class="nav-number">9.3.3.3.</span> <span class="nav-text">输入重定向</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#多命令顺序执行与管道符"><span class="nav-number">9.3.4.</span> <span class="nav-text">多命令顺序执行与管道符</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#多命令顺序执行"><span class="nav-number">9.3.4.1.</span> <span class="nav-text">多命令顺序执行</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#管道符"><span class="nav-number">9.3.4.2.</span> <span class="nav-text">管道符</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#通配符与其他特殊符号"><span class="nav-number">9.3.5.</span> <span class="nav-text">通配符与其他特殊符号</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#通配符"><span class="nav-number">9.3.5.1.</span> <span class="nav-text">通配符</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Bash中其他特殊符号"><span class="nav-number">9.3.5.2.</span> <span class="nav-text">Bash中其他特殊符号</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Bash的变量"><span class="nav-number">9.4.</span> <span class="nav-text">Bash的变量</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#用户自定义变量"><span class="nav-number">9.4.1.</span> <span class="nav-text">用户自定义变量</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#环境变量"><span class="nav-number">9.4.2.</span> <span class="nav-text">环境变量</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#位置参数变量"><span class="nav-number">9.4.3.</span> <span class="nav-text">位置参数变量</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#预定义变量"><span class="nav-number">9.4.4.</span> <span class="nav-text">预定义变量</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Bash的运算符"><span class="nav-number">9.5.</span> <span class="nav-text">Bash的运算符</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#数值运算与运算符"><span class="nav-number">9.5.1.</span> <span class="nav-text">数值运算与运算符</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#变量测试与内容替换"><span class="nav-number">9.5.2.</span> <span class="nav-text">变量测试与内容替换</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#环境变量配置文件"><span class="nav-number">9.6.</span> <span class="nav-text">环境变量配置文件</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#环境变量配置文件简介"><span class="nav-number">9.6.1.</span> <span class="nav-text">环境变量配置文件简介</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#环境变量配置文件作用"><span class="nav-number">9.6.2.</span> <span class="nav-text">环境变量配置文件作用</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#其他配置文件和登录信息"><span class="nav-number">9.6.3.</span> <span class="nav-text">其他配置文件和登录信息</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Shell编程"><span class="nav-number">10.</span> <span class="nav-text">Shell编程</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#基础正则表达式"><span class="nav-number">10.1.</span> <span class="nav-text">基础正则表达式</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#正则表达式与通配符"><span class="nav-number">10.1.1.</span> <span class="nav-text">正则表达式与通配符</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#基础正则表达式-1"><span class="nav-number">10.1.2.</span> <span class="nav-text">基础正则表达式</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#字符截取命令"><span class="nav-number">10.2.</span> <span class="nav-text">字符截取命令</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#cut字段提取命令"><span class="nav-number">10.2.1.</span> <span class="nav-text">cut字段提取命令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#printf命令"><span class="nav-number">10.2.2.</span> <span class="nav-text">printf命令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#awk命令"><span class="nav-number">10.2.3.</span> <span class="nav-text">awk命令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#sed命令"><span class="nav-number">10.2.4.</span> <span class="nav-text">sed命令</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#字符处理命令"><span class="nav-number">10.3.</span> <span class="nav-text">字符处理命令</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#排序命令sort"><span class="nav-number">10.3.1.</span> <span class="nav-text">排序命令sort</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#统计命令wc"><span class="nav-number">10.3.2.</span> <span class="nav-text">统计命令wc</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#条件判断"><span class="nav-number">10.4.</span> <span class="nav-text">条件判断</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#流程控制"><span class="nav-number">10.5.</span> <span class="nav-text">流程控制</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#if语句"><span class="nav-number">10.5.1.</span> <span class="nav-text">if语句</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#case语句"><span class="nav-number">10.5.2.</span> <span class="nav-text">case语句</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#for循环"><span class="nav-number">10.5.3.</span> <span class="nav-text">for循环</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#while循环与until循环"><span class="nav-number">10.5.4.</span> <span class="nav-text">while循环与until循环</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Linux服务管理"><span class="nav-number">11.</span> <span class="nav-text">Linux服务管理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#服务简介与分类"><span class="nav-number">11.1.</span> <span class="nav-text">服务简介与分类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#RPM包安装服务的管理"><span class="nav-number">11.2.</span> <span class="nav-text">RPM包安装服务的管理</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#独立服务的管理"><span class="nav-number">11.2.1.</span> <span class="nav-text">独立服务的管理</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#基于xinetd服务的管理"><span class="nav-number">11.2.2.</span> <span class="nav-text">基于xinetd服务的管理</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#服务管理总结"><span class="nav-number">11.3.</span> <span class="nav-text">服务管理总结</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Linux系统管理"><span class="nav-number">12.</span> <span class="nav-text">Linux系统管理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#进程管理"><span class="nav-number">12.1.</span> <span class="nav-text">进程管理</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#进程查看"><span class="nav-number">12.1.1.</span> <span class="nav-text">进程查看</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#终止进程"><span class="nav-number">12.1.2.</span> <span class="nav-text">终止进程</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#工作管理"><span class="nav-number">12.2.</span> <span class="nav-text">工作管理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#系统资源查看"><span class="nav-number">12.3.</span> <span class="nav-text">系统资源查看</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#vmstat命令监控系统资源"><span class="nav-number">12.3.1.</span> <span class="nav-text">vmstat命令监控系统资源</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#dmesg开机时内核检测信息"><span class="nav-number">12.3.2.</span> <span class="nav-text">dmesg开机时内核检测信息</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#free命令查看内存使用状态"><span class="nav-number">12.3.3.</span> <span class="nav-text">free命令查看内存使用状态</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#查看CPU信息"><span class="nav-number">12.3.4.</span> <span class="nav-text">查看CPU信息</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#uptime命令"><span class="nav-number">12.3.5.</span> <span class="nav-text">uptime命令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#查看系统与内核相关信息"><span class="nav-number">12.3.6.</span> <span class="nav-text">查看系统与内核相关信息</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#列出进程打开或使用的文件信息"><span class="nav-number">12.3.7.</span> <span class="nav-text">列出进程打开或使用的文件信息</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#系统定时任务"><span class="nav-number">12.4.</span> <span class="nav-text">系统定时任务</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#crond服务管理与访问控制"><span class="nav-number">12.4.1.</span> <span class="nav-text">crond服务管理与访问控制</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#用户的crontab设置"><span class="nav-number">12.4.2.</span> <span class="nav-text">用户的crontab设置</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#日志管理"><span class="nav-number">13.</span> <span class="nav-text">日志管理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#日志管理简介"><span class="nav-number">13.1.</span> <span class="nav-text">日志管理简介</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#日志服务"><span class="nav-number">13.1.1.</span> <span class="nav-text">日志服务</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#常见日志的作用"><span class="nav-number">13.1.2.</span> <span class="nav-text">常见日志的作用</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#rsyslogd日志服务"><span class="nav-number">13.2.</span> <span class="nav-text">rsyslogd日志服务</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#日志文件格式"><span class="nav-number">13.2.1.</span> <span class="nav-text">日志文件格式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#etc-rsyslog-conf配置文件"><span class="nav-number">13.2.2.</span> <span class="nav-text">/etc/rsyslog.conf配置文件</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#日志轮替"><span class="nav-number">13.3.</span> <span class="nav-text">日志轮替</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#日志文件的命名规则"><span class="nav-number">13.3.1.</span> <span class="nav-text">日志文件的命名规则</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#logrotate配置文件"><span class="nav-number">13.3.2.</span> <span class="nav-text">logrotate配置文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#把apache日志加入轮替"><span class="nav-number">13.3.3.</span> <span class="nav-text">把apache日志加入轮替</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#logrotate命令"><span class="nav-number">13.3.4.</span> <span class="nav-text">logrotate命令</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#启动管理"><span class="nav-number">14.</span> <span class="nav-text">启动管理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#CentOS-6-x启动管理"><span class="nav-number">14.1.</span> <span class="nav-text">CentOS 6.x启动管理</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#系统运行级别-1"><span class="nav-number">14.1.1.</span> <span class="nav-text">系统运行级别</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#系统启动过程"><span class="nav-number">14.1.2.</span> <span class="nav-text">系统启动过程</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#启动引导程序grub"><span class="nav-number">14.2.</span> <span class="nav-text">启动引导程序grub</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Grub配置文件"><span class="nav-number">14.2.1.</span> <span class="nav-text">Grub配置文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Grub加密与字符界面分辨率调整"><span class="nav-number">14.2.2.</span> <span class="nav-text">Grub加密与字符界面分辨率调整</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#系统修复模式"><span class="nav-number">14.3.</span> <span class="nav-text">系统修复模式</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#单用户模式"><span class="nav-number">14.3.1.</span> <span class="nav-text">单用户模式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#光盘修复模式"><span class="nav-number">14.3.2.</span> <span class="nav-text">光盘修复模式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Linux的安全性"><span class="nav-number">14.3.3.</span> <span class="nav-text">Linux的安全性</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#备份与恢复"><span class="nav-number">15.</span> <span class="nav-text">备份与恢复</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#备份概述"><span class="nav-number">15.1.</span> <span class="nav-text">备份概述</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Linux系统需要备份的数据"><span class="nav-number">15.1.1.</span> <span class="nav-text">Linux系统需要备份的数据</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#备份策略"><span class="nav-number">15.1.2.</span> <span class="nav-text">备份策略</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#dump和restore命令"><span class="nav-number">15.2.</span> <span class="nav-text">dump和restore命令</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#dump命令"><span class="nav-number">15.2.1.</span> <span class="nav-text">dump命令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#restore命令"><span class="nav-number">15.2.2.</span> <span class="nav-text">restore命令</span></a></li></ol></li></ol></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <!--这一段统计主题中有，不用写了
<script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<div class="powered-by">
<i class="fa fa-user-md"></i><span id="busuanzi_container_site_uv">
  本站访客数:<span id="busuanzi_value_site_pv"></span>
</span>
-->

<div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">冯宇康</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
    <span title="站点总字数">167k</span>
  

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    
    <span title="站点阅读时长">9:16</span>
  
</div>













<div class="theme-info">
  <div class="powered-by"></div>
  <span class="post-count">博客全站共83.0k字</span>
</div>



        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="post-meta-item-icon">
      <i class="fa fa-user"></i>
    </span>
    <span class="site-uv" title="总访客量">
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
    </span>
  

  
    <span class="post-meta-divider">|</span>
  

  
    <span class="post-meta-item-icon">
      <i class="fa fa-eye"></i>
    </span>
    <span class="site-pv" title="总访问量">
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
    </span>
  
</div>









        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>












  















  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script src="/lib/fancybox/source/jquery.fancybox.pack.js"></script>


  


  <script src="/js/utils.js?v=7.1.2"></script>

  <script src="/js/motion.js?v=7.1.2"></script>



  
  


  <script src="/js/affix.js?v=7.1.2"></script>

  <script src="/js/schemes/pisces.js?v=7.1.2"></script>




  
  <script src="/js/scrollspy.js?v=7.1.2"></script>
<script src="/js/post-details.js?v=7.1.2"></script>



  


  <script src="/js/next-boot.js?v=7.1.2"></script>


  

  

  

  
  

<script src="//cdn1.lncld.net/static/js/3.11.1/av-min.js"></script>



<script src="//unpkg.com/valine/dist/Valine.min.js"></script>

<script>
  var GUEST = ['nick', 'mail', 'link'];
  var guest = 'nick,mail,link';
  guest = guest.split(',').filter(function(item) {
    return GUEST.indexOf(item) > -1;
  });
  new Valine({
    el: '#comments',
    verify: false,
    notify: false,
    appId: 'yR2jYA50Lcm5MbiKDanQEpIy-gzGzoHsz',
    appKey: 'CtNfG7dzENvr2ouIJNFPScVw',
    placeholder: 'Just go go',
    avatar: 'robohash',
    meta: guest,
    pageSize: '10' || 10,
    visitor: false,
    lang: '' || 'zh-cn'
  });
</script>




  


  
  <script>
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url).replace(/\/{2,}/g, '/');
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x"></i></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x"></i></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  
  

  
  

  
    
      <script type="text/x-mathjax-config">
  

  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$', '$'], ['\\(', '\\)'] ],
      processEscapes: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
      
      equationNumbers: {
        autoNumber: 'AMS'
      }
    }
  });
  MathJax.Hub.Register.StartupHook('TeX Jax Ready', function() {
    MathJax.InputJax.TeX.prefilterHooks.Add(function(data) {
      if (data.display) {
        var next = data.script.nextSibling;
        while (next && next.nodeName.toLowerCase() === '#text') { next = next.nextSibling }
        if (next && next.nodeName.toLowerCase() === 'br') { next.parentNode.removeChild(next) }
      }
    });
  });
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for (i = 0; i < all.length; i += 1) {
      document.getElementById(all[i].inputID + '-Frame').parentNode.className += ' has-jax';
    }
  });
</script>
<script src="//cdn.jsdelivr.net/npm/mathjax@2/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

    
  


  

  

  
  <script>
    (function(){
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      bp.src = (curProtocol === 'https') ? 'https://zz.bdstatic.com/linksubmit/push.js' : 'http://push.zhanzhang.baidu.com/push.js';
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
    })();
  </script>


  

  

  

  

  

  
<script>
  $('.highlight').not('.gist .highlight').each(function(i, e) {
    var $wrap = $('<div>').addClass('highlight-wrap');
    $(e).after($wrap);
    $wrap.append($('<button>').addClass('copy-btn').append('复制').on('click', function(e) {
      var code = $(this).parent().find('.code').find('.line').map(function(i, e) {
        return $(e).text();
      }).toArray().join('\n');
      var ta = document.createElement('textarea');
      var yPosition = window.pageYOffset || document.documentElement.scrollTop;
      ta.style.top = yPosition + 'px'; // Prevent page scroll
      ta.style.position = 'absolute';
      ta.style.opacity = '0';
      ta.readOnly = true;
      ta.value = code;
      document.body.appendChild(ta);
      const selection = document.getSelection();
      const selected = selection.rangeCount > 0 ? selection.getRangeAt(0) : false;
      ta.select();
      ta.setSelectionRange(0, code.length);
      ta.readOnly = false;
      var result = document.execCommand('copy');
      
        if (result) $(this).text('复制成功');
        else $(this).text('复制失败');
      
      ta.blur(); // For iOS
      $(this).blur();
      if (selected) {
        selection.removeAllRanges();
        selection.addRange(selected);
      }
    })).on('mouseleave', function(e) {
      var $b = $(this).find('.copy-btn');
      setTimeout(function() {
        $b.text('复制');
      }, 300);
    }).append(e);
  })
</script>


  

  

  
 <script type="text/javascript" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js"></script>
 

</body>
</html>
